(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function X1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var im={exports:{}},Ql={},om={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=Symbol.for("react.element"),Z1=Symbol.for("react.portal"),eS=Symbol.for("react.fragment"),tS=Symbol.for("react.strict_mode"),nS=Symbol.for("react.profiler"),rS=Symbol.for("react.provider"),iS=Symbol.for("react.context"),oS=Symbol.for("react.forward_ref"),sS=Symbol.for("react.suspense"),lS=Symbol.for("react.memo"),aS=Symbol.for("react.lazy"),yd=Symbol.iterator;function uS(n){return n===null||typeof n!="object"?null:(n=yd&&n[yd]||n["@@iterator"],typeof n=="function"?n:null)}var sm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lm=Object.assign,am={};function ci(n,e,t){this.props=n,this.context=e,this.refs=am,this.updater=t||sm}ci.prototype.isReactComponent={};ci.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ci.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function um(){}um.prototype=ci.prototype;function Uc(n,e,t){this.props=n,this.context=e,this.refs=am,this.updater=t||sm}var Hc=Uc.prototype=new um;Hc.constructor=Uc;lm(Hc,ci.prototype);Hc.isPureReactComponent=!0;var Sd=Array.isArray,cm=Object.prototype.hasOwnProperty,jc={current:null},fm={key:!0,ref:!0,__self:!0,__source:!0};function dm(n,e,t){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)cm.call(e,r)&&!fm.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(n&&n.defaultProps)for(r in l=n.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:jo,type:n,key:o,ref:s,props:i,_owner:jc.current}}function cS(n,e){return{$$typeof:jo,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Kc(n){return typeof n=="object"&&n!==null&&n.$$typeof===jo}function fS(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var wd=/\/+/g;function ya(n,e){return typeof n=="object"&&n!==null&&n.key!=null?fS(""+n.key):e.toString(36)}function zs(n,e,t,r,i){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case jo:case Z1:s=!0}}if(s)return s=n,i=i(s),n=r===""?"."+ya(s,0):r,Sd(i)?(t="",n!=null&&(t=n.replace(wd,"$&/")+"/"),zs(i,e,t,"",function(u){return u})):i!=null&&(Kc(i)&&(i=cS(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(wd,"$&/")+"/")+n)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Sd(n))for(var l=0;l<n.length;l++){o=n[l];var a=r+ya(o,l);s+=zs(o,e,t,a,i)}else if(a=uS(n),typeof a=="function")for(n=a.call(n),l=0;!(o=n.next()).done;)o=o.value,a=r+ya(o,l++),s+=zs(o,e,t,a,i);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function as(n,e,t){if(n==null)return n;var r=[],i=0;return zs(n,r,"","",function(o){return e.call(t,o,i++)}),r}function dS(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ze={current:null},Ps={transition:null},hS={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:Ps,ReactCurrentOwner:jc};V.Children={map:as,forEach:function(n,e,t){as(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return as(n,function(){e++}),e},toArray:function(n){return as(n,function(e){return e})||[]},only:function(n){if(!Kc(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};V.Component=ci;V.Fragment=eS;V.Profiler=nS;V.PureComponent=Uc;V.StrictMode=tS;V.Suspense=sS;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hS;V.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=lm({},n.props),i=n.key,o=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=jc.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(a in e)cm.call(e,a)&&!fm.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:jo,type:n.type,key:i,ref:o,props:r,_owner:s}};V.createContext=function(n){return n={$$typeof:iS,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:rS,_context:n},n.Consumer=n};V.createElement=dm;V.createFactory=function(n){var e=dm.bind(null,n);return e.type=n,e};V.createRef=function(){return{current:null}};V.forwardRef=function(n){return{$$typeof:oS,render:n}};V.isValidElement=Kc;V.lazy=function(n){return{$$typeof:aS,_payload:{_status:-1,_result:n},_init:dS}};V.memo=function(n,e){return{$$typeof:lS,type:n,compare:e===void 0?null:e}};V.startTransition=function(n){var e=Ps.transition;Ps.transition={};try{n()}finally{Ps.transition=e}};V.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};V.useCallback=function(n,e){return ze.current.useCallback(n,e)};V.useContext=function(n){return ze.current.useContext(n)};V.useDebugValue=function(){};V.useDeferredValue=function(n){return ze.current.useDeferredValue(n)};V.useEffect=function(n,e){return ze.current.useEffect(n,e)};V.useId=function(){return ze.current.useId()};V.useImperativeHandle=function(n,e,t){return ze.current.useImperativeHandle(n,e,t)};V.useInsertionEffect=function(n,e){return ze.current.useInsertionEffect(n,e)};V.useLayoutEffect=function(n,e){return ze.current.useLayoutEffect(n,e)};V.useMemo=function(n,e){return ze.current.useMemo(n,e)};V.useReducer=function(n,e,t){return ze.current.useReducer(n,e,t)};V.useRef=function(n){return ze.current.useRef(n)};V.useState=function(n){return ze.current.useState(n)};V.useSyncExternalStore=function(n,e,t){return ze.current.useSyncExternalStore(n,e,t)};V.useTransition=function(){return ze.current.useTransition()};V.version="18.2.0";om.exports=V;var v=om.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS=v,mS=Symbol.for("react.element"),gS=Symbol.for("react.fragment"),yS=Object.prototype.hasOwnProperty,SS=pS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wS={key:!0,ref:!0,__self:!0,__source:!0};function hm(n,e,t){var r,i={},o=null,s=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)yS.call(e,r)&&!wS.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:mS,type:n,key:o,ref:s,props:i,_owner:SS.current}}Ql.Fragment=gS;Ql.jsx=hm;Ql.jsxs=hm;im.exports=Ql;var A=im.exports;function de(n){this.content=n}de.prototype={constructor:de,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new de(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new de(t)},addToStart:function(n,e){return new de([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new de(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new de(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=de.from(n),n.size?new de(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=de.from(n),n.size?new de(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=de.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};de.from=function(n){if(n instanceof de)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new de(e)};function pm(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)t++;return t}if(i.content.size||o.content.size){let s=pm(i.content,o.content,t+1);if(s!=null)return s}t+=i.nodeSize}}function mm(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let s=n.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){t-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:t,b:r};if(s.isText&&s.text!=l.text){let u=0,c=Math.min(s.text.length,l.text.length);for(;u<c&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,t--,r--;return{a:t,b:r}}if(s.content.size||l.content.size){let u=mm(s.content,l.content,t-1,r-1);if(u)return u}t-=a,r-=a}}class x{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let s=0,l=0;l<t;s++){let a=this.content[s],u=l+a.nodeSize;if(u>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),r,i+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",s=!0;return this.nodesBetween(e,t,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,t-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new x(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,s=0;s<t;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,t-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,t-s-1))),r.push(l),i+=l.nodeSize),s=a}return new x(r,i)}cutByIndex(e,t){return e==t?x.empty:e==0&&t==this.content.length?this:new x(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new x(i,o)}addToStart(e){return new x([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new x(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return pm(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return mm(this,e,t,r)}findIndex(e,t=-1){if(e==0)return us(0,e);if(e==this.size)return us(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||t>0?us(r+1,s):us(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return x.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new x(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return x.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new x(t||e,r)}static from(e){if(!e)return x.empty;if(e instanceof x)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new x([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}x.empty=new x([],0);const Sa={index:0,offset:0};function us(n,e){return Sa.index=n,Sa.offset=e,Sa}function cl(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!cl(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!cl(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class _{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&cl(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return _.none;if(e instanceof _)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}_.none=[];class En extends Error{}class k{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=ym(this.content,e+this.openStart,t);return r&&new k(r,this.openStart,this.openEnd)}removeBetween(e,t){return new k(gm(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return k.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new k(x.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new k(e,r,i)}}k.empty=new k(x.empty,0,0);function gm(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:s,offset:l}=n.findIndex(t);if(i==e||o.isText){if(l!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(gm(o.content,e-i-1,t-i-1)))}function ym(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),s=n.maybeChild(i);if(o==e||s.isText)return n.cut(0,e).append(t).append(n.cut(e));let l=ym(s.content,e-o-1,t);return l&&n.replaceChild(i,s.copy(l))}function kS(n,e,t){if(t.openStart>n.depth)throw new En("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new En("Inconsistent open depths");return Sm(n,e,t,0)}function Sm(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let s=Sm(n,e,t,r+1);return o.copy(o.content.replaceChild(i,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let s=n.parent,l=s.content;return Gn(s,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=vS(t,n);return Gn(o,km(n,s,l,e,r))}else return Gn(o,fl(n,e,r))}function wm(n,e){if(!e.type.compatibleContent(n.type))throw new En("Cannot join "+e.type.name+" onto "+n.type.name)}function wu(n,e,t){let r=n.node(t);return wm(r,e.node(t)),r}function Yn(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Zi(n,e,t,r){let i=(e||n).node(t),o=0,s=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Yn(n.nodeAfter,r),o++));for(let l=o;l<s;l++)Yn(i.child(l),r);e&&e.depth==t&&e.textOffset&&Yn(e.nodeBefore,r)}function Gn(n,e){return n.type.checkContent(e),n.copy(e)}function km(n,e,t,r,i){let o=n.depth>i&&wu(n,e,i+1),s=r.depth>i&&wu(t,r,i+1),l=[];return Zi(null,n,i,l),o&&s&&e.index(i)==t.index(i)?(wm(o,s),Yn(Gn(o,km(n,e,t,r,i+1)),l)):(o&&Yn(Gn(o,fl(n,e,i+1)),l),Zi(e,t,i,l),s&&Yn(Gn(s,fl(t,r,i+1)),l)),Zi(r,null,i,l),new x(l)}function fl(n,e,t){let r=[];if(Zi(null,n,t,r),n.depth>t){let i=wu(n,e,t+1);Yn(Gn(i,fl(n,e,t+1)),r)}return Zi(e,null,t,r),new x(r)}function vS(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(x.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class go{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return _.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new NS(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),u=o-a;if(r.push(s,l,i+a),!u||(s=s.child(l),s.isText))break;o=u-1,i+=a+1}return new go(t,r,o)}static resolveCached(e,t){let r=kd.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==t)return s}else kd.set(e,r=new xS);let i=r.elts[r.i]=go.resolve(e,t);return r.i=(r.i+1)%CS,i}}class xS{constructor(){this.elts=[],this.i=0}}const CS=12,kd=new WeakMap;class NS{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const MS=Object.create(null);class Dt{constructor(e,t,r,i=_.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||x.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&cl(this.attrs,t||e.defaultAttrs||MS)&&_.sameSet(this.marks,r||_.none)}copy(e=null){return e==this.content?this:new Dt(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Dt(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return k.empty;let i=this.resolve(e),o=this.resolve(t),s=r?0:i.sharedDepth(t),l=i.start(s),u=i.node(s).content.cut(i.pos-l,o.pos-l);return new k(u,i.depth-s,o.depth-s)}replace(e,t,r){return kS(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return go.resolveCached(this,e)}resolveNoCache(e){return go.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),vm(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=x.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=_.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!_.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=x.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,i,r);return o.type.checkAttrs(o.attrs),o}}Dt.prototype.text=void 0;class dl extends Dt{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):vm(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new dl(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new dl(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function vm(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class nr{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new ES(e,t);if(r.next==null)return nr.empty;let i=xm(r);r.next&&r.err("Unexpected trailing text");let o=IS(bS(i));return zS(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!t||a.validEnd))return x.from(l.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:f}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,l.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}nr.empty=new nr(!0);class ES{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function xm(n){let e=[];do e.push(OS(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function OS(n){let e=[];do e.push(DS(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function DS(n){let e=AS(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=TS(n,e);else break;return e}function vd(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function TS(n,e){let t=vd(n),r=t;return n.eat(",")&&(n.next!="}"?r=vd(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function RS(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let s=t[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function AS(n){if(n.eat("(")){let e=xm(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=RS(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function bS(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(s,l,a){let u={term:a,to:l};return e[s].push(u),u}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,u)=>a.concat(o(u,l)),[]);if(s.type=="seq")for(let a=0;;a++){let u=o(s.exprs[a],l);if(a==s.exprs.length-1)return u;i(u,l=t())}else if(s.type=="star"){let a=t();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=t();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let u=0;u<s.min;u++){let c=t();i(o(s.expr,a),c),a=c}if(s.max==-1)i(o(s.expr,a),a);else for(let u=s.min;u<s.max;u++){let c=t();r(a,c),i(o(s.expr,a),c),a=c}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Cm(n,e){return e-n}function xd(n,e){let t=[];return r(e),t.sort(Cm);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&t.indexOf(a)==-1&&r(a)}}}function IS(n){let e=Object.create(null);return t(xd(n,0));function t(r){let i=[];r.forEach(s=>{n[s].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<i.length;c++)i[c][0]==l&&(u=i[c][1]);xd(n,a).forEach(c=>{u||i.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new nr(r.indexOf(n.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(Cm);o.next.push({type:i[s][0],next:e[l.join(",")]||t(l)})}return o}}function zS(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:u}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Nm(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Mm(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function Em(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(e[i])}}function Om(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new FS(n,r,e[r]);return t}let Cd=class Dm{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Om(e,r.attrs),this.defaultAttrs=Nm(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==nr.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Mm(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Dt(this,this.computeAttrs(e),x.from(t),_.setFrom(r))}createChecked(e=null,t,r){return t=x.from(t),this.checkContent(t),new Dt(this,this.computeAttrs(e),t,_.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=x.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(x.empty,!0);return o?new Dt(this,e,t.append(o),_.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Em(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:_.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,s)=>r[o]=new Dm(o,t,s));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function PS(n,e,t){let r=t.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class FS{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?PS(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ko{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=Om(e,i.attrs),this.excluded=null;let o=Nm(this.attrs);this.instance=o?new _(this,o):null}create(e=null){return!e&&this.instance?this.instance:new _(this,Mm(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Ko(o,i++,t,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Em(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Tm{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=de.from(e.nodes),t.marks=de.from(e.marks||{}),this.nodes=Cd.compile(this.spec.nodes,this),this.marks=Ko.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=nr.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?Nd(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Nd(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Cd){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new dl(r,r.defaultAttrs,e,_.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Dt.fromJSON(this,e)}markFromJSON(e){return _.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Nd(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],s=o;if(o)t.push(o);else for(let l in n.marks){let a=n.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&t.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function LS(n){return n.tag!=null}function $S(n){return n.style!=null}class yo{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(LS(i))this.tags.push(i);else if($S(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new Ed(this,t,!1);return r.addAll(e,_.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Ed(this,t,!0);return r.addAll(e,_.none,t.from,t.to),k.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(JS(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<t.length;s++){let l=t[s];if((l.priority==null?50:l.priority)<o)break}t.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Od(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Od(s)),s.node||s.ignore||s.mark||(s.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new yo(e,yo.schemaRules(e)))}}const Rm={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},VS={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Am={ol:!0,ul:!0},hl=1,pl=2,eo=4;function Md(n,e,t){return e!=null?(e?hl:0)|(e==="full"?pl:0):n&&n.whitespace=="pre"?hl|pl:t&~eo}class cs{constructor(e,t,r,i,o,s){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=_.none,this.match=o||(s&eo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(x.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&hl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=x.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(x.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Rm.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ed{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,o,s=Md(null,t.preserveWhitespace,0)|(r?eo:0);i?o=new cs(i.type,i.attrs,_.none,!0,t.topMatch||i.type.contentMatch,s):r?o=new cs(null,null,_.none,!0,null,s):o=new cs(e.schema.topNodeType,null,_.none,!0,null,s),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top;if(i.options&pl||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i.options&hl)i.options&pl?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],s=e.previousSibling;(!o||s&&s.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=e.nodeName.toLowerCase(),o;Am.hasOwnProperty(i)&&this.parser.normalizeLists&&BS(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));if(s?s.ignore:VS.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let l,a=this.top,u=this.needsBlock;if(Rm.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),l=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);return}let c=s&&s.skip?t:this.readStyles(e,t);c&&this.addAll(e,c),l&&this.sync(a),this.needsBlock=u}else{let l=this.readStyles(e,t);l&&this.addElementByRule(e,s,l,s.consuming===!1?o:void 0)}}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?t=t.filter(u=>!a.clearMark(u)):t=t.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return t}addElementByRule(e,t,r,i){let o,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,t.attrs||null,r,t.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[t.mark];r=r.concat(a.create(t.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a,r)}o&&this.sync(l)&&this.open--}addAll(e,t,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,t);this.findAtPoint(e,o)}findPlace(e,t){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=s,!l.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)t=this.enterInner(r[o],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=_.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):Dd(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let o=this.findPlace(e.create(t),r);return o&&(o=this.enterInner(e,t,r,!0,i)),o}enterInner(e,t,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=Md(e,o,s.options);s.options&eo&&s.content.length==0&&(l|=eo);let a=_.none;return r=r.filter(u=>(s.type?s.type.allowsMarkType(u.type):Dd(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new cs(e,t,a,i,null,l)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let u=t[l];if(u==""){if(l==t.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let c=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;a--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function BS(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Am.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function JS(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Od(n){let e={};for(let t in n)e[t]=n[t];return e}function Dd(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}class fi{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=wa(t).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let u=s.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(o[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let u=s.marks[a++],c=this.serializeMark(u,s.isInline,t);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Fs(wa(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Fs(wa(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Fs(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new fi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Td(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Td(e.marks)}}function Td(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function wa(n){return n.document||window.document}const Rd=new WeakMap;function _S(n){let e=Rd.get(n);return e===void 0&&Rd.set(n,e=WS(n)),e}function WS(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Fs(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=_S(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(t=i.slice(0,s),i=i.slice(s+1));let l,a=t?n.createElementNS(t,i):n.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let f in u)if(u[f]!=null){let d=f.indexOf(" ");d>0?a.setAttributeNS(f.slice(0,d),f.slice(d+1),u[f]):a.setAttribute(f,u[f])}}for(let f=c;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:p,contentDOM:h}=Fs(n,d,t,r);if(a.appendChild(p),h){if(l)throw new RangeError("Multiple content holes");l=h}}}return{dom:a,contentDOM:l}}const bm=65535,Im=Math.pow(2,16);function US(n,e){return n+e*Im}function Ad(n){return n&bm}function HS(n){return(n-(n&bm))/Im}const zm=1,Pm=2,Ls=4,Fm=8;let bd=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Fm)>0}get deletedBefore(){return(this.delInfo&(zm|Ls))>0}get deletedAfter(){return(this.delInfo&(Pm|Ls))>0}get deletedAcross(){return(this.delInfo&Ls)>0}},Hr=class gr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&gr.empty)return gr.empty}recover(e){let t=0,r=Ad(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+HS(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:t:t,p=a+i+(d<0?0:c);if(r)return p;let h=e==(t<0?a:f)?null:US(l/3,e-a),m=e==a?Pm:e==f?zm:Ls;return(t<0?e!=a:e!=f)&&(m|=Fm),new bd(p,m,h)}i+=c-u}return r?e+i:new bd(e+i,0,null)}touches(e,t){let r=0,i=Ad(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new gr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?gr.empty:new gr(e<0?[0,-e,0]:[0,0,e])}};Hr.empty=new Hr([]);const ka=Object.create(null);let je=class{getMap(){return Hr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ka[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ka)throw new RangeError("Duplicate use of step JSON ID "+e);return ka[e]=t,t.prototype.jsonID=e,t}},Le=class Ei{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Ei(e,null)}static fail(e){return new Ei(null,e)}static fromReplace(e,t,r,i){try{return Ei.ok(e.replace(t,r,i))}catch(o){if(o instanceof En)return Ei.fail(o.message);throw o}}};function qc(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(qc(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return x.fromArray(r)}let Lm=class Oi extends je{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new k(qc(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return Le.fromReplace(e,this.from,this.to,o)}invert(){return new $m(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Oi(t.pos,r.pos,this.mark)}merge(e){return e instanceof Oi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Oi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Oi(t.from,t.to,e.markFromJSON(t.mark))}};je.jsonID("addMark",Lm);let $m=class Di extends je{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new k(qc(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Le.fromReplace(e,this.from,this.to,r)}invert(){return new Lm(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Di(t.pos,r.pos,this.mark)}merge(e){return e instanceof Di&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Di(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Di(t.from,t.to,e.markFromJSON(t.mark))}};je.jsonID("removeMark",$m);let Vm=class Ti extends je{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Le.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Le.fromReplace(e,this.pos,this.pos+1,new k(x.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Ti(this.pos,t.marks[i]);return new Ti(this.pos,this.mark)}}return new Bm(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ti(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ti(t.pos,e.markFromJSON(t.mark))}};je.jsonID("addNodeMark",Vm);let Bm=class ku extends je{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Le.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Le.fromReplace(e,this.pos,this.pos+1,new k(x.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Vm(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ku(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ku(t.pos,e.markFromJSON(t.mark))}};je.jsonID("removeNodeMark",Bm);let Qc=class Ln extends je{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&vu(e,this.from,this.to)?Le.fail("Structure replace would overwrite content"):Le.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Hr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ln(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Ln(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ln)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ln(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ln(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ln(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}};je.jsonID("replace",Qc);let ml=class $s extends je{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(vu(e,this.from,this.gapFrom)||vu(e,this.gapTo,this.to)))return Le.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Le.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Le.fromReplace(e,this.from,this.to,r):Le.fail("Content does not fit in gap")}getMap(){return new Hr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new $s(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new $s(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new $s(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}};je.jsonID("replaceAround",ml);function vu(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function jS(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Yc(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,s,t))return r;if(r==0||i.type.spec.isolating||!jS(i,o,s))break}return null}function Vs(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=t-2;u>o;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(d,f.childCount),h=r&&r[c]||f;if(h!=f&&(p=p.replaceChild(0,h.type.create(h.attrs))),!f.canReplace(d+1,f.childCount)||!h.type.validContent(p))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function Jm(n,e){let t=n.resolve(e),r=t.index();return KS(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function KS(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function _m(n,e,t=e,r=k.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return qS(i,o,r)?new Qc(e,t,r):new QS(i,o,r).fit()}function qS(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}let QS=class{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=x.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=x.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new k(o,s,l);return e>-1?new ml(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new Qc(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=va(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,f=null;if(t==1&&(s?u.matchType(s.type)||(f=u.fillBefore(x.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:f};if(t==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=va(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new k(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=va(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new k(Ri(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new k(Ri(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let m=l.child(u),w=f.matchType(m.type);if(!w)break;u++,(u>1||a==0||m.content.size)&&(f=w,c.push(Wm(m.mark(d.allowedMarks(m.marks)),u==1?a:0,u==l.childCount?p:-1)))}let h=u==l.childCount;h||(p=-1),this.placed=Ai(this.placed,t,x.from(c)),this.frontier[t].match=f,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,w=l;m<p;m++){let g=w.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),w=g.content}this.unplaced=h?e==0?k.empty:new k(Ri(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new k(Ri(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!xa(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=xa(e,t,i,r,o);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=xa(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ai(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ai(this.placed,this.depth,x.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(x.empty,!0);t.childCount&&(this.placed=Ai(this.placed,this.frontier.length,t))}};function Ri(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Ri(n.firstChild.content,e-1,t)))}function Ai(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Ai(n.lastChild.content,e-1,t)))}function va(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Wm(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Wm(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(x.empty,!0)))),n.copy(r)}function xa(n,e,t,r,i){let o=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!YS(t,o.content,s)?l:null}function YS(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}let GS=class Bs extends je{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Le.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Le.fromReplace(e,this.pos,this.pos+1,new k(x.from(i),0,t.isLeaf?0:1))}getMap(){return Hr.empty}invert(e){return new Bs(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Bs(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Bs(t.pos,t.attr,t.value)}};je.jsonID("attr",GS);let So=class extends Error{};So=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};So.prototype=Object.create(Error.prototype);So.prototype.constructor=So;So.prototype.name="TransformError";const Um=65535,Hm=Math.pow(2,16);function XS(n,e){return n+e*Hm}function Id(n){return n&Um}function ZS(n){return(n-(n&Um))/Hm}const jm=1,Km=2,Js=4,qm=8;let xu=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&qm)>0}get deletedBefore(){return(this.delInfo&(jm|Js))>0}get deletedAfter(){return(this.delInfo&(Km|Js))>0}get deletedAcross(){return(this.delInfo&Js)>0}},jr=class yr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&yr.empty)return yr.empty}recover(e){let t=0,r=Id(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+ZS(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:t:t,p=a+i+(d<0?0:c);if(r)return p;let h=e==(t<0?a:f)?null:XS(l/3,e-a),m=e==a?Km:e==f?jm:Js;return(t<0?e!=a:e!=f)&&(m|=qm),new xu(p,m,h)}i+=c-u}return r?e+i:new xu(e+i,0,null)}touches(e,t){let r=0,i=Id(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new yr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?yr.empty:new yr(e<0?[0,-e,0]:[0,0,e])}};jr.empty=new jr([]);let ew=class _s{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new _s(this.maps,this.mirror,e,t)}copy(){return new _s(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new _s;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],l=s.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new xu(e,i,null)}};const Ca=Object.create(null);let Ke=class{getMap(){return jr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ca[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ca)throw new RangeError("Duplicate use of step JSON ID "+e);return Ca[e]=t,t.prototype.jsonID=e,t}},$e=class bi{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new bi(e,null)}static fail(e){return new bi(null,e)}static fromReplace(e,t,r,i){try{return bi.ok(e.replace(t,r,i))}catch(o){if(o instanceof En)return bi.fail(o.message);throw o}}};function Gc(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(Gc(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return x.fromArray(r)}let Xc=class Ii extends Ke{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new k(Gc(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return $e.fromReplace(e,this.from,this.to,o)}invert(){return new qo(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ii(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ii&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ii(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ii(t.from,t.to,e.markFromJSON(t.mark))}};Ke.jsonID("addMark",Xc);let qo=class zi extends Ke{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new k(Gc(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return $e.fromReplace(e,this.from,this.to,r)}invert(){return new Xc(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new zi(t.pos,r.pos,this.mark)}merge(e){return e instanceof zi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new zi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new zi(t.from,t.to,e.markFromJSON(t.mark))}};Ke.jsonID("removeMark",qo);let Zc=class Pi extends Ke{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return $e.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return $e.fromReplace(e,this.pos,this.pos+1,new k(x.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Pi(this.pos,t.marks[i]);return new Pi(this.pos,this.mark)}}return new ef(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Pi(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Pi(t.pos,e.markFromJSON(t.mark))}};Ke.jsonID("addNodeMark",Zc);let ef=class Cu extends Ke{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return $e.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return $e.fromReplace(e,this.pos,this.pos+1,new k(x.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Zc(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Cu(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Cu(t.pos,e.markFromJSON(t.mark))}};Ke.jsonID("removeNodeMark",ef);let Tn=class $n extends Ke{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Nu(e,this.from,this.to)?$e.fail("Structure replace would overwrite content"):$e.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new jr([this.from,this.to-this.from,this.slice.size])}invert(e){return new $n(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new $n(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof $n)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new $n(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new $n(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new $n(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}};Ke.jsonID("replace",Tn);let ur=class Ws extends Ke{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Nu(e,this.from,this.gapFrom)||Nu(e,this.gapTo,this.to)))return $e.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return $e.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?$e.fromReplace(e,this.from,this.to,r):$e.fail("Content does not fit in gap")}getMap(){return new jr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Ws(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new Ws(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ws(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}};Ke.jsonID("replaceAround",ur);function Nu(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function tw(n,e,t,r){let i=[],o=[],s,l;n.doc.nodesBetween(e,t,(a,u,c)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),p=Math.min(u+a.nodeSize,t),h=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(h)||(s&&s.to==d&&s.mark.eq(f[m])?s.to=p:i.push(s=new qo(d,p,f[m])));l&&l.to==d?l.to=p:o.push(l=new Xc(d,p,r))}}),i.forEach(a=>n.step(a)),o.forEach(a=>n.step(a))}function nw(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof Ko){let u=s.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,t);for(let c=0;c<a.length;c++){let f=a[c],d;for(let p=0;p<i.length;p++){let h=i[p];h.step==o-1&&f.eq(i[p].style)&&(d=h)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(l,e),to:u,step:o})}}}),i.forEach(s=>n.step(new qo(s.from,s.to,s.style)))}function rw(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),o=[],s=e+1;for(let l=0;l<i.childCount;l++){let a=i.child(l),u=s+a.nodeSize,c=r.matchType(a.type);if(!c)o.push(new Tn(s,u,k.empty));else{r=c;for(let f=0;f<a.marks.length;f++)t.allowsMarkType(a.marks[f].type)||n.step(new qo(s,u,a.marks[f]))}s=u}if(!r.validEnd){let l=r.fillBefore(x.empty,!0);n.replace(s,s,new k(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function iw(n,e,t){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,u=l,c=x.empty,f=0;for(let h=o,m=!1;h>t;h--)m||r.index(h)>0?(m=!0,c=x.from(r.node(h).copy(c)),f++):a--;let d=x.empty,p=0;for(let h=o,m=!1;h>t;h--)m||i.after(h+1)<i.end(h)?(m=!0,d=x.from(i.node(h).copy(d)),p++):u++;n.step(new ur(a,u,s,l,new k(c.append(d),f,p),c.size-f,!0))}function ow(n,e,t){let r=x.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let l=t[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=x.from(t[s].type.create(t[s].attrs,r))}let i=e.start,o=e.end;n.step(new ur(i,o,i,o,new k(r,0,0),t.length,!0))}function sw(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(s,l)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&lw(n.doc,n.mapping.slice(o).map(l),r)){n.clearIncompatible(n.mapping.slice(o).map(l,1),r);let a=n.mapping.slice(o),u=a.map(l,1),c=a.map(l+s.nodeSize,1);return n.step(new ur(u,c,u+1,c-1,new k(x.from(r.create(i,null,s.marks)),0,0),1,!0)),!1}})}function lw(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function aw(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let s=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ur(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new k(x.from(s),0,0),1,!0))}function uw(n,e,t=1,r){let i=n.doc.resolve(e),o=x.empty,s=x.empty;for(let l=i.depth,a=i.depth-t,u=t-1;l>a;l--,u--){o=x.from(i.node(l).copy(o));let c=r&&r[u];s=x.from(c?c.type.create(c.attrs,s):i.node(l).copy(s))}n.step(new Tn(e,e,new k(o.append(s),t,t),!0))}function cw(n,e,t){let r=new Tn(e-t,e+t,k.empty,!0);n.step(r)}function fw(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function dw(n,e,t=e,r=k.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return Qm(i,o,r)?new Tn(e,t,r):new hw(i,o,r).fit()}function Qm(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}let hw=class{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=x.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=x.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new k(o,s,l);return e>-1?new ur(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new Tn(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Na(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,f=null;if(t==1&&(s?u.matchType(s.type)||(f=u.fillBefore(x.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:f};if(t==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Na(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new k(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Na(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new k(Fi(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new k(Fi(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let m=l.child(u),w=f.matchType(m.type);if(!w)break;u++,(u>1||a==0||m.content.size)&&(f=w,c.push(Ym(m.mark(d.allowedMarks(m.marks)),u==1?a:0,u==l.childCount?p:-1)))}let h=u==l.childCount;h||(p=-1),this.placed=Li(this.placed,t,x.from(c)),this.frontier[t].match=f,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,w=l;m<p;m++){let g=w.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),w=g.content}this.unplaced=h?e==0?k.empty:new k(Fi(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new k(Fi(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ma(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Ma(e,t,i,r,o);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=Ma(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Li(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Li(this.placed,this.depth,x.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(x.empty,!0);t.childCount&&(this.placed=Li(this.placed,this.frontier.length,t))}};function Fi(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Fi(n.firstChild.content,e-1,t)))}function Li(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Li(n.lastChild.content,e-1,t)))}function Na(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Ym(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Ym(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(x.empty,!0)))),n.copy(r)}function Ma(n,e,t,r,i){let o=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!pw(t,o.content,s)?l:null}function pw(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function mw(n){return n.spec.defining||n.spec.definingForContent}function gw(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(Qm(i,o,r))return n.step(new Tn(e,t,r));let s=Xm(i,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let d=i.depth,p=i.pos-1;d>0;d--,p--){let h=i.node(d).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(d)>-1?l=d:i.before(d)==p&&s.splice(1,0,-d)}let a=s.indexOf(l),u=[],c=r.openStart;for(let d=r.content,p=0;;p++){let h=d.firstChild;if(u.push(h),p==r.openStart)break;d=h.content}for(let d=c-1;d>=0;d--){let p=u[d].type,h=mw(p);if(h&&i.node(a).type!=p)c=d;else if(h||!p.isTextblock)break}for(let d=r.openStart;d>=0;d--){let p=(d+c+1)%(r.openStart+1),h=u[p];if(h)for(let m=0;m<s.length;m++){let w=s[(m+a)%s.length],g=!0;w<0&&(g=!1,w=-w);let y=i.node(w-1),S=i.index(w-1);if(y.canReplaceWith(S,S,h.type,h.marks))return n.replace(i.before(w),g?o.after(w):t,new k(Gm(r.content,0,r.openStart,p),p,r.openEnd))}}let f=n.steps.length;for(let d=s.length-1;d>=0&&(n.replace(e,t,r),!(n.steps.length>f));d--){let p=s[d];p<0||(e=i.before(p),t=o.after(p))}}function Gm(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(Gm(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(n).append(n);n=s.append(o.matchFragment(s).fillBefore(x.empty,!0))}return n}function yw(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=fw(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new k(x.from(r),0,0))}function Sw(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=Xm(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return n.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&i.end(s)-t!=i.depth-s)return n.delete(r.before(s),t);n.delete(e,t)}function Xm(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}let Zm=class Us extends Ke{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return $e.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return $e.fromReplace(e,this.pos,this.pos+1,new k(x.from(i),0,t.isLeaf?0:1))}getMap(){return jr.empty}invert(e){return new Us(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Us(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Us(t.pos,t.attr,t.value)}};Ke.jsonID("attr",Zm);let Kr=class extends Error{};Kr=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Kr.prototype=Object.create(Error.prototype);Kr.prototype.constructor=Kr;Kr.prototype.name="TransformError";let ww=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ew}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Kr(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=k.empty){let i=dw(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new k(x.from(r),0,0))}delete(e,t){return this.replace(e,t,k.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return gw(this,e,t,r),this}replaceRangeWith(e,t,r){return yw(this,e,t,r),this}deleteRange(e,t){return Sw(this,e,t),this}lift(e,t){return iw(this,e,t),this}join(e,t=1){return cw(this,e,t),this}wrap(e,t){return ow(this,e,t),this}setBlockType(e,t=e,r,i=null){return sw(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return aw(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Zm(e,t,r)),this}addNodeMark(e,t){return this.step(new Zc(e,t)),this}removeNodeMark(e,t){if(!(t instanceof _)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new ef(e,t)),this}split(e,t=1,r){return uw(this,e,t,r),this}addMark(e,t,r){return tw(this,e,t,r),this}removeMark(e,t,r){return nw(this,e,t,r),this}clearIncompatible(e,t,r){return rw(this,e,t,r),this}};const Ea=Object.create(null);class P{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new eg(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=k.empty){let r=t.content.lastChild,i=null;for(let l=0;l<t.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:u}=s[l],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(u.pos),l?k.empty:t),l==0&&Fd(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),u=a.map(s.pos),c=a.map(l.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,t),Fd(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new $(e):Sr(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=t<0?Sr(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):Sr(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Ze(e.node(0))}static atStart(e){return Sr(e,e,0,0,1)||new Ze(e)}static atEnd(e){return Sr(e,e,e.content.size,e.childCount,-1)||new Ze(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ea[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ea)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ea[e]=t,t.prototype.jsonID=e,t}getBookmark(){return $.between(this.$anchor,this.$head).getBookmark()}}P.prototype.visible=!0;class eg{constructor(e,t){this.$from=e,this.$to=t}}let zd=!1;function Pd(n){!zd&&!n.parent.inlineContent&&(zd=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class $ extends P{constructor(e,t=e){Pd(e),Pd(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return P.near(r);let i=e.resolve(t.map(this.anchor));return new $(i.parent.inlineContent?i:r,r)}replace(e,t=k.empty){if(super.replace(e,t),t==k.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof $&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Yl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new $(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=P.findFrom(t,r,!0)||P.findFrom(t,-r,!0);if(o)t=o.$head;else return P.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(P.findFrom(e,-r,!0)||P.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new $(e,t)}}P.jsonID("text",$);class Yl{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Yl(e.map(this.anchor),e.map(this.head))}resolve(e){return $.between(e.resolve(this.anchor),e.resolve(this.head))}}class I extends P{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?P.near(o):new I(o)}content(){return new k(x.from(this.node),0,0)}eq(e){return e instanceof I&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new tf(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new I(e.resolve(t.anchor))}static create(e,t){return new I(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}I.prototype.visible=!1;P.jsonID("node",I);class tf{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Yl(r,r):new tf(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&I.isSelectable(r)?new I(t):P.near(t)}}class Ze extends P{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=k.empty){if(t==k.empty){e.delete(0,e.doc.content.size);let r=P.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ze(e)}map(e){return new Ze(e)}eq(e){return e instanceof Ze}getBookmark(){return kw}}P.jsonID("all",Ze);const kw={map(){return this},resolve(n){return new Ze(n)}};function Sr(n,e,t,r,i,o=!1){if(e.inlineContent)return $.create(n,t);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&I.isSelectable(l))return I.create(n,t-(i<0?l.nodeSize:0))}else{let a=Sr(n,l,t+i,i<0?l.childCount:0,i,o);if(a)return a}t+=l.nodeSize*i}return null}function Fd(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Tn||i instanceof ur))return;let o=n.mapping.maps[r],s;o.forEach((l,a,u,c)=>{s==null&&(s=c)}),n.setSelection(P.near(n.doc.resolve(s),t))}const Ld=1,fs=2,$d=4;class vw extends ww{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ld)&~fs,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ld)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=fs,this}ensureMarks(e){return _.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&fs)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~fs,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||_.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(t);o=r==t?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(P.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=$d,this}get scrolledIntoView(){return(this.updated&$d)>0}}function Vd(n,e){return!e||!n?n:n.bind(e)}class $i{constructor(e,t,r){this.name=e,this.init=Vd(t.init,r),this.apply=Vd(t.apply,r)}}const xw=[new $i("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new $i("selection",{init(n,e){return n.selection||P.atStart(e.doc)},apply(n){return n.selection}}),new $i("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new $i("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Oa{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=xw.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new $i(r.key,r.spec.state,r))})}}class cn{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,u=i?i[s].state:this,c=a<t.length&&l.spec.appendTransaction.call(l,a?t.slice(a):t,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:t.length}:{state:this,n:0})}t.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new cn(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new vw(this)}static create(e){let t=new Oa(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new cn(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Oa(this.schema,e.plugins),r=t.fields,i=new cn(t);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Oa(e.schema,e.plugins),o=new cn(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Dt.fromJSON(e.schema,t.doc);else if(s.name=="selection")o.selection=P.fromJSON(o.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){o[s.name]=u.fromJSON.call(a,e,t[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function tg(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=tg(i,e,{})),t[r]=i}return t}class Lt{constructor(e){this.spec=e,this.props={},e.props&&tg(e.props,this,this.props),this.key=e.key?e.key.key:ng("plugin")}getState(e){return e[this.key]}}const Da=Object.create(null);function ng(n){return n in Da?n+"$"+ ++Da[n]:(Da[n]=0,n+"$")}class Qo{constructor(e="key"){this.key=ng(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const rg=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Cw(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Nw=(n,e,t)=>{let r=Cw(n,t);if(!r)return!1;let i=ig(r);if(!i){let s=r.blockRange(),l=s&&Yc(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&sg(n,i,e))return!0;if(r.parent.content.size==0&&(qr(o,"end")||I.isSelectable(o))){let s=_m(n.doc,r.before(),r.after(),k.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=n.tr.step(s);l.setSelection(qr(o,"end")?P.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):I.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function qr(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const Mw=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=ig(r)}let s=o&&o.nodeBefore;return!s||!I.isSelectable(s)?!1:(e&&e(n.tr.setSelection(I.create(n.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function ig(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Ew(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Ow=(n,e,t)=>{let r=Ew(n,t);if(!r)return!1;let i=og(r);if(!i)return!1;let o=i.nodeAfter;if(sg(n,i,e))return!0;if(r.parent.content.size==0&&(qr(o,"start")||I.isSelectable(o))){let s=_m(n.doc,r.before(),r.after(),k.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=n.tr.step(s);l.setSelection(qr(o,"start")?P.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):I.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Dw=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=og(r)}let s=o&&o.nodeAfter;return!s||!I.isSelectable(s)?!1:(e&&e(n.tr.setSelection(I.create(n.doc,o.pos)).scrollIntoView()),!0)};function og(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Tw=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function nf(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Rw=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),s=nf(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=t.after(),a=n.tr.replaceWith(l,l,s.createAndFill());a.setSelection(P.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},Aw=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Ze||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=nf(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=n.tr.insert(s,o.createAndFill());l.setSelection($.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},bw=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Vs(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Yc(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function Iw(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof I&&e.selection.node.isBlock)return!r.parentOffset||!Vs(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){let o=i.parentOffset==i.parent.content.size,s=e.tr;(e.selection instanceof $||e.selection instanceof Ze)&&s.deleteSelection();let l=r.depth==0?null:nf(r.node(-1).contentMatchAt(r.indexAfter(-1))),a=o&&l?[{type:l}]:void 0,u=Vs(s.doc,s.mapping.map(r.pos),1,a);if(!a&&!u&&Vs(s.doc,s.mapping.map(r.pos),1,l?[{type:l}]:void 0)&&(l&&(a=[{type:l}]),u=!0),u&&(s.split(s.mapping.map(r.pos),1,a),!o&&!r.parentOffset&&r.parent.type!=l)){let c=s.mapping.map(r.before()),f=s.doc.resolve(c);l&&r.node(-1).canReplaceWith(f.index(),f.index()+1,l)&&s.setNodeMarkup(s.mapping.map(r.before()),l)}t(s.scrollIntoView())}return!0}}const zw=Iw(),Pw=(n,e)=>(e&&e(n.tr.setSelection(new Ze(n.doc))),!0);function Fw(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Jm(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function sg(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Fw(n,e,t))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(t){let f=e.pos+i.nodeSize,d=x.empty;for(let m=o.length-1;m>=0;m--)d=x.from(o[m].create(null,d));d=x.from(r.copy(d));let p=n.tr.step(new ml(e.pos-1,f,e.pos,f,new k(d,1,0),o.length,!0)),h=f+2*o.length;Jm(p.doc,h)&&p.join(h),t(p.scrollIntoView())}return!0}let a=P.findFrom(e,1),u=a&&a.$from.blockRange(a.$to),c=u&&Yc(u);if(c!=null&&c>=e.depth)return t&&t(n.tr.lift(u,c).scrollIntoView()),!0;if(l&&qr(i,"start",!0)&&qr(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let p=i,h=1;for(;!p.isTextblock;p=p.firstChild)h++;if(f.canReplace(f.childCount,f.childCount,p.content)){if(t){let m=x.empty;for(let g=d.length-1;g>=0;g--)m=x.from(d[g].copy(m));let w=n.tr.step(new ml(e.pos-d.length,e.pos+i.nodeSize,e.pos+h,e.pos+i.nodeSize-h,new k(m,d.length,0),0,!0));t(w.scrollIntoView())}return!0}}return!1}function lg(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection($.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const Lw=lg(-1),$w=lg(1);function Vw(n,e,t){for(let r=0;r<e.length;r++){let{$from:i,$to:o}=e[r],s=i.depth==0?n.inlineContent&&n.type.allowsMarkType(t):!1;if(n.nodesBetween(i.pos,o.pos,l=>{if(s)return!1;s=l.inlineContent&&l.type.allowsMarkType(t)}),s)return!0}return!1}function Bd(n,e=null){return function(t,r){let{empty:i,$cursor:o,ranges:s}=t.selection;if(i&&!o||!Vw(t.doc,s,n))return!1;if(r)if(o)n.isInSet(t.storedMarks||o.marks())?r(t.tr.removeStoredMark(n)):r(t.tr.addStoredMark(n.create(e)));else{let l=!1,a=t.tr;for(let u=0;!l&&u<s.length;u++){let{$from:c,$to:f}=s[u];l=t.doc.rangeHasMark(c.pos,f.pos,n)}for(let u=0;u<s.length;u++){let{$from:c,$to:f}=s[u];if(l)a.removeMark(c.pos,f.pos,n);else{let d=c.pos,p=f.pos,h=c.nodeAfter,m=f.nodeBefore,w=h&&h.isText?/^\s*/.exec(h.text)[0].length:0,g=m&&m.isText?/\s*$/.exec(m.text)[0].length:0;d+w<p&&(d+=w,p-=g),a.addMark(d,p,n.create(e))}}r(a.scrollIntoView())}return!0}}function rf(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}let Ta=rf(rg,Nw,Mw),Jd=rf(rg,Ow,Dw);const Wt={Enter:rf(Tw,Aw,bw,zw),"Mod-Enter":Rw,Backspace:Ta,"Mod-Backspace":Ta,"Shift-Backspace":Ta,Delete:Jd,"Mod-Delete":Jd,"Mod-a":Pw},ag={"Ctrl-h":Wt.Backspace,"Alt-Backspace":Wt["Mod-Backspace"],"Ctrl-d":Wt.Delete,"Ctrl-Alt-Backspace":Wt["Mod-Delete"],"Alt-Delete":Wt["Mod-Delete"],"Alt-d":Wt["Mod-Delete"],"Ctrl-a":Lw,"Ctrl-e":$w};for(let n in Wt)ag[n]=Wt[n];const Bw=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Jw=Bw?ag:Wt;var bt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},_d=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),_w=typeof navigator<"u"&&/Mac/.test(navigator.platform),Ww=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Uw=_w||_d&&+_d[1]<57;for(var pe=0;pe<10;pe++)bt[48+pe]=bt[96+pe]=String(pe);for(var pe=1;pe<=24;pe++)bt[pe+111]="F"+pe;for(var pe=65;pe<=90;pe++)bt[pe]=String.fromCharCode(pe+32),gl[pe]=String.fromCharCode(pe);for(var Ra in bt)gl.hasOwnProperty(Ra)||(gl[Ra]=bt[Ra]);function of(n){var e=Uw&&(n.ctrlKey||n.altKey||n.metaKey)||Ww&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?gl:bt)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Hw=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function jw(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Hw?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function Kw(n){let e=Object.create(null);for(let t in n)e[jw(t)]=n[t];return e}function Aa(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function qw(n){let e=Kw(n);return function(t,r){let i=of(r),o,s=e[Aa(i,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Aa(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=bt[r.keyCode])&&o!=i){let l=e[Aa(o,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const ug=65535,cg=Math.pow(2,16);function Qw(n,e){return n+e*cg}function Wd(n){return n&ug}function Yw(n){return(n-(n&ug))/cg}const fg=1,dg=2,Hs=4,hg=8;let Ud=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&hg)>0}get deletedBefore(){return(this.delInfo&(fg|Hs))>0}get deletedAfter(){return(this.delInfo&(dg|Hs))>0}get deletedAcross(){return(this.delInfo&Hs)>0}},Qr=class wr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&wr.empty)return wr.empty}recover(e){let t=0,r=Wd(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Yw(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:t:t,p=a+i+(d<0?0:c);if(r)return p;let h=e==(t<0?a:f)?null:Qw(l/3,e-a),m=e==a?dg:e==f?fg:Hs;return(t<0?e!=a:e!=f)&&(m|=hg),new Ud(p,m,h)}i+=c-u}return r?e+i:new Ud(e+i,0,null)}touches(e,t){let r=0,i=Wd(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new wr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?wr.empty:new wr(e<0?[0,-e,0]:[0,0,e])}};Qr.empty=new Qr([]);const ba=Object.create(null);let qe=class{getMap(){return Qr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ba[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ba)throw new RangeError("Duplicate use of step JSON ID "+e);return ba[e]=t,t.prototype.jsonID=e,t}},Ve=class Vi{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Vi(e,null)}static fail(e){return new Vi(null,e)}static fromReplace(e,t,r,i){try{return Vi.ok(e.replace(t,r,i))}catch(o){if(o instanceof En)return Vi.fail(o.message);throw o}}};function sf(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(sf(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return x.fromArray(r)}let pg=class Bi extends qe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new k(sf(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return Ve.fromReplace(e,this.from,this.to,o)}invert(){return new mg(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Bi(t.pos,r.pos,this.mark)}merge(e){return e instanceof Bi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Bi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Bi(t.from,t.to,e.markFromJSON(t.mark))}};qe.jsonID("addMark",pg);let mg=class Ji extends qe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new k(sf(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Ve.fromReplace(e,this.from,this.to,r)}invert(){return new pg(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ji(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ji&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ji(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ji(t.from,t.to,e.markFromJSON(t.mark))}};qe.jsonID("removeMark",mg);let gg=class _i extends qe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ve.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Ve.fromReplace(e,this.pos,this.pos+1,new k(x.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new _i(this.pos,t.marks[i]);return new _i(this.pos,this.mark)}}return new yg(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new _i(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new _i(t.pos,e.markFromJSON(t.mark))}};qe.jsonID("addNodeMark",gg);let yg=class Mu extends qe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ve.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Ve.fromReplace(e,this.pos,this.pos+1,new k(x.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new gg(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Mu(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Mu(t.pos,e.markFromJSON(t.mark))}};qe.jsonID("removeNodeMark",yg);let Gw=class Vn extends qe{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Eu(e,this.from,this.to)?Ve.fail("Structure replace would overwrite content"):Ve.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Qr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Vn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Vn(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Vn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Vn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Vn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Vn(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}};qe.jsonID("replace",Gw);let Xw=class js extends qe{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Eu(e,this.from,this.gapFrom)||Eu(e,this.gapTo,this.to)))return Ve.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Ve.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Ve.fromReplace(e,this.from,this.to,r):Ve.fail("Content does not fit in gap")}getMap(){return new Qr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new js(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new js(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new js(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}};qe.jsonID("replaceAround",Xw);function Eu(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Zw(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(a,a,i);else{let f=u.contentMatchAt(a).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(a,a,f[0])}if(c)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}let ek=class Ks extends qe{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ve.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Ve.fromReplace(e,this.pos,this.pos+1,new k(x.from(i),0,t.isLeaf?0:1))}getMap(){return Qr.empty}invert(e){return new Ks(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ks(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ks(t.pos,t.attr,t.value)}};qe.jsonID("attr",ek);let wo=class extends Error{};wo=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};wo.prototype=Object.create(Error.prototype);wo.prototype.constructor=wo;wo.prototype.name="TransformError";const me=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},ko=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Ou=null;const Jt=function(n,e,t){let r=Ou||(Ou=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},tk=function(){Ou=null},rr=function(n,e,t,r){return t&&(Hd(n,e,t,r,-1)||Hd(n,e,t,r,1))},nk=/^(img|br|input|textarea|hr)$/i;function Hd(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:lt(n))){let o=n.parentNode;if(!o||o.nodeType!=1||Yo(n)||nk.test(n.nodeName)||n.contentEditable=="false")return!1;e=me(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?lt(n):0}else return!1}}function lt(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function rk(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=lt(n)}else if(n.parentNode&&!Yo(n))e=me(n),n=n.parentNode;else return null}}function ik(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Yo(n))e=me(n)+1,n=n.parentNode;else return null}}function ok(n,e,t){for(let r=e==0,i=e==lt(n);r||i;){if(n==t)return!0;let o=me(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==lt(n)}}function Yo(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Gl=function(n){return n.focusNode&&rr(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Wn(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function sk(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function lk(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(lt(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(lt(r.startContainer),r.startOffset)}}}const It=typeof navigator<"u"?navigator:null,jd=typeof document<"u"?document:null,Rn=It&&It.userAgent||"",Du=/Edge\/(\d+)/.exec(Rn),Sg=/MSIE \d/.exec(Rn),Tu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Rn),_e=!!(Sg||Tu||Du),gn=Sg?document.documentMode:Tu?+Tu[1]:Du?+Du[1]:0,xt=!_e&&/gecko\/(\d+)/i.test(Rn);xt&&+(/Firefox\/(\d+)/.exec(Rn)||[0,0])[1];const Ru=!_e&&/Chrome\/(\d+)/.exec(Rn),Ne=!!Ru,wg=Ru?+Ru[1]:0,Ae=!_e&&!!It&&/Apple Computer/.test(It.vendor),Yr=Ae&&(/Mobile\/\w+/.test(Rn)||!!It&&It.maxTouchPoints>2),it=Yr||(It?/Mac/.test(It.platform):!1),ak=It?/Win/.test(It.platform):!1,St=/Android \d/.test(Rn),Go=!!jd&&"webkitFontSmoothing"in jd.documentElement.style,uk=Go?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ck(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Vt(n,e){return typeof n=="number"?n:n[e]}function fk(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Kd(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let s=t||n.dom;s;s=ko(s)){if(s.nodeType!=1)continue;let l=s,a=l==o.body,u=a?ck(o):fk(l),c=0,f=0;if(e.top<u.top+Vt(r,"top")?f=-(u.top-e.top+Vt(i,"top")):e.bottom>u.bottom-Vt(r,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+Vt(i,"top")-u.top:e.bottom-u.bottom+Vt(i,"bottom")),e.left<u.left+Vt(r,"left")?c=-(u.left-e.left+Vt(i,"left")):e.right>u.right-Vt(r,"right")&&(c=e.right-u.right+Vt(i,"right")),c||f)if(a)o.defaultView.scrollBy(c,f);else{let d=l.scrollLeft,p=l.scrollTop;f&&(l.scrollTop+=f),c&&(l.scrollLeft+=c);let h=l.scrollLeft-d,m=l.scrollTop-p;e={left:e.left-h,top:e.top-m,right:e.right-h,bottom:e.bottom-m}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function dk(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=n.root.elementFromPoint(o,s);if(!l||l==n.dom||!n.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=t-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:kg(n.dom)}}function kg(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=ko(r));return e}function hk({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;vg(t,r==0?0:r-e)}function vg(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let hr=null;function pk(n){if(n.setActive)return n.setActive();if(hr)return n.focus(hr);let e=kg(n);n.focus(hr==null?{get preventScroll(){return hr={preventScroll:!0},!0}}:void 0),hr||(hr=!1,vg(e,0))}function xg(n,e){let t,r=2e8,i,o=0,s=e.top,l=e.top,a,u;for(let c=n.firstChild,f=0;c;c=c.nextSibling,f++){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=Jt(c).getClientRects();else continue;for(let p=0;p<d.length;p++){let h=d[p];if(h.top<=s&&h.bottom>=l){s=Math.max(h.bottom,s),l=Math.min(h.top,l);let m=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(m<r){t=c,r=m,i=m&&t.nodeType==3?{left:h.right<e.left?h.right:h.left,top:e.top}:e,c.nodeType==1&&m&&(o=f+(e.left>=(h.left+h.right)/2?1:0));continue}}else h.top>e.top&&!a&&h.left<=e.left&&h.right>=e.left&&(a=c,u={left:Math.max(h.left,Math.min(h.right,e.left)),top:h.top});!t&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(o=f+1)}}return!t&&a&&(t=a,i=u,r=0),t&&t.nodeType==3?mk(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:xg(t,i)}function mk(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=tn(r,1);if(o.top!=o.bottom&&lf(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function lf(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function gk(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function yk(n,e,t){let{node:r,offset:i}=xg(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function Sk(n,e,t,r){let i=-1;for(let o=e,s=!1;o!=n.dom;){let l=n.docView.nearestDesc(o,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText)return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}o=l.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function Cg(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let s=n.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(lf(e,u))return Cg(s,e,u)}}if((o=(o+1)%r)==i)break}return n}function wk(n,e){let t=n.dom.ownerDocument,r,i=0,o=lk(t,e.left,e.top);o&&({node:r,offset:i}=o);let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),l;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=n.dom.getBoundingClientRect();if(!lf(e,u)||(s=Cg(n.dom,e,u),!s))return null}if(Ae)for(let u=s;r&&u;u=ko(u))u.draggable&&(r=void 0);if(s=gk(s,e),r){if(xt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let u;Go&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=Sk(n,r,i,e))}l==null&&(l=yk(n,s,e));let a=n.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function qd(n){return n.top<n.bottom||n.left<n.right}function tn(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(qd(r))return r}return Array.prototype.find.call(t,qd)||n.getBoundingClientRect()}const kk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ng(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),s=Go||xt;if(r.nodeType==3)if(s&&(kk.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let a=tn(Jt(r,i,i),t);if(xt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=tn(Jt(r,i-1,i-1),-1);if(u.top==a.top){let c=tn(Jt(r,i,i+1),-1);if(c.top!=a.top)return yi(c,c.left<u.left)}}return a}else{let a=i,u=i,c=t<0?1:-1;return t<0&&!i?(u++,c=-1):t>=0&&i==r.nodeValue.length?(a--,c=1):t<0?a--:u++,yi(tn(Jt(r,a,u),c),c<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==lt(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Ia(a.getBoundingClientRect(),!1)}if(o==null&&i<lt(r)){let a=r.childNodes[i];if(a.nodeType==1)return Ia(a.getBoundingClientRect(),!0)}return Ia(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==lt(r))){let a=r.childNodes[i-1],u=a.nodeType==3?Jt(a,lt(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return yi(tn(u,1),!1)}if(o==null&&i<lt(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?Jt(a,0,s?0:1):a.nodeType==1?a:null:null;if(u)return yi(tn(u,-1),!0)}return yi(tn(r.nodeType==3?Jt(r):r,-t),t>=0)}function yi(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Ia(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Mg(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function vk(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return Mg(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let l=n.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=Ng(n,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Jt(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(t=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const xk=/[\u0590-\u08ac]/;function Ck(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=n.domSelection();return l?!xk.test(r.parent.textContent)||!l.modify?t=="left"||t=="backward"?o:s:Mg(n,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:f}=n.domSelectionRange(),d=l.caretBidiLevel;l.modify("move",t,"character");let p=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:h,focusOffset:m}=n.domSelectionRange(),w=h&&!p.contains(h.nodeType==1?h:h.parentNode)||a==h&&u==m;try{l.collapse(c,f),a&&(a!=c||u!=f)&&l.extend&&l.extend(a,u)}catch{}return d!=null&&(l.caretBidiLevel=d),w}):r.pos==r.start()||r.pos==r.end()}let Qd=null,Yd=null,Gd=!1;function Nk(n,e,t){return Qd==e&&Yd==t?Gd:(Qd=e,Yd=t,Gd=t=="up"||t=="down"?vk(n,e,t):Ck(n,e,t))}const ct=0,Xd=1,Hn=2,zt=3;let Xo=class{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=ct,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>me(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!t||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof Rg){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Eg&&o.side>=0;r--);if(t<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&t&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?me(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?me(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],u=s+a.size;if(i==-1&&e<=u){let c=s+a.border;if(e>=c&&t<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=s;for(let f=l;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=me(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(u>t||l==this.children.length-1)){t=u;for(let c=l+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=me(f.dom);break}t+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),s=Math.max(e,t);for(let d=0,p=0;d<this.children.length;d++){let h=this.children[d],m=p+h.size;if(o>p&&s<m)return h.setSelection(e-p-h.border,t-p-h.border,r,i);p=m}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1),u=r.getSelection(),c=!1;if((xt||Ae)&&e==t){let{node:d,offset:p}=l;if(d.nodeType==3){if(c=!!(p&&d.nodeValue[p-1]==`
`),c&&p==d.nodeValue.length)for(let h=d,m;h;h=h.parentNode){if(m=h.nextSibling){m.nodeName=="BR"&&(l=a={node:m.parentNode,offset:me(m)+1});break}let w=h.pmViewDesc;if(w&&w.node&&w.node.isBlock)break}}else{let h=d.childNodes[p-1];c=h&&(h.nodeName=="BR"||h.contentEditable=="false")}}if(xt&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let d=u.focusNode.childNodes[u.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||c&&Ae)&&rr(l.node,l.offset,u.anchorNode,u.anchorOffset)&&rr(a.node,a.offset,u.focusNode,u.focusOffset))return;let f=!1;if((u.extend||e==t)&&!c){u.collapse(l.node,l.offset);try{e!=t&&u.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>t){let p=l;l=a,a=p}let d=document.createRange();d.setEnd(a.node,a.offset),d.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let l=r+o.border,a=s-o.border;if(e>=l&&t<=a){this.dirty=e==r||t==s?Hn:Xd,e==l&&t==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=zt:o.markDirty(e-l,t-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Hn:zt}r=s}this.dirty=Hn}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Hn:Xd;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}},Eg=class extends Xo{constructor(e,t,r,i){let o,s=t.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==ct&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},Mk=class extends Xo{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}},yl=class Au extends Xo{constructor(e,t,r,i){super(e,[],r,i),this.mark=t}static create(e,t,r,i){let o=i.nodeViews[t.type.name],s=o&&o(t,i,r);return(!s||!s.dom)&&(s=fi.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Au(e,t,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&zt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=zt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=ct){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ct}}slice(e,t,r){let i=Au.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;t<s&&(o=zu(o,t,s,r)),e>0&&(o=zu(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}},Fr=class Og extends Xo{constructor(e,t,r,i,o,s,l,a,u){super(e,[],o,s),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,t,r,i,o,s){let l=o.nodeViews[t.type.name],a,u=l&&l(t,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),c=u&&u.dom,f=u&&u.contentDOM;if(t.isText){if(!c)c=document.createTextNode(t.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=fi.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!f&&!t.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Ig(c,r,t),u?a=new Ek(e,t,r,i,c,f||null,d,u,o,s+1):t.isText?new Dg(e,t,r,i,c,d,o):new Og(e,t,r,i,c,f||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>x.empty)}return e}matchesNode(e,t,r){return this.dirty==ct&&e.eq(this.node)&&Iu(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new Dk(this,s&&s.node,e);Ak(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&a.syncToMarks(c==this.node.childCount?_.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,i)},(u,c,f,d)=>{a.syncToMarks(u.marks,r,e);let p;a.findNodeMatch(u,c,f,d)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(p=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(u,c,f,p,e)||a.updateNextNode(u,c,f,e,d,i)||a.addNode(u,c,f,e,i),i+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Hn)&&(s&&this.protectLocalComposition(e,s),Ag(this.contentDOM,this.children,e),Yr&&bk(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof $)||r<t||i>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=Ik(this.node.content,s,r-t,i-t);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new Mk(this,o,t,i);e.input.compositionNodes.push(s),this.children=zu(this.children,r,r+i.length,e,s)}update(e,t,r,i){return this.dirty==zt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ct}updateOuterDeco(e){if(Iu(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=bg(this.dom,this.nodeDOM,bu(this.outerDeco,this.node,t),bu(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}};function Zd(n,e,t,r,i){Ig(r,e,n);let o=new Fr(void 0,n,e,t,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}let Dg=class Tg extends Fr{constructor(e,t,r,i,o,s,l){super(e,t,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==zt||this.dirty!=ct&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=ct||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ct,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new Tg(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=zt)}get domAtom(){return!1}isText(e){return this.node.text==e}},Rg=class extends Xo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ct&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}};class Ek extends Fr{constructor(e,t,r,i,o,s,l,a,u,c){super(e,t,r,i,o,s,l,u,c),this.spec=a}update(e,t,r,i){if(this.dirty==zt)return!1;if(this.spec.update){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Ag(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==n){for(;l!=r;)r=eh(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(l,r);if(s instanceof yl){let a=r?r.previousSibling:n.lastChild;Ag(s.contentDOM,s.children,t),r=a?a.nextSibling:n.firstChild}}for(;r;)r=eh(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const to=function(n){n&&(this.nodeName=n)};to.prototype=Object.create(null);const jn=[new to];function bu(n,e,t){if(n.length==0)return jn;let r=t?jn[0]:new to,i=[r];for(let o=0;o<n.length;o++){let s=n[o].type.attrs;if(s){s.nodeName&&i.push(r=new to(s.nodeName));for(let l in s){let a=s[l];a!=null&&(t&&i.length==1&&i.push(r=new to(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function bg(n,e,t,r){if(t==jn&&r==jn)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=t[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=n&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=jn[0]),i=a}Ok(i,l||jn[0],s)}return i}function Ok(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function Ig(n,e,t){return bg(n,n,jn,bu(e,t,n.nodeType!=1))}function Iu(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function eh(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Dk{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Tk(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=ct,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=yl.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,t,r)&&!this.preMatch.matched.has(u)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let s=this.top.children[i];return s.dirty==zt&&s.dom==s.contentDOM&&(s.dirty=Hn),s.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Fr){let u=this.preMatch.matched.get(a);if(u!=null&&u!=o)return!1;let c=a.dom,f,d=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=zt&&Iu(t,a.outerDeco));if(!d&&a.update(e,t,r,i))return this.destroyBetween(this.index,l),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(a,e,t,r,i,s)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Hn,f.updateChildren(i,s+1),f.dirty=ct),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,o,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let l=Fr.create(this.top,t,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,t,r,i,o){let s=Fr.create(this.top,e,t,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new Eg(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof yl;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Dg)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ae||Ne)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Rg(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Tk(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let u=t.children[r-1];if(u instanceof yl)t=u,r=u.children.length;else{l=u,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let a=l.node;if(a){if(a!=n.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function Rk(n,e){return n.type.side-e.type.side}function Ak(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let u=0;u<n.childCount;u++){let c=n.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,l=[],a=null;for(let u=0;;){let c,f;for(;s<i.length&&i[s].to==o;){let w=i[s++];w.widget&&(c?(f||(f=[c])).push(w):c=w)}if(c)if(f){f.sort(Rk);for(let w=0;w<f.length;w++)t(f[w],u,!!a)}else t(c,u,!!a);let d,p;if(a)p=-1,d=a,a=null;else if(u<n.childCount)p=u,d=n.child(u++);else break;for(let w=0;w<l.length;w++)l[w].to<=o&&l.splice(w--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let h=o+d.nodeSize;if(d.isText){let w=h;s<i.length&&i[s].from<w&&(w=i[s].from);for(let g=0;g<l.length;g++)l[g].to<w&&(w=l[g].to);w<h&&(a=d.cut(w-o),d=d.cut(0,w-o),h=w,p=-1)}else for(;s<i.length&&i[s].to<h;)s++;let m=d.isInline&&!d.isLeaf?l.filter(w=>!w.inline):l.slice();r(d,m,e.forChild(o,d),p),o=h}}function bk(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Ik(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let s=n.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<n.childCount;){let u=n.child(i++);if(o+=u.nodeSize,!u.isText)break;a+=u.text}if(o>=t){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=t)return l+u;if(t==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function zu(n,e,t,r,i){let o=[];for(let s=0,l=0;s<n.length;s++){let a=n[s],u=l,c=l+=a.size;u>=t||c<=e?o.push(a):(u<e&&o.push(a.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>t&&o.push(a.slice(t-u,a.size,r)))}return o}function af(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,u;if(Gl(t)){for(a=l;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&I.isSelectable(c)&&i.parent&&!(c.isInline&&ok(t.focusNode,t.focusOffset,i.dom))){let f=i.posBefore;u=new I(s==f?l:r.resolve(f))}}else{let c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null;a=r.resolve(c)}if(!u){let c=e=="pointer"||n.state.selection.head<l.pos&&!o?1:-1;u=uf(n,a,l,c)}return u}function zg(n){return n.editable?n.hasFocus():Fg(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Kt(n,e=!1){let t=n.state.selection;if(Pg(n,t),!!zg(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Ne){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&rr(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Pk(n);else{let{anchor:r,head:i}=t,o,s;th&&!(t instanceof $)&&(t.$from.parent.inlineContent||(o=nh(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=nh(n,t.to))),n.docView.setSelection(r,i,n.root,e),th&&(o&&rh(o),s&&rh(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&zk(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const th=Ae||Ne&&wg<63;function nh(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Ae&&i&&i.contentEditable=="false")return za(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return za(i);if(o)return za(o)}}function za(n){return n.contentEditable="true",Ae&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function rh(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function zk(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!zg(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Pk(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,me(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&_e&&gn<=11&&(r.disabled=!0,r.disabled=!1)}function Pg(n,e){if(e instanceof I){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(ih(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else ih(n)}function ih(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function uf(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||$.between(e,t,r)}function oh(n){return n.editable&&!n.hasFocus()?!1:Fg(n)}function Fg(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Fk(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return rr(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Pu(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&P.findFrom(o,e)}function nn(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function sh(n,e,t){let r=n.state.selection;if(r instanceof $)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return nn(n,new $(r.$anchor,s))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Pu(n.state,e);return i&&i instanceof I?nn(n,i):!1}else if(!(it&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=n.docView.descAt(l))&&!s.contentDOM?I.isSelectable(o)?nn(n,new I(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):Go?nn(n,new $(n.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof I&&r.node.isInline)return nn(n,new $(e>0?r.$to:r.$from));{let i=Pu(n.state,e);return i?nn(n,i):!1}}}function Sl(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function no(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function pr(n,e){return e<0?Lk(n):$k(n)}function Lk(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,s=!1;for(xt&&t.nodeType==1&&r<Sl(t)&&no(t.childNodes[r],-1)&&(s=!0);;)if(r>0){if(t.nodeType!=1)break;{let l=t.childNodes[r-1];if(no(l,-1))i=t,o=--r;else if(l.nodeType==3)t=l,r=t.nodeValue.length;else break}}else{if(Lg(t))break;{let l=t.previousSibling;for(;l&&no(l,-1);)i=t.parentNode,o=me(l),l=l.previousSibling;if(l)t=l,r=Sl(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}s?Fu(n,t,r):i&&Fu(n,i,o)}function $k(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Sl(t),o,s;for(;;)if(r<i){if(t.nodeType!=1)break;let l=t.childNodes[r];if(no(l,1))o=t,s=++r;else break}else{if(Lg(t))break;{let l=t.nextSibling;for(;l&&no(l,1);)o=l.parentNode,s=me(l)+1,l=l.nextSibling;if(l)t=l,r=0,i=Sl(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&Fu(n,o,s)}function Lg(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Vk(n,e){for(;n&&e==n.childNodes.length&&!Yo(n);)e=me(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function Bk(n,e){for(;n&&!e&&!Yo(n);)e=me(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Fu(n,e,t){if(e.nodeType!=3){let o,s;(s=Vk(e,t))?(e=s,t=0):(o=Bk(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Gl(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Kt(n)},50)}function lh(n,e){let t=n.state.doc.resolve(e);if(!(Ne||ak)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function ah(n,e,t){let r=n.state.selection;if(r instanceof $&&!r.empty||t.indexOf("s")>-1||it&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=Pu(n.state,e);if(s&&s instanceof I)return nn(n,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof Ze?P.near(s,e):P.findFrom(s,e);return l?nn(n,l):!1}return!1}function uh(n,e){if(!(n.state.selection instanceof $))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let s=n.state.tr;return e<0?s.delete(t.pos-o.nodeSize,t.pos):s.delete(t.pos,t.pos+o.nodeSize),n.dispatch(s),!0}return!1}function ch(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function Jk(n){if(!Ae||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;ch(n,r,"true"),setTimeout(()=>ch(n,r,"false"),20)}return!1}function _k(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Wk(n,e){let t=e.keyCode,r=_k(e);if(t==8||it&&t==72&&r=="c")return uh(n,-1)||pr(n,-1);if(t==46&&!e.shiftKey||it&&t==68&&r=="c")return uh(n,1)||pr(n,1);if(t==13||t==27)return!0;if(t==37||it&&t==66&&r=="c"){let i=t==37?lh(n,n.state.selection.from)=="ltr"?-1:1:-1;return sh(n,i,r)||pr(n,i)}else if(t==39||it&&t==70&&r=="c"){let i=t==39?lh(n,n.state.selection.from)=="ltr"?1:-1:1;return sh(n,i,r)||pr(n,i)}else{if(t==38||it&&t==80&&r=="c")return ah(n,-1,r)||pr(n,-1);if(t==40||it&&t==78&&r=="c")return Jk(n)||ah(n,1,r)||pr(n,1);if(r==(it?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function $g(n,e){n.someProp("transformCopied",p=>{e=p(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let p=r.firstChild;t.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=n.someProp("clipboardSerializer")||fi.fromSchema(n.state.schema),l=Ug(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let u=a.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=Wg[u.nodeName.toLowerCase()]);){for(let p=c.length-1;p>=0;p--){let h=l.createElement(c[p]);for(;a.firstChild;)h.appendChild(a.firstChild);a.appendChild(h),f++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(t)}`);let d=n.someProp("clipboardTextSerializer",p=>p(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:d,slice:e}}function Vg(n,e,t,r,i){let o=i.parent.type.spec.code,s,l;if(!t&&!e)return null;let a=e&&(r||o||!t);if(a){if(n.someProp("transformPastedText",d=>{e=d(e,o||r,n)}),o)return e?new k(x.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):k.empty;let f=n.someProp("clipboardTextParser",d=>d(e,i,r,n));if(f)l=f;else{let d=i.marks(),{schema:p}=n.state,h=fi.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let w=s.appendChild(document.createElement("p"));m&&w.appendChild(h.serializeNode(p.text(m,d)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),s=Kk(t),Go&&qk(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=s.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;s=d}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||yo.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Uk.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)l=Qk(fh(l,+c[1],+c[2]),c[4]);else if(l=k.maxOpen(Hk(l.content,i),!0),l.openStart||l.openEnd){let f=0,d=0;for(let p=l.content.firstChild;f<l.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=l.content.lastChild;d<l.openEnd&&!p.type.spec.isolating;d++,p=p.lastChild);l=fh(l,f,d)}return n.someProp("transformPasted",f=>{l=f(l,n)}),l}const Uk=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Hk(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,s=[];if(n.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),u;if(!a)return s=null;if(u=s.length&&o.length&&Jg(a,o,l,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=_g(s[s.length-1],o.length));let c=Bg(l,a);s.push(c),i=i.matchType(c.type),o=a}}),s)return x.from(s)}return n}function Bg(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,x.from(n));return n}function Jg(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=Jg(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(x.from(Bg(t,n,i+1))))}}function _g(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,_g(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(x.empty,!0);return n.copy(t.append(r))}function Lu(n,e,t,r,i,o){let s=e<0?n.firstChild:n.lastChild,l=s.content;return n.childCount>1&&(o=0),i<r-1&&(l=Lu(l,e,t,r,i+1,o)),i>=t&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(x.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(l))}function fh(n,e,t){return e<n.openStart&&(n=new k(Lu(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new k(Lu(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Wg={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let dh=null;function Ug(){return dh||(dh=document.implementation.createHTMLDocument("title"))}function jk(n){let e=window.trustedTypes;return e?e.createPolicy("detachedDocument",{createHTML:t=>t}).createHTML(n):n}function Kk(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Ug().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&Wg[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=jk(n),i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function qk(n){let e=n.querySelectorAll(Ne?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Qk(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:s}=n;for(let l=r.length-2;l>=0;l-=2){let a=t.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=x.from(a.create(r[l+1],i)),o++,s++}return new k(i,o,s)}const be={},Ie={},Yk={touchstart:!0,touchmove:!0};class Gk{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Xk(n){for(let e in be){let t=be[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{ev(n,r)&&!cf(n,r)&&(n.editable||!(r.type in Ie))&&t(n,r)},Yk[e]?{passive:!0}:void 0)}Ae&&n.dom.addEventListener("input",()=>null),$u(n)}function fn(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Zk(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function $u(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>cf(n,r))})}function cf(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function ev(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function tv(n,e){!cf(n,e)&&be[e.type]&&(n.editable||!(e.type in Ie))&&be[e.type](n,e)}Ie.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!jg(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(St&&Ne&&t.keyCode==13)))if(n.domObserver.selectionChanged(n.domSelectionRange())?n.domObserver.flush():t.keyCode!=229&&n.domObserver.forceFlush(),Yr&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Wn(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Wk(n,t)?t.preventDefault():fn(n,"key")};Ie.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Ie.keypress=(n,e)=>{let t=e;if(jg(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||it&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof $)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function Xl(n){return{left:n.clientX,top:n.clientY}}function nv(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function ff(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(n.someProp(e,l=>s>o.depth?l(n,t,o.nodeAfter,o.before(s),i,!0):l(n,t,o.node(s),o.before(s),i,!1)))return!0;return!1}function Lr(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function rv(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&I.isSelectable(r)?(Lr(n,new I(t)),!0):!1}function iv(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof I&&(r=t.node);let o=n.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(I.isSelectable(l)){r&&t.$from.depth>0&&s>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(s);break}}return i!=null?(Lr(n,I.create(n.state.doc,i)),!0):!1}function ov(n,e,t,r,i){return ff(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?iv(n,t):rv(n,t))}function sv(n,e,t,r){return ff(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function lv(n,e,t,r){return ff(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||av(n,t,r)}function av(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Lr(n,$.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)Lr(n,$.create(r,l+1,l+1+s.content.size));else if(I.isSelectable(s))Lr(n,I.create(r,l));else continue;return!0}}function df(n){return wl(n)}const Hg=it?"metaKey":"ctrlKey";be.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=df(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&nv(t,n.input.lastClick)&&!t[Hg]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let s=n.posAtCoords(Xl(t));s&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new uv(n,s,t,!!r)):(o=="doubleClick"?sv:lv)(n,s.pos,s.inside,t)?t.preventDefault():fn(n,"pointer"))};class uv{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Hg],this.allowDefault=r.shiftKey;let o,s;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),s=t.inside;else{let c=e.state.doc.resolve(t.pos);o=c.parent,s=c.depth?c.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof I&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&xt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),fn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Kt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Xl(e))),this.updateAllowDefault(e),this.allowDefault||!t?fn(this.view,"pointer"):ov(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ae&&this.mightDrag&&!this.mightDrag.node.isAtom||Ne&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Lr(this.view,P.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):fn(this.view,"pointer")}move(e){this.updateAllowDefault(e),fn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}be.touchstart=n=>{n.input.lastTouch=Date.now(),df(n),fn(n,"pointer")};be.touchmove=n=>{n.input.lastTouch=Date.now(),fn(n,"pointer")};be.contextmenu=n=>df(n);function jg(n,e){return n.composing?!0:Ae&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const cv=St?5e3:-1;Ie.compositionstart=Ie.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof $&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),wl(n,!0),n.markCursor=null;else if(wl(n,!e.selection.empty),xt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=n.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}n.input.composing=!0}Kg(n,cv)};Ie.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Kg(n,20))};function Kg(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>wl(n),e))}function qg(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=dv());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function fv(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=rk(e.focusNode,e.focusOffset),r=ik(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let s=t.pmViewDesc;if(!(!s||!s.isText(t.nodeValue)))return r}}return t||r}function dv(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function wl(n,e=!1){if(!(St&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),qg(n),e||n.docView&&n.docView.dirty){let t=af(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function hv(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const vo=_e&&gn<15||Yr&&uk<604;be.copy=Ie.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=vo?null:t.clipboardData,s=r.content(),{dom:l,text:a}=$g(n,s);o?(t.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):hv(n,l),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function pv(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function mv(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?xo(n,r.value,null,i,e):xo(n,r.textContent,r.innerHTML,i,e)},50)}function xo(n,e,t,r,i){let o=Vg(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",a=>a(n,i,o||k.empty)))return!0;if(!o)return!1;let s=pv(o),l=s?n.state.tr.replaceSelectionWith(s,r):n.state.tr.replaceSelection(o);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Qg(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Ie.paste=(n,e)=>{let t=e;if(n.composing&&!St)return;let r=vo?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&xo(n,Qg(r),r.getData("text/html"),i,t)?t.preventDefault():mv(n,t)};class Yg{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const Gg=it?"altKey":"ctrlKey";be.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(Xl(t)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof I?i.to-1:i.to))){if(r&&r.mightDrag)s=I.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=n.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=n.docView&&(s=I.create(n.state.doc,f.posBefore))}}let l=(s||n.state.selection).content(),{dom:a,text:u,slice:c}=$g(n,l);(!t.dataTransfer.files.length||!Ne||wg>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(vo?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",vo||t.dataTransfer.setData("text/plain",u),n.dragging=new Yg(c,!t[Gg],s)};be.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Ie.dragover=Ie.dragenter=(n,e)=>e.preventDefault();Ie.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Xl(t));if(!i)return;let o=n.state.doc.resolve(i.pos),s=r&&r.slice;s?n.someProp("transformPasted",h=>{s=h(s,n)}):s=Vg(n,Qg(t.dataTransfer),vo?null:t.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!t[Gg]);if(n.someProp("handleDrop",h=>h(n,t,s||k.empty,l))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?Zw(n.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let u=n.state.tr;if(l){let{node:h}=r;h?h.replace(u):u.deleteSelection()}let c=u.mapping.map(a),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=u.doc;if(f?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(d))return;let p=u.doc.resolve(c);if(f&&I.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new I(p));else{let h=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((m,w,g,y)=>h=y),u.setSelection(uf(n,p,u.doc.resolve(h)))}n.focus(),n.dispatch(u.setMeta("uiEvent","drop"))};be.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Kt(n)},20))};be.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};be.beforeinput=(n,e)=>{if(Ne&&St&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Wn(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Ie)be[n]=Ie[n];function Co(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class kl{constructor(e,t){this.toDOM=e,this.spec=t||Xn,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:s}=e.mapResult(t.from+i,this.side<0?-1:1);return s?null:new ge(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof kl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Co(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class yn{constructor(e,t){this.attrs=e,this.spec=t||Xn}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new ge(o,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof yn&&Co(this.attrs,e.attrs)&&Co(this.spec,e.spec)}static is(e){return e.type instanceof yn}destroy(){}}class hf{constructor(e,t){this.attrs=e,this.spec=t||Xn}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let s=e.mapResult(t.to+i,-1);return s.deleted||s.pos<=o.pos?null:new ge(o.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof hf&&Co(this.attrs,e.attrs)&&Co(this.spec,e.spec)}destroy(){}}class ge{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new ge(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new ge(e,e,new kl(t,r))}static inline(e,t,r,i){return new ge(e,t,new yn(r,i))}static node(e,t,r,i){return new ge(e,t,new hf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof yn}get widget(){return this.type instanceof kl}}const kr=[],Xn={};class J{constructor(e,t){this.local=e.length?e:kr,this.children=t.length?t:kr}static create(e,t){return t.length?vl(t,e,0,Xn):xe}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=t&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,r,i+l,o)}}map(e,t,r){return this==xe||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Xn)}mapInner(e,t,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(t,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?gv(this.children,s||[],e,t,r,i,o):s?new J(s.sort(Zn),kr):xe}add(e,t){return t.length?this==xe?J.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((l,a)=>{let u=a+r,c;if(c=ey(t,l,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,c,u+1):i.splice(o,0,a,a+l.nodeSize,vl(c,l,u+1,Xn)),o+=3}});let s=Zg(o?ty(t):t,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new J(s.length?this.local.concat(s).sort(Zn):this.local,i||this.children)}remove(e){return e.length==0||this==xe?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+t,a=r[o+1]+t;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>l&&f.to<a&&(e[c]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,l+1);u!=xe?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,t)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new J(i,r):xe}forChild(e,t){if(this==xe)return this;if(t.isLeaf)return J.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+t.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof yn){let u=Math.max(o,a.from)-o,c=Math.min(s,a.to)-o;u<c&&(i||(i=[])).push(a.copy(u,c))}}if(i){let l=new J(i.sort(Zn),kr);return r?new Xg([l,r]):l}return r||xe}eq(e){if(this==e)return!0;if(!(e instanceof J)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return pf(this.localsInner(e))}localsInner(e){if(this==xe)return kr;if(e.inlineContent||!this.local.some(yn.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof yn||t.push(this.local[r]);return t}forEachSet(e){e(this)}}J.empty=new J([],[]);J.removeOverlap=pf;const xe=J.empty;let Xg=class vr{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Xn));return vr.from(r)}forChild(e,t){if(t.isLeaf)return J.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=xe&&(o instanceof vr?r=r.concat(o.members):r.push(o))}return vr.from(r)}eq(e){if(!(e instanceof vr)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let s=0;s<o.length;s++)t.push(o[s])}}return t?pf(r?t:t.sort(Zn)):kr}static from(e){switch(e.length){case 0:return xe;case 1:return e[0];default:return new vr(e.every(t=>t instanceof J)?e:e.reduce((t,r)=>t.concat(r instanceof J?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}};function gv(n,e,t,r,i,o,s){let l=n.slice();for(let u=0,c=o;u<t.maps.length;u++){let f=0;t.maps[u].forEach((d,p,h,m)=>{let w=m-h-(p-d);for(let g=0;g<l.length;g+=3){let y=l[g+1];if(y<0||d>y+c-f)continue;let S=l[g]+c-f;p>=S?l[g+1]=d<=S?-2:-1:d>=c&&w&&(l[g]+=w,l[g+1]+=w)}f+=w}),c=t.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=t.map(n[u]+o),f=c-i;if(f<0||f>=r.content.size){a=!0;continue}let d=t.map(n[u+1]+o,-1),p=d-i,{index:h,offset:m}=r.content.findIndex(f),w=r.maybeChild(h);if(w&&m==f&&m+w.nodeSize==p){let g=l[u+2].mapInner(t,w,c+1,n[u]+o+1,s);g!=xe?(l[u]=f,l[u+1]=p,l[u+2]=g):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=yv(l,n,e,t,i,o,s),c=vl(u,r,0,s);e=c.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let p=c.children[f];for(;d<l.length&&l[d]<p;)d+=3;l.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new J(e.sort(Zn),l)}function Zg(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new ge(i.from+e,i.to+e,i.type))}return t}function yv(n,e,t,r,i,o,s){function l(a,u){for(let c=0;c<a.local.length;c++){let f=a.local[c].map(r,i,u);f?t.push(f):s.onRemove&&s.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<n.length;a+=3)n[a+1]==-1&&l(n[a+2],e[a]+o+1);return t}function ey(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,s;o<n.length;o++)(s=n[o])&&s.from>t&&s.to<r&&((i||(i=[])).push(s),n[o]=null);return i}function ty(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function vl(n,e,t,r){let i=[],o=!1;e.forEach((l,a)=>{let u=ey(n,l,a+t);if(u){o=!0;let c=vl(u,l,t+a+1,r);c!=xe&&i.push(a,a+l.nodeSize,c)}});let s=Zg(o?ty(n):n,-t).sort(Zn);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new J(s,i):xe}function Zn(n,e){return n.from-e.from||n.to-e.to}function pf(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),hh(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),hh(e,i,r.copy(o.from,r.to)));break}}}return e}function hh(n,e,t){for(;e<n.length&&Zn(t,n[e])>0;)e++;n.splice(e,0,t)}function Pa(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=xe&&e.push(r)}),n.cursorWrapper&&e.push(J.create(n.state.doc,[n.cursorWrapper.deco])),Xg.from(e)}const Sv={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},wv=_e&&gn<=11;let kv=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}};class vv{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new kv,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);_e&&gn<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),wv&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Sv)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(oh(this.view)){if(this.suppressingSelectionUpdates)return Kt(this.view);if(_e&&gn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&rr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=ko(o))t.add(o);for(let o=e.anchorNode;o;o=ko(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}selectionChanged(e){return!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&oh(this.view)&&!this.ignoreSelectionChange(e)}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=this.selectionChanged(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let c=0;c<t.length;c++){let f=this.registerMutation(t[c],a);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(l=!0))}if(xt&&a.length){let c=a.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,d]=c;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of c){let p=d.parentNode;p&&p.nodeName=="LI"&&(!f||Nv(e,f)!=p)&&d.remove()}}}let u=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Gl(r)&&(u=af(e))&&u.eq(P.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Kt(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),xv(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Kt(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let f=e.addedNodes[c];t.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(_e&&gn<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d)}let s=i&&i.parentNode==e.target?me(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?me(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let ph=new WeakMap,mh=!1;function xv(n){if(!ph.has(n)&&(ph.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=xt,mh)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),mh=!0}}function gh(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=n.domAtPos(n.state.selection.anchor);return rr(s.node,s.offset,i,o)&&([t,r,i,o]=[i,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}}function Cv(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return gh(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?gh(n,t):null}function Nv(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function Mv(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=n.docView.parseRange(e,t),a=n.domSelectionRange(),u,c=a.anchorNode;if(c&&n.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],Gl(a)||u.push({node:a.focusNode,offset:a.focusOffset})),Ne&&n.input.lastKeyCode===8)for(let w=o;w>i;w--){let g=r.childNodes[w-1],y=g.pmViewDesc;if(g.nodeName=="BR"&&!y){o=w;break}if(!y||y.size)break}let f=n.state.doc,d=n.someProp("domParser")||yo.fromSchema(n.state.schema),p=f.resolve(s),h=null,m=d.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:Ev,context:p});if(u&&u[0].pos!=null){let w=u[0].pos,g=u[1]&&u[1].pos;g==null&&(g=w),h={anchor:w+s,head:g+s}}return{doc:m,sel:h,from:s,to:l}}function Ev(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ae&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ae&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Ov=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Dv(n,e,t,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let b=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,z=af(n,b);if(z&&!n.state.selection.eq(z)){if(Ne&&St&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",$t=>$t(n,Wn(13,"Enter"))))return;let le=n.state.tr.setSelection(z);b=="pointer"?le.setMeta("pointer",!0):b=="key"&&le.scrollIntoView(),o&&le.setMeta("composition",o),n.dispatch(le)}return}let s=n.state.doc.resolve(e),l=s.sharedDepth(t);e=s.before(l+1),t=n.state.doc.resolve(t).after(l+1);let a=n.state.selection,u=Mv(n,e,t),c=n.state.doc,f=c.slice(u.from,u.to),d,p;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(d=n.state.selection.to,p="end"):(d=n.state.selection.from,p="start"),n.input.lastKeyCode=null;let h=Av(f.content,u.doc.content,u.from,d,p);if(h&&n.input.domChangeCount++,(Yr&&n.input.lastIOSEnter>Date.now()-225||St)&&i.some(b=>b.nodeType==1&&!Ov.test(b.nodeName))&&(!h||h.endA>=h.endB)&&n.someProp("handleKeyDown",b=>b(n,Wn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!h)if(r&&a instanceof $&&!a.empty&&a.$head.sameParent(a.$anchor)&&!n.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let b=yh(n,n.state.doc,u.sel);if(b&&!b.eq(n.state.selection)){let z=n.state.tr.setSelection(b);o&&z.setMeta("composition",o),n.dispatch(z)}}return}n.state.selection.from<n.state.selection.to&&h.start==h.endB&&n.state.selection instanceof $&&(h.start>n.state.selection.from&&h.start<=n.state.selection.from+2&&n.state.selection.from>=u.from?h.start=n.state.selection.from:h.endA<n.state.selection.to&&h.endA>=n.state.selection.to-2&&n.state.selection.to<=u.to&&(h.endB+=n.state.selection.to-h.endA,h.endA=n.state.selection.to)),_e&&gn<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>u.from&&u.doc.textBetween(h.start-u.from-1,h.start-u.from+1)==" "&&(h.start--,h.endA--,h.endB--);let m=u.doc.resolveNoCache(h.start-u.from),w=u.doc.resolveNoCache(h.endB-u.from),g=c.resolve(h.start),y=m.sameParent(w)&&m.parent.inlineContent&&g.end()>=h.endA,S;if((Yr&&n.input.lastIOSEnter>Date.now()-225&&(!y||i.some(b=>b.nodeName=="DIV"||b.nodeName=="P"))||!y&&m.pos<u.doc.content.size&&!m.sameParent(w)&&(S=P.findFrom(u.doc.resolve(m.pos+1),1,!0))&&S.head==w.pos)&&n.someProp("handleKeyDown",b=>b(n,Wn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>h.start&&Rv(c,h.start,h.endA,m,w)&&n.someProp("handleKeyDown",b=>b(n,Wn(8,"Backspace")))){St&&Ne&&n.domObserver.suppressSelectionUpdates();return}Ne&&St&&h.endB==h.start&&(n.input.lastAndroidDelete=Date.now()),St&&!y&&m.start()!=w.start()&&w.parentOffset==0&&m.depth==w.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==h.endA&&(h.endB-=2,w=u.doc.resolveNoCache(h.endB-u.from),setTimeout(()=>{n.someProp("handleKeyDown",function(b){return b(n,Wn(13,"Enter"))})},20));let C=h.start,N=h.endA,E,O,T;if(y){if(m.pos==w.pos)_e&&gn<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Kt(n),20)),E=n.state.tr.delete(C,N),O=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(T=Tv(m.parent.content.cut(m.parentOffset,w.parentOffset),g.parent.content.cut(g.parentOffset,h.endA-g.start()))))E=n.state.tr,T.type=="add"?E.addMark(C,N,T.mark):E.removeMark(C,N,T.mark);else if(m.parent.child(m.index()).isText&&m.index()==w.index()-(w.textOffset?0:1)){let b=m.parent.textBetween(m.parentOffset,w.parentOffset);if(n.someProp("handleTextInput",z=>z(n,C,N,b)))return;E=n.state.tr.insertText(b,C,N)}}if(E||(E=n.state.tr.replace(C,N,u.doc.slice(h.start-u.from,h.endB-u.from))),u.sel){let b=yh(n,E.doc,u.sel);b&&!(Ne&&St&&n.composing&&b.empty&&(h.start!=h.endB||n.input.lastAndroidDelete<Date.now()-100)&&(b.head==C||b.head==E.mapping.map(N)-1)||_e&&b.empty&&b.head==C)&&E.setSelection(b)}O&&E.ensureMarks(O),o&&E.setMeta("composition",o),n.dispatch(E.scrollIntoView())}function yh(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:uf(n,e.resolve(t.anchor),e.resolve(t.head))}function Tv(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,s,l,a;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<t.length;c++)o=t[c].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=c=>c.mark(l.addToSet(c.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(x.from(u).eq(n))return{mark:l,type:s}}function Rv(n,e,t,r,i){if(t-e<=i.pos-r.pos||Fa(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&t==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=n.resolve(Fa(o,!0,!0));return!s.parent.isTextblock||s.pos>t||Fa(s,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Fa(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Av(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:s,b:l}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&n.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&Sh(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<n.size&&Sh(n.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function Sh(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class bv{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Gk,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Ch),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=vh(this),kh(this),this.nodeViews=xh(this),this.docView=Zd(this.state.doc,wh(this),Pa(this),this.dom,this),this.domObserver=new vv(this,(r,i,o,s)=>Dv(this,r,i,o,s)),this.domObserver.start(),Xk(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&$u(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ch),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(qg(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let p=xh(this);zv(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&$u(this),this.editable=vh(this),kh(this);let a=Pa(this),u=wh(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,u,a);(f||!e.selection.eq(i.selection))&&(s=!0);let d=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&dk(this);if(s){this.domObserver.stop();let p=f&&(_e||Ne)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Iv(i.selection,e.selection);if(f){let h=Ne?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=fv(this)),(o||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=Zd(e.doc,u,a,this.dom,this)),h&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Fk(this))?Kt(this,p):(Pg(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&hk(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof I){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Kd(this,t.getBoundingClientRect(),e)}else Kd(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new Yg(e.slice,e.move,i<0?void 0:I.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=t?t(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=t?t(l):l))return i}}hasFocus(){if(_e){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&pk(this.dom),Kt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return wk(this,e)}coordsAtPos(e,t=1){return Ng(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return Nk(this,t||this.state,e)}pasteHTML(e,t){return xo(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return xo(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(Zk(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Pa(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,tk())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return tv(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Ae&&this.root.nodeType===11&&sk(this.dom.ownerDocument)==this.dom&&Cv(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function wh(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[ge.node(0,n.state.doc.content.size,e)]}function kh(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:ge.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function vh(n){return!n.someProp("editable",e=>e(n.state)===!1)}function Iv(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function xh(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function zv(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function Ch(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}class Z extends P{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Z.valid(r)?new Z(r):P.near(r)}content(){return k.empty}eq(e){return e instanceof Z&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Z(e.resolve(t.pos))}getBookmark(){return new mf(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Pv(e)||!Fv(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Z.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(t>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=t;let a=e.doc.resolve(i);if(Z.valid(a))return a}for(;;){let s=t>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!I.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue e}break}o=s,i+=t;let l=e.doc.resolve(i);if(Z.valid(l))return l}return null}}}Z.prototype.visible=!1;Z.findFrom=Z.findGapCursorFrom;P.jsonID("gapcursor",Z);class mf{constructor(e){this.pos=e}map(e){return new mf(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Z.valid(t)?new Z(t):P.near(t)}}function Pv(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Fv(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Lv(){return new Lt({props:{decorations:Jv,createSelectionBetween(n,e,t){return e.pos==t.pos&&Z.valid(t)?new Z(t):null},handleClick:Vv,handleKeyDown:$v,handleDOMEvents:{beforeinput:Bv}}})}const $v=qw({ArrowLeft:ds("horiz",-1),ArrowRight:ds("horiz",1),ArrowUp:ds("vert",-1),ArrowDown:ds("vert",1)});function ds(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof $){if(!o.endOfTextblock(t)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=Z.findGapCursorFrom(l,e,a);return u?(i&&i(r.tr.setSelection(new Z(u))),!0):!1}}function Vv(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Z.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&I.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Z(r))),!0)}function Bv(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Z))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=x.empty;for(let s=r.length-1;s>=0;s--)i=x.from(r[s].createAndFill(null,i));let o=n.state.tr.replace(t.pos,t.pos,new k(i,0,0));return o.setSelection($.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function Jv(n){if(!(n.selection instanceof Z))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",J.create(n.doc,[ge.widget(n.selection.head,e,{key:"gapcursor"})])}const ny=65535,ry=Math.pow(2,16);function _v(n,e){return n+e*ry}function Nh(n){return n&ny}function Wv(n){return(n-(n&ny))/ry}const iy=1,oy=2,qs=4,sy=8;let Mh=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&sy)>0}get deletedBefore(){return(this.delInfo&(iy|qs))>0}get deletedAfter(){return(this.delInfo&(oy|qs))>0}get deletedAcross(){return(this.delInfo&qs)>0}},Gr=class xr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&xr.empty)return xr.empty}recover(e){let t=0,r=Nh(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Wv(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:t:t,p=a+i+(d<0?0:c);if(r)return p;let h=e==(t<0?a:f)?null:_v(l/3,e-a),m=e==a?oy:e==f?iy:qs;return(t<0?e!=a:e!=f)&&(m|=sy),new Mh(p,m,h)}i+=c-u}return r?e+i:new Mh(e+i,0,null)}touches(e,t){let r=0,i=Nh(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new xr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?xr.empty:new xr(e<0?[0,-e,0]:[0,0,e])}};Gr.empty=new Gr([]);const La=Object.create(null);let Qe=class{getMap(){return Gr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=La[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in La)throw new RangeError("Duplicate use of step JSON ID "+e);return La[e]=t,t.prototype.jsonID=e,t}},Be=class Wi{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Wi(e,null)}static fail(e){return new Wi(null,e)}static fromReplace(e,t,r,i){try{return Wi.ok(e.replace(t,r,i))}catch(o){if(o instanceof En)return Wi.fail(o.message);throw o}}};function gf(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(gf(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return x.fromArray(r)}let ly=class Ui extends Qe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new k(gf(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return Be.fromReplace(e,this.from,this.to,o)}invert(){return new ay(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ui(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ui&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ui(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ui(t.from,t.to,e.markFromJSON(t.mark))}};Qe.jsonID("addMark",ly);let ay=class Hi extends Qe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new k(gf(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Be.fromReplace(e,this.from,this.to,r)}invert(){return new ly(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Hi(t.pos,r.pos,this.mark)}merge(e){return e instanceof Hi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Hi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Hi(t.from,t.to,e.markFromJSON(t.mark))}};Qe.jsonID("removeMark",ay);let uy=class ji extends Qe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Be.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Be.fromReplace(e,this.pos,this.pos+1,new k(x.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new ji(this.pos,t.marks[i]);return new ji(this.pos,this.mark)}}return new cy(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ji(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ji(t.pos,e.markFromJSON(t.mark))}};Qe.jsonID("addNodeMark",uy);let cy=class Vu extends Qe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Be.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Be.fromReplace(e,this.pos,this.pos+1,new k(x.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new uy(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Vu(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Vu(t.pos,e.markFromJSON(t.mark))}};Qe.jsonID("removeNodeMark",cy);let Uv=class Bn extends Qe{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Bu(e,this.from,this.to)?Be.fail("Structure replace would overwrite content"):Be.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Gr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Bn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Bn(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Bn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Bn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Bn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Bn(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}};Qe.jsonID("replace",Uv);let Hv=class Qs extends Qe{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Bu(e,this.from,this.gapFrom)||Bu(e,this.gapTo,this.to)))return Be.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Be.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Be.fromReplace(e,this.from,this.to,r):Be.fail("Content does not fit in gap")}getMap(){return new Gr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Qs(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new Qs(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Qs(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}};Qe.jsonID("replaceAround",Hv);function Bu(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function jv(n,e,t=null,r=n){let i=Kv(n,e),o=i&&qv(r,e);return o?i.map(Eh).concat({type:e,attrs:t}).concat(o.map(Eh)):null}function Eh(n){return{type:n,attrs:null}}function Kv(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return t.canReplaceWith(r,i,s)?o:null}function qv(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(t.child(u).type);return!a||!a.validEnd?null:s}function Qv(n,e){let t=n.resolve(e),r=t.index();return Yv(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Yv(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}let Gv=class Ys extends Qe{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Be.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Be.fromReplace(e,this.pos,this.pos+1,new k(x.from(i),0,t.isLeaf?0:1))}getMap(){return Gr.empty}invert(e){return new Ys(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ys(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ys(t.pos,t.attr,t.value)}};Qe.jsonID("attr",Gv);let No=class extends Error{};No=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};No.prototype=Object.create(Error.prototype);No.prototype.constructor=No;No.prototype.name="TransformError";class cr{constructor(e,t,r={}){this.match=e,this.match=e,this.handler=typeof t=="string"?Xv(t):t,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1}}function Xv(n){return function(e,t,r,i){let o=n;if(t[1]){let s=t[0].lastIndexOf(t[1]);o+=t[0].slice(s+t[1].length),r+=s;let l=r-i;l>0&&(o=t[0].slice(s-l,s)+o,r=i)}return e.tr.insertText(o,r,i)}}const Zv=500;function ex({rules:n}){let e=new Lt({state:{init(){return null},apply(t,r){let i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,i,o){return Oh(t,r,i,o,n,e)},handleDOMEvents:{compositionend:t=>{setTimeout(()=>{let{$cursor:r}=t.state.selection;r&&Oh(t,r.pos,r.pos,"",n,e)})}}},isInputRules:!0});return e}function Oh(n,e,t,r,i,o){if(n.composing)return!1;let s=n.state,l=s.doc.resolve(e),a=l.parent.textBetween(Math.max(0,l.parentOffset-Zv),l.parentOffset,null,"")+r;for(let u=0;u<i.length;u++){let c=i[u];if(l.parent.type.spec.code){if(!c.inCode)continue}else if(c.inCode==="only")continue;let f=c.match.exec(a),d=f&&c.handler(s,f,e-(f[0].length-r.length),t);if(d)return c.undoable&&d.setMeta(o,{transform:d,from:e,to:t,text:r}),n.dispatch(d),!0}return!1}new cr(/--$/,"");new cr(/\.\.\.$/,"");new cr(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"");new cr(/"$/,"");new cr(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"");new cr(/'$/,"");function tx(n,e,t=null,r){return new cr(n,(i,o,s,l)=>{let a=t instanceof Function?t(o):t,u=i.tr.delete(s,l),c=u.doc.resolve(s),f=c.blockRange(),d=f&&jv(f,e,a);if(!d)return null;u.wrap(f,d);let p=u.doc.resolve(s-1).nodeBefore;return p&&p.type==e&&Qv(u.doc,s-1)&&!r&&u.join(s-1),u})}const nx=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function rx(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))nx?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function ix(n){let e=Object.create(null);for(let t in n)e[rx(t)]=n[t];return e}function $a(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function ox(n){return new Lt({props:{handleKeyDown:sx(n)}})}function sx(n){let e=ix(n);return function(t,r){let i=of(r),o,s=e[$a(i,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[$a(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=bt[r.keyCode])&&o!=i){let l=e[$a(o,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const lx=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function ax(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))lx?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function ux(n){let e=Object.create(null);for(let t in n)e[ax(t)]=n[t];return e}function Va(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function cx(n){let e=ux(n);return function(t,r){let i=of(r),o,s=e[Va(i,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Va(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=bt[r.keyCode])&&o!=i){let l=e[Va(o,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const fy=65535,dy=Math.pow(2,16);function fx(n,e){return n+e*dy}function Dh(n){return n&fy}function dx(n){return(n-(n&fy))/dy}const hy=1,py=2,Gs=4,my=8;class Ju{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&my)>0}get deletedBefore(){return(this.delInfo&(hy|Gs))>0}get deletedAfter(){return(this.delInfo&(py|Gs))>0}get deletedAcross(){return(this.delInfo&Gs)>0}}class Ge{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Ge.empty)return Ge.empty}recover(e){let t=0,r=Dh(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+dx(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:t:t,p=a+i+(d<0?0:c);if(r)return p;let h=e==(t<0?a:f)?null:fx(l/3,e-a),m=e==a?py:e==f?hy:Gs;return(t<0?e!=a:e!=f)&&(m|=my),new Ju(p,m,h)}i+=c-u}return r?e+i:new Ju(e+i,0,null)}touches(e,t){let r=0,i=Dh(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new Ge(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ge.empty:new Ge(e<0?[0,-e,0]:[0,0,e])}}Ge.empty=new Ge([]);class ro{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new ro(this.maps,this.mirror,e,t)}copy(){return new ro(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new ro;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],l=s.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Ju(e,i,null)}}const Ba=Object.create(null);class Oe{getMap(){return Ge.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ba[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ba)throw new RangeError("Duplicate use of step JSON ID "+e);return Ba[e]=t,t.prototype.jsonID=e,t}}class ie{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new ie(e,null)}static fail(e){return new ie(null,e)}static fromReplace(e,t,r,i){try{return ie.ok(e.replace(t,r,i))}catch(o){if(o instanceof En)return ie.fail(o.message);throw o}}}function yf(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(yf(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return x.fromArray(r)}class dn extends Oe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new k(yf(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return ie.fromReplace(e,this.from,this.to,o)}invert(){return new Ot(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new dn(t.pos,r.pos,this.mark)}merge(e){return e instanceof dn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new dn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new dn(t.from,t.to,e.markFromJSON(t.mark))}}Oe.jsonID("addMark",dn);class Ot extends Oe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new k(yf(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return ie.fromReplace(e,this.from,this.to,r)}invert(){return new dn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ot(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ot&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ot(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ot(t.from,t.to,e.markFromJSON(t.mark))}}Oe.jsonID("removeMark",Ot);class hn extends Oe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ie.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ie.fromReplace(e,this.pos,this.pos+1,new k(x.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new hn(this.pos,t.marks[i]);return new hn(this.pos,this.mark)}}return new Xr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hn(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new hn(t.pos,e.markFromJSON(t.mark))}}Oe.jsonID("addNodeMark",hn);class Xr extends Oe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ie.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ie.fromReplace(e,this.pos,this.pos+1,new k(x.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new hn(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Xr(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Xr(t.pos,e.markFromJSON(t.mark))}}Oe.jsonID("removeNodeMark",Xr);class Te extends Oe{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&_u(e,this.from,this.to)?ie.fail("Structure replace would overwrite content"):ie.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ge([this.from,this.to-this.from,this.slice.size])}invert(e){return new Te(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Te(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Te)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Te(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Te(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Te(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}}Oe.jsonID("replace",Te);class Tt extends Oe{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(_u(e,this.from,this.gapFrom)||_u(e,this.gapTo,this.to)))return ie.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ie.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?ie.fromReplace(e,this.from,this.to,r):ie.fail("Content does not fit in gap")}getMap(){return new Ge([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Tt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new Tt(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Tt(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}}Oe.jsonID("replaceAround",Tt);function _u(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function hx(n,e,t,r){let i=[],o=[],s,l;n.doc.nodesBetween(e,t,(a,u,c)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),p=Math.min(u+a.nodeSize,t),h=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(h)||(s&&s.to==d&&s.mark.eq(f[m])?s.to=p:i.push(s=new Ot(d,p,f[m])));l&&l.to==d?l.to=p:o.push(l=new dn(d,p,r))}}),i.forEach(a=>n.step(a)),o.forEach(a=>n.step(a))}function px(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof Ko){let u=s.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,t);for(let c=0;c<a.length;c++){let f=a[c],d;for(let p=0;p<i.length;p++){let h=i[p];h.step==o-1&&f.eq(i[p].style)&&(d=h)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(l,e),to:u,step:o})}}}),i.forEach(s=>n.step(new Ot(s.from,s.to,s.style)))}function mx(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),o=[],s=e+1;for(let l=0;l<i.childCount;l++){let a=i.child(l),u=s+a.nodeSize,c=r.matchType(a.type);if(!c)o.push(new Te(s,u,k.empty));else{r=c;for(let f=0;f<a.marks.length;f++)t.allowsMarkType(a.marks[f].type)||n.step(new Ot(s,u,a.marks[f]));if(a.isText&&!t.spec.code){let f,d=/\r?\n|\r/g,p;for(;f=d.exec(a.text);)p||(p=new k(x.from(t.schema.text(" ",t.allowedMarks(a.marks))),0,0)),o.push(new Te(s+f.index,s+f.index+f[0].length,p))}}s=u}if(!r.validEnd){let l=r.fillBefore(x.empty,!0);n.replace(s,s,new k(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function gx(n,e,t){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,u=l,c=x.empty,f=0;for(let h=o,m=!1;h>t;h--)m||r.index(h)>0?(m=!0,c=x.from(r.node(h).copy(c)),f++):a--;let d=x.empty,p=0;for(let h=o,m=!1;h>t;h--)m||i.after(h+1)<i.end(h)?(m=!0,d=x.from(i.node(h).copy(d)),p++):u++;n.step(new Tt(a,u,s,l,new k(c.append(d),f,p),c.size-f,!0))}function yx(n,e,t){let r=x.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let l=t[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=x.from(t[s].type.create(t[s].attrs,r))}let i=e.start,o=e.end;n.step(new Tt(i,o,i,o,new k(r,0,0),t.length,!0))}function Sx(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(s,l)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&wx(n.doc,n.mapping.slice(o).map(l),r)){n.clearIncompatible(n.mapping.slice(o).map(l,1),r);let a=n.mapping.slice(o),u=a.map(l,1),c=a.map(l+s.nodeSize,1);return n.step(new Tt(u,c,u+1,c-1,new k(x.from(r.create(i,null,s.marks)),0,0),1,!0)),!1}})}function wx(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function kx(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let s=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Tt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new k(x.from(s),0,0),1,!0))}function vx(n,e,t=1,r){let i=n.doc.resolve(e),o=x.empty,s=x.empty;for(let l=i.depth,a=i.depth-t,u=t-1;l>a;l--,u--){o=x.from(i.node(l).copy(o));let c=r&&r[u];s=x.from(c?c.type.create(c.attrs,s):i.node(l).copy(s))}n.step(new Te(e,e,new k(o.append(s),t,t),!0))}function xx(n,e,t){let r=new Te(e-t,e+t,k.empty,!0);n.step(r)}function Cx(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Nx(n,e,t=e,r=k.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return gy(i,o,r)?new Te(e,t,r):new Mx(i,o,r).fit()}function gy(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Mx{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=x.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=x.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new k(o,s,l);return e>-1?new Tt(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new Te(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Ja(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,f=null;if(t==1&&(s?u.matchType(s.type)||(f=u.fillBefore(x.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:f};if(t==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ja(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new k(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ja(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new k(Ki(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new k(Ki(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let m=l.child(u),w=f.matchType(m.type);if(!w)break;u++,(u>1||a==0||m.content.size)&&(f=w,c.push(yy(m.mark(d.allowedMarks(m.marks)),u==1?a:0,u==l.childCount?p:-1)))}let h=u==l.childCount;h||(p=-1),this.placed=qi(this.placed,t,x.from(c)),this.frontier[t].match=f,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,w=l;m<p;m++){let g=w.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),w=g.content}this.unplaced=h?e==0?k.empty:new k(Ki(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new k(Ki(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!_a(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=_a(e,t,i,r,o);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=_a(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=qi(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=qi(this.placed,this.depth,x.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(x.empty,!0);t.childCount&&(this.placed=qi(this.placed,this.frontier.length,t))}}function Ki(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Ki(n.firstChild.content,e-1,t)))}function qi(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(qi(n.lastChild.content,e-1,t)))}function Ja(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function yy(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,yy(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(x.empty,!0)))),n.copy(r)}function _a(n,e,t,r,i){let o=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!Ex(t,o.content,s)?l:null}function Ex(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function Ox(n){return n.spec.defining||n.spec.definingForContent}function Dx(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(gy(i,o,r))return n.step(new Te(e,t,r));let s=wy(i,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let d=i.depth,p=i.pos-1;d>0;d--,p--){let h=i.node(d).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(d)>-1?l=d:i.before(d)==p&&s.splice(1,0,-d)}let a=s.indexOf(l),u=[],c=r.openStart;for(let d=r.content,p=0;;p++){let h=d.firstChild;if(u.push(h),p==r.openStart)break;d=h.content}for(let d=c-1;d>=0;d--){let p=u[d],h=Ox(p.type);if(h&&!p.sameMarkup(i.node(Math.abs(l)-1)))c=d;else if(h||!p.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let p=(d+c+1)%(r.openStart+1),h=u[p];if(h)for(let m=0;m<s.length;m++){let w=s[(m+a)%s.length],g=!0;w<0&&(g=!1,w=-w);let y=i.node(w-1),S=i.index(w-1);if(y.canReplaceWith(S,S,h.type,h.marks))return n.replace(i.before(w),g?o.after(w):t,new k(Sy(r.content,0,r.openStart,p),p,r.openEnd))}}let f=n.steps.length;for(let d=s.length-1;d>=0&&(n.replace(e,t,r),!(n.steps.length>f));d--){let p=s[d];p<0||(e=i.before(p),t=o.after(p))}}function Sy(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(Sy(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(n).append(n);n=s.append(o.matchFragment(s).fillBefore(x.empty,!0))}return n}function Tx(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=Cx(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new k(x.from(r),0,0))}function Rx(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=wy(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return n.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&i.end(s)-t!=i.depth-s)return n.delete(r.before(s),t);n.delete(e,t)}function wy(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class $r extends Oe{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return ie.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return ie.fromReplace(e,this.pos,this.pos+1,new k(x.from(i),0,t.isLeaf?0:1))}getMap(){return Ge.empty}invert(e){return new $r(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new $r(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $r(t.pos,t.attr,t.value)}}Oe.jsonID("attr",$r);class Mo extends Oe{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return ie.ok(r)}getMap(){return Ge.empty}invert(e){return new Mo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Mo(t.attr,t.value)}}Oe.jsonID("docAttr",Mo);let Zr=class extends Error{};Zr=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Zr.prototype=Object.create(Error.prototype);Zr.prototype.constructor=Zr;Zr.prototype.name="TransformError";class Ax{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ro}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Zr(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=k.empty){let i=Nx(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new k(x.from(r),0,0))}delete(e,t){return this.replace(e,t,k.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Dx(this,e,t,r),this}replaceRangeWith(e,t,r){return Tx(this,e,t,r),this}deleteRange(e,t){return Rx(this,e,t),this}lift(e,t){return gx(this,e,t),this}join(e,t=1){return xx(this,e,t),this}wrap(e,t){return yx(this,e,t),this}setBlockType(e,t=e,r,i=null){return Sx(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return kx(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new $r(e,t,r)),this}setDocAttribute(e,t){return this.step(new Mo(e,t)),this}addNodeMark(e,t){return this.step(new hn(e,t)),this}removeNodeMark(e,t){if(!(t instanceof _)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Xr(e,t)),this}split(e,t=1,r){return vx(this,e,t,r),this}addMark(e,t,r){return hx(this,e,t,r),this}removeMark(e,t,r){return px(this,e,t,r),this}clearIncompatible(e,t,r){return mx(this,e,t,r),this}}var Wu,Uu;if(typeof WeakMap<"u"){let n=new WeakMap;Wu=e=>n.get(e),Uu=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;Wu=r=>{for(let i=0;i<n.length;i+=2)if(n[i]==r)return n[i+1]},Uu=(r,i)=>(t==10&&(t=0),n[t++]=r,n[t++]=i)}var ne=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,s=i+1;for(let l=1;o<this.width&&this.map[e+l]==t;l++)o++;for(let l=1;s<this.height&&this.map[e+this.width*l]==t;l++)s++;return{left:r,top:i,right:o,bottom:s}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:i,top:o,bottom:s}=this.findCell(n);return e=="horiz"?(t<0?r==0:i==this.width)?null:this.map[o*this.width+(t<0?r-1:i)]:(t<0?o==0:s==this.height)?null:this.map[r+this.width*(t<0?o-1:s)]}rectBetween(n,e){const{left:t,right:r,top:i,bottom:o}=this.findCell(n),{left:s,right:l,top:a,bottom:u}=this.findCell(e);return{left:Math.min(t,s),top:Math.min(i,a),right:Math.max(r,l),bottom:Math.max(o,u)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let i=n.left;i<n.right;i++){const o=r*this.width+i,s=this.map[o];t[s]||(t[s]=!0,!(i==n.left&&i&&this.map[o-1]==s||r==n.top&&r&&this.map[o-this.width]==s)&&e.push(s))}return e}positionAt(n,e,t){for(let r=0,i=0;;r++){const o=i+t.child(r).nodeSize;if(r==n){let s=e+n*this.width;const l=(n+1)*this.width;for(;s<l&&this.map[s]<i;)s++;return s==l?o-1:this.map[s]}i=o}}static get(n){return Wu(n)||Uu(n,bx(n))}};function bx(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=Ix(n),t=n.childCount,r=[];let i=0,o=null;const s=[];for(let u=0,c=e*t;u<c;u++)r[u]=0;for(let u=0,c=0;u<t;u++){const f=n.child(u);c++;for(let h=0;;h++){for(;i<r.length&&r[i]!=0;)i++;if(h==f.childCount)break;const m=f.child(h),{colspan:w,rowspan:g,colwidth:y}=m.attrs;for(let S=0;S<g;S++){if(S+u>=t){(o||(o=[])).push({type:"overlong_rowspan",pos:c,n:g-S});break}const C=i+S*e;for(let N=0;N<w;N++){r[C+N]==0?r[C+N]=c:(o||(o=[])).push({type:"collision",row:u,pos:c,n:w-N});const E=y&&y[N];if(E){const O=(C+N)%e*2,T=s[O];T==null||T!=E&&s[O+1]==1?(s[O]=E,s[O+1]=1):T==E&&s[O+1]++}}}i+=w,c+=m.nodeSize}const d=(u+1)*e;let p=0;for(;i<d;)r[i++]==0&&p++;p&&(o||(o=[])).push({type:"missing",row:u,n:p}),c++}const l=new ne(e,t,r,o);let a=!1;for(let u=0;!a&&u<s.length;u+=2)s[u]!=null&&s[u+1]<t&&(a=!0);return a&&zx(l,s,n),l}function Ix(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const i=n.child(r);let o=0;if(t)for(let s=0;s<r;s++){const l=n.child(s);for(let a=0;a<l.childCount;a++){const u=l.child(a);s+u.attrs.rowspan>r&&(o+=u.attrs.colspan)}}for(let s=0;s<i.childCount;s++){const l=i.child(s);o+=l.attrs.colspan,l.attrs.rowspan>1&&(t=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function zx(n,e,t){n.problems||(n.problems=[]);const r={};for(let i=0;i<n.map.length;i++){const o=n.map[i];if(r[o])continue;r[o]=!0;const s=t.nodeAt(o);if(!s)throw new RangeError(`No cell with offset ${o} found`);let l=null;const a=s.attrs;for(let u=0;u<a.colspan;u++){const c=(i+u)%n.width,f=e[c*2];f!=null&&(!a.colwidth||a.colwidth[u]!=f)&&((l||(l=Px(a)))[u]=f)}l&&n.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:l})}}function Px(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Th(n,e){if(typeof n=="string")return{};const t=n.getAttribute("data-colwidth"),r=t&&/^\d+(,\d+)*$/.test(t)?t.split(",").map(s=>Number(s)):null,i=Number(n.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(n.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(const s in e){const l=e[s].getFromDOM,a=l&&l(n);a!=null&&(o[s]=a)}return o}function Rh(n,e){const t={};n.attrs.colspan!=1&&(t.colspan=n.attrs.colspan),n.attrs.rowspan!=1&&(t.rowspan=n.attrs.rowspan),n.attrs.colwidth&&(t["data-colwidth"]=n.attrs.colwidth.join(","));for(const r in e){const i=e[r].setDOMAttr;i&&i(n.attrs[r],t)}return t}function Fx(n){const e=n.cellAttributes||{},t={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in e)t[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:n.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:n.cellContent,attrs:t,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>Th(r,e)}],toDOM(r){return["td",Rh(r,e),0]}},table_header:{content:n.cellContent,attrs:t,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>Th(r,e)}],toDOM(r){return["th",Rh(r,e),0]}}}}function Pt(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var ln=new Qo("selectingCells");function Zo(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function Sf(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function ky(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=Zo(e.$head)||Lx(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function Lx(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function Hu(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function wf(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function vy(n,e,t){const r=n.node(-1),i=ne.get(r),o=n.start(-1),s=i.nextCell(n.pos-o,e,t);return s==null?null:n.node(0).resolve(o+s)}function ei(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}var ce=class Bt extends P{constructor(e,t=e){const r=e.node(-1),i=ne.get(r),o=e.start(-1),s=i.rectBetween(e.pos-o,t.pos-o),l=e.node(0),a=i.cellsInRect(s).filter(c=>c!=t.pos-o);a.unshift(t.pos-o);const u=a.map(c=>{const f=r.nodeAt(c);if(!f)throw RangeError(`No cell with offset ${c} found`);const d=o+c+1;return new eg(l.resolve(d),l.resolve(d+f.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if(Hu(r)&&Hu(i)&&wf(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Bt.rowSelection(r,i):o&&this.isColSelection()?Bt.colSelection(r,i):new Bt(r,i)}return $.between(r,i)}content(){const e=this.$anchorCell.node(-1),t=ne.get(e),r=this.$anchorCell.start(-1),i=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},s=[];for(let a=i.top;a<i.bottom;a++){const u=[];for(let c=a*t.width+i.left,f=i.left;f<i.right;f++,c++){const d=t.map[c];if(o[d])continue;o[d]=!0;const p=t.findCell(d);let h=e.nodeAt(d);if(!h)throw RangeError(`No cell with offset ${d} found`);const m=i.left-p.left,w=p.right-i.right;if(m>0||w>0){let g=h.attrs;if(m>0&&(g=ei(g,0,m)),w>0&&(g=ei(g,g.colspan-w,w)),p.left<i.left){if(h=h.type.createAndFill(g),!h)throw RangeError(`Could not create cell with attrs ${JSON.stringify(g)}`)}else h=h.type.create(g,h.content)}if(p.top<i.top||p.bottom>i.bottom){const g={...h.attrs,rowspan:Math.min(p.bottom,i.bottom)-Math.max(p.top,i.top)};p.top<i.top?h=h.type.createAndFill(g):h=h.type.create(g,h.content)}u.push(h)}s.push(e.child(a).copy(x.from(u)))}const l=this.isColSelection()&&this.isRowSelection()?e:s;return new k(x.from(l),1,1)}replace(e,t=k.empty){const r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){const{$from:l,$to:a}=i[s],u=e.mapping.slice(r);e.replace(u.map(l.pos),u.map(a.pos),s?k.empty:t)}const o=P.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new k(x.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=ne.get(t),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let s=0;s<o.length;s++)e(t.nodeAt(o[s]),i+o[s])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),i=ne.get(r),o=e.start(-1),s=i.findCell(e.pos-o),l=i.findCell(t.pos-o),a=e.node(0);return s.top<=l.top?(s.top>0&&(e=a.resolve(o+i.map[s.left])),l.bottom<i.height&&(t=a.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))):(l.top>0&&(t=a.resolve(o+i.map[l.left])),s.bottom<i.height&&(e=a.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))),new Bt(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=ne.get(e),r=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-r),o=t.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const s=i+this.$anchorCell.nodeAfter.attrs.colspan,l=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,l)==t.width}eq(e){return e instanceof Bt&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),i=ne.get(r),o=e.start(-1),s=i.findCell(e.pos-o),l=i.findCell(t.pos-o),a=e.node(0);return s.left<=l.left?(s.left>0&&(e=a.resolve(o+i.map[s.top*i.width])),l.right<i.width&&(t=a.resolve(o+i.map[i.width*(l.top+1)-1]))):(l.left>0&&(t=a.resolve(o+i.map[l.top*i.width])),s.right<i.width&&(e=a.resolve(o+i.map[i.width*(s.top+1)-1]))),new Bt(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Bt(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new Bt(e.resolve(t),e.resolve(r))}getBookmark(){return new $x(this.$anchorCell.pos,this.$headCell.pos)}};ce.prototype.visible=!1;P.jsonID("cell",ce);var $x=class xy{constructor(e,t){this.anchor=e,this.head=t}map(e){return new xy(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&wf(t,r)?new ce(t,r):P.near(r,1)}};function Vx(n){if(!(n.selection instanceof ce))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(ge.node(r,r+t.nodeSize,{class:"selectedCell"}))}),J.create(n.doc,e)}function Bx({$from:n,$to:e}){if(n.pos==e.pos||n.pos<n.pos-6)return!1;let t=n.pos,r=e.pos,i=n.depth;for(;i>=0&&!(n.after(i+1)<n.end(i));i--,t++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return t==r&&/row|table/.test(n.node(i).type.spec.tableRole)}function Jx({$from:n,$to:e}){let t,r;for(let i=n.depth;i>0;i--){const o=n.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){t=o;break}}for(let i=e.depth;i>0;i--){const o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return t!==r&&e.parentOffset===0}function _x(n,e,t){const r=(e||n).selection,i=(e||n).doc;let o,s;if(r instanceof I&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")o=ce.create(i,r.from);else if(s=="row"){const l=i.resolve(r.from+1);o=ce.rowSelection(l,l)}else if(!t){const l=ne.get(r.node),a=r.from+1,u=a+l.map[l.width*l.height-1];o=ce.create(i,a+1,u)}}else r instanceof $&&Bx(r)?o=$.create(i,r.from):r instanceof $&&Jx(r)&&(o=$.create(i,r.$from.start(),r.$from.end()));return o&&(e||(e=n.tr)).setSelection(o),e}var Wx=new Qo("fix-tables");function Cy(n,e,t,r){const i=n.childCount,o=e.childCount;e:for(let s=0,l=0;s<o;s++){const a=e.child(s);for(let u=l,c=Math.min(i,s+3);u<c;u++)if(n.child(u)==a){l=u+1,t+=a.nodeSize;continue e}r(a,t),l<i&&n.child(l).sameMarkup(a)?Cy(n.child(l),a,t+1,r):a.nodesBetween(0,a.content.size,r,t+1),t+=a.nodeSize}}function Ux(n,e){let t;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(t=Hx(n,i,o,t))};return e?e.doc!=n.doc&&Cy(e.doc,n.doc,0,r):n.doc.descendants(r),t}function Hx(n,e,t,r){const i=ne.get(e);if(!i.problems)return r;r||(r=n.tr);const o=[];for(let a=0;a<i.height;a++)o.push(0);for(let a=0;a<i.problems.length;a++){const u=i.problems[a];if(u.type=="collision"){const c=e.nodeAt(u.pos);if(!c)continue;const f=c.attrs;for(let d=0;d<f.rowspan;d++)o[u.row+d]+=u.n;r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,ei(f,f.colspan-u.n,u.n))}else if(u.type=="missing")o[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const c=e.nodeAt(u.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,{...c.attrs,rowspan:c.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const c=e.nodeAt(u.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,{...c.attrs,colwidth:u.colwidth})}}let s,l;for(let a=0;a<o.length;a++)o[a]&&(s==null&&(s=a),l=a);for(let a=0,u=t+1;a<i.height;a++){const c=e.child(a),f=u+c.nodeSize,d=o[a];if(d>0){let p="cell";c.firstChild&&(p=c.firstChild.type.spec.tableRole);const h=[];for(let w=0;w<d;w++){const g=Pt(n.schema)[p].createAndFill();g&&h.push(g)}const m=(a==0||s==a-1)&&l==a?u+1:f-1;r.insert(r.mapping.map(m),h)}u=f}return r.setMeta(Wx,{fixTables:!0})}function jx(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const i=e.child(0),o=i.type.spec.tableRole,s=i.type.schema,l=[];if(o=="row")for(let a=0;a<e.childCount;a++){let u=e.child(a).content;const c=a?0:Math.max(0,t-1),f=a<e.childCount-1?0:Math.max(0,r-1);(c||f)&&(u=ju(Pt(s).row,new k(u,c,f)).content),l.push(u)}else if(o=="cell"||o=="header_cell")l.push(t||r?ju(Pt(s).row,new k(e,t,r)).content:e);else return null;return Kx(s,l)}function Kx(n,e){const t=[];for(let i=0;i<e.length;i++){const o=e[i];for(let s=o.childCount-1;s>=0;s--){const{rowspan:l,colspan:a}=o.child(s).attrs;for(let u=i;u<i+l;u++)t[u]=(t[u]||0)+a}}let r=0;for(let i=0;i<t.length;i++)r=Math.max(r,t[i]);for(let i=0;i<t.length;i++)if(i>=e.length&&e.push(x.empty),t[i]<r){const o=Pt(n).cell.createAndFill(),s=[];for(let l=t[i];l<r;l++)s.push(o);e[i]=e[i].append(x.from(s))}return{height:e.length,width:r,rows:e}}function ju(n,e){const t=n.createAndFill();return new Ax(t).replace(0,t.content.size,e).doc}function qx({width:n,height:e,rows:t},r,i){if(n!=r){const o=[],s=[];for(let l=0;l<t.length;l++){const a=t[l],u=[];for(let c=o[l]||0,f=0;c<r;f++){let d=a.child(f%a.childCount);c+d.attrs.colspan>r&&(d=d.type.createChecked(ei(d.attrs,d.attrs.colspan,c+d.attrs.colspan-r),d.content)),u.push(d),c+=d.attrs.colspan;for(let p=1;p<d.attrs.rowspan;p++)o[l+p]=(o[l+p]||0)+d.attrs.colspan}s.push(x.from(u))}t=s,n=r}if(e!=i){const o=[];for(let s=0,l=0;s<i;s++,l++){const a=[],u=t[l%e];for(let c=0;c<u.childCount;c++){let f=u.child(c);s+f.attrs.rowspan>i&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,i-f.attrs.rowspan)},f.content)),a.push(f)}o.push(x.from(a))}t=o,e=i}return{width:n,height:e,rows:t}}function Qx(n,e,t,r,i,o,s){const l=n.doc.type.schema,a=Pt(l);let u,c;if(i>e.width)for(let f=0,d=0;f<e.height;f++){const p=t.child(f);d+=p.nodeSize;const h=[];let m;p.lastChild==null||p.lastChild.type==a.cell?m=u||(u=a.cell.createAndFill()):m=c||(c=a.header_cell.createAndFill());for(let w=e.width;w<i;w++)h.push(m);n.insert(n.mapping.slice(s).map(d-1+r),h)}if(o>e.height){const f=[];for(let h=0,m=(e.height-1)*e.width;h<Math.max(e.width,i);h++){const w=h>=e.width?!1:t.nodeAt(e.map[m+h]).type==a.header_cell;f.push(w?c||(c=a.header_cell.createAndFill()):u||(u=a.cell.createAndFill()))}const d=a.row.create(null,x.from(f)),p=[];for(let h=e.height;h<o;h++)p.push(d);n.insert(n.mapping.slice(s).map(r+t.nodeSize-2),p)}return!!(u||c)}function Ah(n,e,t,r,i,o,s,l){if(s==0||s==e.height)return!1;let a=!1;for(let u=i;u<o;u++){const c=s*e.width+u,f=e.map[c];if(e.map[c-e.width]==f){a=!0;const d=t.nodeAt(f),{top:p,left:h}=e.findCell(f);n.setNodeMarkup(n.mapping.slice(l).map(f+r),null,{...d.attrs,rowspan:s-p}),n.insert(n.mapping.slice(l).map(e.positionAt(s,h,t)),d.type.createAndFill({...d.attrs,rowspan:p+d.attrs.rowspan-s})),u+=d.attrs.colspan-1}}return a}function bh(n,e,t,r,i,o,s,l){if(s==0||s==e.width)return!1;let a=!1;for(let u=i;u<o;u++){const c=u*e.width+s,f=e.map[c];if(e.map[c-1]==f){a=!0;const d=t.nodeAt(f),p=e.colCount(f),h=n.mapping.slice(l).map(f+r);n.setNodeMarkup(h,null,ei(d.attrs,s-p,d.attrs.colspan-(s-p))),n.insert(h+d.nodeSize,d.type.createAndFill(ei(d.attrs,0,s-p))),u+=d.attrs.rowspan-1}}return a}function Ih(n,e,t,r,i){let o=t?n.doc.nodeAt(t-1):n.doc;if(!o)throw new Error("No table found");let s=ne.get(o);const{top:l,left:a}=r,u=a+i.width,c=l+i.height,f=n.tr;let d=0;function p(){if(o=t?f.doc.nodeAt(t-1):f.doc,!o)throw new Error("No table found");s=ne.get(o),d=f.mapping.maps.length}Qx(f,s,o,t,u,c,d)&&p(),Ah(f,s,o,t,a,u,l,d)&&p(),Ah(f,s,o,t,a,u,c,d)&&p(),bh(f,s,o,t,l,c,a,d)&&p(),bh(f,s,o,t,l,c,u,d)&&p();for(let h=l;h<c;h++){const m=s.positionAt(h,a,o),w=s.positionAt(h,u,o);f.replace(f.mapping.slice(d).map(m+t),f.mapping.slice(d).map(w+t),new k(i.rows[h-l],0,0))}p(),f.setSelection(new ce(f.doc.resolve(t+s.positionAt(l,a,o)),f.doc.resolve(t+s.positionAt(c-1,u-1,o)))),e(f)}var Yx=cx({ArrowLeft:hs("horiz",-1),ArrowRight:hs("horiz",1),ArrowUp:hs("vert",-1),ArrowDown:hs("vert",1),"Shift-ArrowLeft":ps("horiz",-1),"Shift-ArrowRight":ps("horiz",1),"Shift-ArrowUp":ps("vert",-1),"Shift-ArrowDown":ps("vert",1),Backspace:ms,"Mod-Backspace":ms,Delete:ms,"Mod-Delete":ms});function Xs(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function hs(n,e){return(t,r,i)=>{if(!i)return!1;const o=t.selection;if(o instanceof ce)return Xs(t,r,P.near(o.$headCell,e));if(n!="horiz"&&!o.empty)return!1;const s=Ny(i,n,e);if(s==null)return!1;if(n=="horiz")return Xs(t,r,P.near(t.doc.resolve(o.head+e),e));{const l=t.doc.resolve(s),a=vy(l,n,e);let u;return a?u=P.near(a,1):e<0?u=P.near(t.doc.resolve(l.before(-1)),-1):u=P.near(t.doc.resolve(l.after(-1)),1),Xs(t,r,u)}}}function ps(n,e){return(t,r,i)=>{if(!i)return!1;const o=t.selection;let s;if(o instanceof ce)s=o;else{const a=Ny(i,n,e);if(a==null)return!1;s=new ce(t.doc.resolve(a))}const l=vy(s.$headCell,n,e);return l?Xs(t,r,new ce(s.$anchorCell,l)):!1}}function ms(n,e){const t=n.selection;if(!(t instanceof ce))return!1;if(e){const r=n.tr,i=Pt(n.schema).cell.createAndFill().content;t.forEachCell((o,s)=>{o.content.eq(i)||r.replace(r.mapping.map(s+1),r.mapping.map(s+o.nodeSize-1),new k(i,0,0))}),r.docChanged&&e(r)}return!0}function Gx(n,e){const t=n.state.doc,r=Zo(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new ce(r))),!0):!1}function Xx(n,e,t){if(!Sf(n.state))return!1;let r=jx(t);const i=n.state.selection;if(i instanceof ce){r||(r={width:1,height:1,rows:[x.from(ju(Pt(n.state.schema).cell,t))]});const o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),l=ne.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=qx(r,l.right-l.left,l.bottom-l.top),Ih(n.state,n.dispatch,s,l,r),!0}else if(r){const o=ky(n.state),s=o.start(-1);return Ih(n.state,n.dispatch,s,ne.get(o.node(-1)).findCell(o.pos-s),r),!0}else return!1}function Zx(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=zh(n,e.target);let i;if(e.shiftKey&&n.state.selection instanceof ce)o(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Zo(n.state.selection.$anchor))!=null&&((t=Wa(n,e))==null?void 0:t.pos)!=i.pos)o(i,e),e.preventDefault();else if(!r)return;function o(a,u){let c=Wa(n,u);const f=ln.getState(n.state)==null;if(!c||!wf(a,c))if(f)c=a;else return;const d=new ce(a,c);if(f||!n.state.selection.eq(d)){const p=n.state.tr.setSelection(d);f&&p.setMeta(ln,a.pos),n.dispatch(p)}}function s(){n.root.removeEventListener("mouseup",s),n.root.removeEventListener("dragstart",s),n.root.removeEventListener("mousemove",l),ln.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(ln,-1))}function l(a){const u=a,c=ln.getState(n.state);let f;if(c!=null)f=n.state.doc.resolve(c);else if(zh(n,u.target)!=r&&(f=Wa(n,e),!f))return s();f&&o(f,u)}n.root.addEventListener("mouseup",s),n.root.addEventListener("dragstart",s),n.root.addEventListener("mousemove",l)}function Ny(n,e,t){if(!(n.state.selection instanceof $))return null;const{$head:r}=n.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((t<0?r.index(i):r.indexAfter(i))!=(t<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const l=r.before(i),a=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(a)?l:null}}return null}function zh(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Wa(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?Zo(n.state.doc.resolve(t.pos)):null}var eC=class{constructor(n,e){this.node=n,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ku(n,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,Ku(n,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};function Ku(n,e,t,r,i,o){var s;let l=0,a=!0,u=e.firstChild;const c=n.firstChild;if(c){for(let f=0,d=0;f<c.childCount;f++){const{colspan:p,colwidth:h}=c.child(f).attrs;for(let m=0;m<p;m++,d++){const w=i==d?o:h&&h[m],g=w?w+"px":"";l+=w||r,w||(a=!1),u?(u.style.width!=g&&(u.style.width=g),u=u.nextSibling):e.appendChild(document.createElement("col")).style.width=g}}for(;u;){const f=u.nextSibling;(s=u.parentNode)==null||s.removeChild(u),u=f}a?(t.style.width=l+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=l+"px")}}var at=new Qo("tableColumnResizing");function tC({handleWidth:n=5,cellMinWidth:e=25,View:t=eC,lastColumnResizable:r=!0}={}){const i=new Lt({key:at,state:{init(o,s){return i.spec.props.nodeViews[Pt(s.schema).table.name]=(l,a)=>new t(l,e,a),new nC(-1,!1)},apply(o,s){return s.apply(o)}},props:{attributes:o=>{const s=at.getState(o);return s&&s.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,s)=>{rC(o,s,n,e,r)},mouseleave:o=>{iC(o)},mousedown:(o,s)=>{oC(o,s,e)}},decorations:o=>{const s=at.getState(o);if(s&&s.activeHandle>-1)return fC(o,s.activeHandle)},nodeViews:{}}});return i}var nC=class Zs{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(at);if(r&&r.setHandle!=null)return new Zs(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Zs(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let i=e.mapping.map(t.activeHandle,-1);return Hu(e.doc.resolve(i))||(i=-1),new Zs(i,t.dragging)}return t}};function rC(n,e,t,r,i){const o=at.getState(n.state);if(o&&!o.dragging){const s=lC(e.target);let l=-1;if(s){const{left:a,right:u}=s.getBoundingClientRect();e.clientX-a<=t?l=Ph(n,e,"left",t):u-e.clientX<=t&&(l=Ph(n,e,"right",t))}if(l!=o.activeHandle){if(!i&&l!==-1){const a=n.state.doc.resolve(l),u=a.node(-1),c=ne.get(u),f=a.start(-1);if(c.colCount(a.pos-f)+a.nodeAfter.attrs.colspan-1==c.width-1)return}My(n,l)}}}function iC(n){const e=at.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&My(n,-1)}function oC(n,e,t){var r;const i=(r=n.dom.ownerDocument.defaultView)!=null?r:window,o=at.getState(n.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const s=n.state.doc.nodeAt(o.activeHandle),l=sC(n,o.activeHandle,s.attrs);n.dispatch(n.state.tr.setMeta(at,{setDragging:{startX:e.clientX,startWidth:l}}));function a(c){i.removeEventListener("mouseup",a),i.removeEventListener("mousemove",u);const f=at.getState(n.state);f!=null&&f.dragging&&(aC(n,f.activeHandle,Fh(f.dragging,c,t)),n.dispatch(n.state.tr.setMeta(at,{setDragging:null})))}function u(c){if(!c.which)return a(c);const f=at.getState(n.state);if(f&&f.dragging){const d=Fh(f.dragging,c,t);uC(n,f.activeHandle,d,t)}}return i.addEventListener("mouseup",a),i.addEventListener("mousemove",u),e.preventDefault(),!0}function sC(n,e,{colspan:t,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=n.domAtPos(e);let l=o.node.childNodes[o.offset].offsetWidth,a=t;if(r)for(let u=0;u<t;u++)r[u]&&(l-=r[u],a--);return l/a}function lC(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function Ph(n,e,t,r){const i=t=="right"?-r:r,o=n.posAtCoords({left:e.clientX+i,top:e.clientY});if(!o)return-1;const{pos:s}=o,l=Zo(n.state.doc.resolve(s));if(!l)return-1;if(t=="right")return l.pos;const a=ne.get(l.node(-1)),u=l.start(-1),c=a.map.indexOf(l.pos-u);return c%a.width==0?-1:u+a.map[c-1]}function Fh(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function My(n,e){n.dispatch(n.state.tr.setMeta(at,{setHandle:e}))}function aC(n,e,t){const r=n.state.doc.resolve(e),i=r.node(-1),o=ne.get(i),s=r.start(-1),l=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,a=n.state.tr;for(let u=0;u<o.height;u++){const c=u*o.width+l;if(u&&o.map[c]==o.map[c-o.width])continue;const f=o.map[c],d=i.nodeAt(f).attrs,p=d.colspan==1?0:l-o.colCount(f);if(d.colwidth&&d.colwidth[p]==t)continue;const h=d.colwidth?d.colwidth.slice():cC(d.colspan);h[p]=t,a.setNodeMarkup(s+f,null,{...d,colwidth:h})}a.docChanged&&n.dispatch(a)}function uC(n,e,t,r){const i=n.state.doc.resolve(e),o=i.node(-1),s=i.start(-1),l=ne.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;let a=n.domAtPos(i.start(-1)).node;for(;a&&a.nodeName!="TABLE";)a=a.parentNode;a&&Ku(o,a.firstChild,a,r,l,t)}function cC(n){return Array(n).fill(0)}function fC(n,e){const t=[],r=n.doc.resolve(e),i=r.node(-1);if(!i)return J.empty;const o=ne.get(i),s=r.start(-1),l=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan;for(let a=0;a<o.height;a++){const u=l+a*o.width-1;if((l==o.width||o.map[u]!=o.map[u+1])&&(a==0||o.map[u]!=o.map[u-o.width])){const c=o.map[u],f=s+c+i.nodeAt(c).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",t.push(ge.widget(f,d))}}return J.create(n.doc,t)}function Ey(n){const e=n.selection,t=ky(n),r=t.node(-1),i=t.start(-1),o=ne.get(r);return{...e instanceof ce?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(t.pos-i),tableStart:i,map:o,table:r}}function dC(n){return function(e,t){if(!Sf(e))return!1;if(t){const r=Pt(e.schema),i=Ey(e),o=e.tr,s=i.map.cellsInRect(n=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:n=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),l=s.map(a=>i.table.nodeAt(a));for(let a=0;a<s.length;a++)l[a].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[a],r.cell,l[a].attrs);if(o.steps.length==0)for(let a=0;a<s.length;a++)o.setNodeMarkup(i.tableStart+s[a],r.header_cell,l[a].attrs);t(o)}return!0}}function Lh(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==t.header_cell)return!1}return!0}function kf(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?dC(n):function(t,r){if(!Sf(t))return!1;if(r){const i=Pt(t.schema),o=Ey(t),s=t.tr,l=Lh("row",o,i),a=Lh("column",o,i),c=(n==="column"?l:n==="row"?a:!1)?1:0,f=n=="column"?{left:0,top:c,right:1,bottom:o.map.height}:n=="row"?{left:c,top:0,right:o.map.width,bottom:1}:o,d=n=="column"?a?i.cell:i.header_cell:n=="row"?l?i.cell:i.header_cell:i.cell;o.map.cellsInRect(f).forEach(p=>{const h=p+o.tableStart,m=s.doc.nodeAt(h);m&&s.setNodeMarkup(h,d,m.attrs)}),r(s)}return!0}}kf("row",{useDeprecatedLogic:!0});kf("column",{useDeprecatedLogic:!0});kf("cell",{useDeprecatedLogic:!0});function hC({allowTableNodeSelection:n=!1}={}){return new Lt({key:ln,state:{init(){return null},apply(e,t){const r=e.getMeta(ln);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:i,pos:o}=e.mapping.mapResult(t);return i?null:o}},props:{decorations:Vx,handleDOMEvents:{mousedown:Zx},createSelectionBetween(e){return ln.getState(e.state)!=null?e.state.selection:null},handleTripleClick:Gx,handleKeyDown:Yx,handlePaste:Xx},appendTransaction(e,t,r){return _x(r,Ux(r,t),n)}})}var Oy={exports:{}},nt={},Dy={exports:{}},Ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(R,F){var L=R.length;R.push(F);e:for(;0<L;){var ee=L-1>>>1,ae=R[ee];if(0<i(ae,F))R[ee]=F,R[L]=ae,L=ee;else break e}}function t(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var F=R[0],L=R.pop();if(L!==F){R[0]=L;e:for(var ee=0,ae=R.length,ss=ae>>>1;ee<ss;){var Pn=2*(ee+1)-1,ga=R[Pn],Fn=Pn+1,ls=R[Fn];if(0>i(ga,L))Fn<ae&&0>i(ls,ga)?(R[ee]=ls,R[Fn]=L,ee=Fn):(R[ee]=ga,R[Pn]=L,ee=Pn);else if(Fn<ae&&0>i(ls,L))R[ee]=ls,R[Fn]=L,ee=Fn;else break e}}return F}function i(R,F){var L=R.sortIndex-F.sortIndex;return L!==0?L:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var a=[],u=[],c=1,f=null,d=3,p=!1,h=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(R){for(var F=t(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=R)r(u),F.sortIndex=F.expirationTime,e(a,F);else break;F=t(u)}}function C(R){if(m=!1,S(R),!h)if(t(a)!==null)h=!0,gi(N);else{var F=t(u);F!==null&&ma(C,F.startTime-R)}}function N(R,F){h=!1,m&&(m=!1,g(T),T=-1),p=!0;var L=d;try{for(S(F),f=t(a);f!==null&&(!(f.expirationTime>F)||R&&!le());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,d=f.priorityLevel;var ae=ee(f.expirationTime<=F);F=n.unstable_now(),typeof ae=="function"?f.callback=ae:f===t(a)&&r(a),S(F)}else r(a);f=t(a)}if(f!==null)var ss=!0;else{var Pn=t(u);Pn!==null&&ma(C,Pn.startTime-F),ss=!1}return ss}finally{f=null,d=L,p=!1}}var E=!1,O=null,T=-1,b=5,z=-1;function le(){return!(n.unstable_now()-z<b)}function $t(){if(O!==null){var R=n.unstable_now();z=R;var F=!0;try{F=O(!0,R)}finally{F?W():(E=!1,O=null)}}else E=!1}var W;if(typeof y=="function")W=function(){y($t)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,mi=we.port2;we.port1.onmessage=$t,W=function(){mi.postMessage(null)}}else W=function(){w($t,0)};function gi(R){O=R,E||(E=!0,W())}function ma(R,F){T=w(function(){R(n.unstable_now())},F)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_continueExecution=function(){h||p||(h=!0,gi(N))},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(a)},n.unstable_next=function(R){switch(d){case 1:case 2:case 3:var F=3;break;default:F=d}var L=d;d=F;try{return R()}finally{d=L}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var L=d;d=R;try{return F()}finally{d=L}},n.unstable_scheduleCallback=function(R,F,L){var ee=n.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?ee+L:ee):L=ee,R){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=L+ae,R={id:c++,callback:F,priorityLevel:R,startTime:L,expirationTime:ae,sortIndex:-1},L>ee?(R.sortIndex=L,e(u,R),t(a)===null&&R===t(u)&&(m?(g(T),T=-1):m=!0,ma(C,L-ee))):(R.sortIndex=ae,e(a,R),h||p||(h=!0,gi(N))),R},n.unstable_shouldYield=le,n.unstable_wrapCallback=function(R){var F=d;return function(){var L=d;d=F;try{return R.apply(this,arguments)}finally{d=L}}}})(Ty);Dy.exports=Ty;var pC=Dy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry=v,tt=pC;function M(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ay=new Set,Eo={};function fr(n,e){ti(n,e),ti(n+"Capture",e)}function ti(n,e){for(Eo[n]=e,n=0;n<e.length;n++)Ay.add(e[n])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qu=Object.prototype.hasOwnProperty,mC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$h={},Vh={};function gC(n){return qu.call(Vh,n)?!0:qu.call($h,n)?!1:mC.test(n)?Vh[n]=!0:($h[n]=!0,!1)}function yC(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function SC(n,e,t,r){if(e===null||typeof e>"u"||yC(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pe(n,e,t,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Se[n]=new Pe(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Se[e]=new Pe(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Se[n]=new Pe(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Se[n]=new Pe(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Se[n]=new Pe(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Se[n]=new Pe(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Se[n]=new Pe(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Se[n]=new Pe(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Se[n]=new Pe(n,5,!1,n.toLowerCase(),null,!1,!1)});var vf=/[\-:]([a-z])/g;function xf(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(vf,xf);Se[e]=new Pe(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(vf,xf);Se[e]=new Pe(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(vf,xf);Se[e]=new Pe(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Se[n]=new Pe(n,1,!1,n.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Se[n]=new Pe(n,1,!1,n.toLowerCase(),null,!0,!0)});function Cf(n,e,t,r){var i=Se.hasOwnProperty(e)?Se[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SC(e,t,i,r)&&(t=null),r||i===null?gC(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Zt=Ry.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gs=Symbol.for("react.element"),Cr=Symbol.for("react.portal"),Nr=Symbol.for("react.fragment"),Nf=Symbol.for("react.strict_mode"),Qu=Symbol.for("react.profiler"),by=Symbol.for("react.provider"),Iy=Symbol.for("react.context"),Mf=Symbol.for("react.forward_ref"),Yu=Symbol.for("react.suspense"),Gu=Symbol.for("react.suspense_list"),Ef=Symbol.for("react.memo"),rn=Symbol.for("react.lazy"),zy=Symbol.for("react.offscreen"),Bh=Symbol.iterator;function Si(n){return n===null||typeof n!="object"?null:(n=Bh&&n[Bh]||n["@@iterator"],typeof n=="function"?n:null)}var G=Object.assign,Ua;function Qi(n){if(Ua===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Ua=e&&e[1]||""}return`
`+Ua+n}var Ha=!1;function ja(n,e){if(!n||Ha)return"";Ha=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return n.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",n.displayName)),a}while(1<=s&&0<=l);break}}}finally{Ha=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Qi(n):""}function wC(n){switch(n.tag){case 5:return Qi(n.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 2:case 15:return n=ja(n.type,!1),n;case 11:return n=ja(n.type.render,!1),n;case 1:return n=ja(n.type,!0),n;default:return""}}function Xu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Nr:return"Fragment";case Cr:return"Portal";case Qu:return"Profiler";case Nf:return"StrictMode";case Yu:return"Suspense";case Gu:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Iy:return(n.displayName||"Context")+".Consumer";case by:return(n._context.displayName||"Context")+".Provider";case Mf:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ef:return e=n.displayName||null,e!==null?e:Xu(n.type)||"Memo";case rn:e=n._payload,n=n._init;try{return Xu(n(e))}catch{}}return null}function kC(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xu(e);case 8:return e===Nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function On(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Py(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vC(n){var e=Py(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ys(n){n._valueTracker||(n._valueTracker=vC(n))}function Fy(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Py(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function xl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Zu(n,e){var t=e.checked;return G({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Jh(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=On(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ly(n,e){e=e.checked,e!=null&&Cf(n,"checked",e,!1)}function ec(n,e){Ly(n,e);var t=On(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?tc(n,e.type,t):e.hasOwnProperty("defaultValue")&&tc(n,e.type,On(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function _h(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function tc(n,e,t){(e!=="number"||xl(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Yi=Array.isArray;function Vr(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+On(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function nc(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return G({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Wh(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(M(92));if(Yi(t)){if(1<t.length)throw Error(M(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:On(t)}}function $y(n,e){var t=On(e.value),r=On(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Uh(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Vy(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rc(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Vy(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ss,By=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ss=Ss||document.createElement("div"),Ss.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ss.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Oo(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xC=["Webkit","ms","Moz","O"];Object.keys(io).forEach(function(n){xC.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),io[e]=io[n]})});function Jy(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||io.hasOwnProperty(n)&&io[n]?(""+e).trim():e+"px"}function _y(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Jy(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var CC=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ic(n,e){if(e){if(CC[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function oc(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sc=null;function Of(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var lc=null,Br=null,Jr=null;function Hh(n){if(n=ns(n)){if(typeof lc!="function")throw Error(M(280));var e=n.stateNode;e&&(e=ra(e),lc(n.stateNode,n.type,e))}}function Wy(n){Br?Jr?Jr.push(n):Jr=[n]:Br=n}function Uy(){if(Br){var n=Br,e=Jr;if(Jr=Br=null,Hh(n),e)for(n=0;n<e.length;n++)Hh(e[n])}}function Hy(n,e){return n(e)}function jy(){}var Ka=!1;function Ky(n,e,t){if(Ka)return n(e,t);Ka=!0;try{return Hy(n,e,t)}finally{Ka=!1,(Br!==null||Jr!==null)&&(jy(),Uy())}}function Do(n,e){var t=n.stateNode;if(t===null)return null;var r=ra(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(M(231,e,typeof t));return t}var ac=!1;if(Qt)try{var wi={};Object.defineProperty(wi,"passive",{get:function(){ac=!0}}),window.addEventListener("test",wi,wi),window.removeEventListener("test",wi,wi)}catch{ac=!1}function NC(n,e,t,r,i,o,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var oo=!1,Cl=null,Nl=!1,uc=null,MC={onError:function(n){oo=!0,Cl=n}};function EC(n,e,t,r,i,o,s,l,a){oo=!1,Cl=null,NC.apply(MC,arguments)}function OC(n,e,t,r,i,o,s,l,a){if(EC.apply(this,arguments),oo){if(oo){var u=Cl;oo=!1,Cl=null}else throw Error(M(198));Nl||(Nl=!0,uc=u)}}function dr(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function qy(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function jh(n){if(dr(n)!==n)throw Error(M(188))}function DC(n){var e=n.alternate;if(!e){if(e=dr(n),e===null)throw Error(M(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return jh(i),n;if(o===r)return jh(i),e;o=o.sibling}throw Error(M(188))}if(t.return!==r.return)t=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===t){s=!0,t=i,r=o;break}if(l===r){s=!0,r=i,t=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===t){s=!0,t=o,r=i;break}if(l===r){s=!0,r=o,t=i;break}l=l.sibling}if(!s)throw Error(M(189))}}if(t.alternate!==r)throw Error(M(190))}if(t.tag!==3)throw Error(M(188));return t.stateNode.current===t?n:e}function Qy(n){return n=DC(n),n!==null?Yy(n):null}function Yy(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Yy(n);if(e!==null)return e;n=n.sibling}return null}var Gy=tt.unstable_scheduleCallback,Kh=tt.unstable_cancelCallback,TC=tt.unstable_shouldYield,RC=tt.unstable_requestPaint,te=tt.unstable_now,AC=tt.unstable_getCurrentPriorityLevel,Df=tt.unstable_ImmediatePriority,Xy=tt.unstable_UserBlockingPriority,Ml=tt.unstable_NormalPriority,bC=tt.unstable_LowPriority,Zy=tt.unstable_IdlePriority,Zl=null,Rt=null;function IC(n){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Zl,n,void 0,(n.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:FC,zC=Math.log,PC=Math.LN2;function FC(n){return n>>>=0,n===0?32:31-(zC(n)/PC|0)|0}var ws=64,ks=4194304;function Gi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function El(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,o=n.pingedLanes,s=t&268435455;if(s!==0){var l=s&~i;l!==0?r=Gi(l):(o&=s,o!==0&&(r=Gi(o)))}else s=t&~i,s!==0?r=Gi(s):o!==0&&(r=Gi(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-kt(e),i=1<<t,r|=n[t],e&=~i;return r}function LC(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $C(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,o=n.pendingLanes;0<o;){var s=31-kt(o),l=1<<s,a=i[s];a===-1?(!(l&t)||l&r)&&(i[s]=LC(l,e)):a<=e&&(n.expiredLanes|=l),o&=~l}}function cc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function e0(){var n=ws;return ws<<=1,!(ws&4194240)&&(ws=64),n}function qa(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function es(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-kt(e),n[e]=t}function VC(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-kt(t),o=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~o}}function Tf(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-kt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var U=0;function t0(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var n0,Rf,r0,i0,o0,fc=!1,vs=[],Sn=null,wn=null,kn=null,To=new Map,Ro=new Map,an=[],BC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qh(n,e){switch(n){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":wn=null;break;case"mouseover":case"mouseout":kn=null;break;case"pointerover":case"pointerout":To.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ro.delete(e.pointerId)}}function ki(n,e,t,r,i,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ns(e),e!==null&&Rf(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function JC(n,e,t,r,i){switch(e){case"focusin":return Sn=ki(Sn,n,e,t,r,i),!0;case"dragenter":return wn=ki(wn,n,e,t,r,i),!0;case"mouseover":return kn=ki(kn,n,e,t,r,i),!0;case"pointerover":var o=i.pointerId;return To.set(o,ki(To.get(o)||null,n,e,t,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ro.set(o,ki(Ro.get(o)||null,n,e,t,r,i)),!0}return!1}function s0(n){var e=Kn(n.target);if(e!==null){var t=dr(e);if(t!==null){if(e=t.tag,e===13){if(e=qy(t),e!==null){n.blockedOn=e,o0(n.priority,function(){r0(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function el(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=dc(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);sc=r,t.target.dispatchEvent(r),sc=null}else return e=ns(t),e!==null&&Rf(e),n.blockedOn=t,!1;e.shift()}return!0}function Qh(n,e,t){el(n)&&t.delete(e)}function _C(){fc=!1,Sn!==null&&el(Sn)&&(Sn=null),wn!==null&&el(wn)&&(wn=null),kn!==null&&el(kn)&&(kn=null),To.forEach(Qh),Ro.forEach(Qh)}function vi(n,e){n.blockedOn===e&&(n.blockedOn=null,fc||(fc=!0,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,_C)))}function Ao(n){function e(i){return vi(i,n)}if(0<vs.length){vi(vs[0],n);for(var t=1;t<vs.length;t++){var r=vs[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Sn!==null&&vi(Sn,n),wn!==null&&vi(wn,n),kn!==null&&vi(kn,n),To.forEach(e),Ro.forEach(e),t=0;t<an.length;t++)r=an[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<an.length&&(t=an[0],t.blockedOn===null);)s0(t),t.blockedOn===null&&an.shift()}var _r=Zt.ReactCurrentBatchConfig,Ol=!0;function WC(n,e,t,r){var i=U,o=_r.transition;_r.transition=null;try{U=1,Af(n,e,t,r)}finally{U=i,_r.transition=o}}function UC(n,e,t,r){var i=U,o=_r.transition;_r.transition=null;try{U=4,Af(n,e,t,r)}finally{U=i,_r.transition=o}}function Af(n,e,t,r){if(Ol){var i=dc(n,e,t,r);if(i===null)iu(n,e,r,Dl,t),qh(n,r);else if(JC(i,n,e,t,r))r.stopPropagation();else if(qh(n,r),e&4&&-1<BC.indexOf(n)){for(;i!==null;){var o=ns(i);if(o!==null&&n0(o),o=dc(n,e,t,r),o===null&&iu(n,e,r,Dl,t),o===i)break;i=o}i!==null&&r.stopPropagation()}else iu(n,e,r,null,t)}}var Dl=null;function dc(n,e,t,r){if(Dl=null,n=Of(r),n=Kn(n),n!==null)if(e=dr(n),e===null)n=null;else if(t=e.tag,t===13){if(n=qy(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Dl=n,null}function l0(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AC()){case Df:return 1;case Xy:return 4;case Ml:case bC:return 16;case Zy:return 536870912;default:return 16}default:return 16}}var pn=null,bf=null,tl=null;function a0(){if(tl)return tl;var n,e=bf,t=e.length,r,i="value"in pn?pn.value:pn.textContent,o=i.length;for(n=0;n<t&&e[n]===i[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===i[o-r];r++);return tl=i.slice(n,1<r?1-r:void 0)}function nl(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function xs(){return!0}function Yh(){return!1}function rt(n){function e(t,r,i,o,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?xs:Yh,this.isPropagationStopped=Yh,this}return G(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),e}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},If=rt(di),ts=G({},di,{view:0,detail:0}),HC=rt(ts),Qa,Ya,xi,ea=G({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xi&&(xi&&n.type==="mousemove"?(Qa=n.screenX-xi.screenX,Ya=n.screenY-xi.screenY):Ya=Qa=0,xi=n),Qa)},movementY:function(n){return"movementY"in n?n.movementY:Ya}}),Gh=rt(ea),jC=G({},ea,{dataTransfer:0}),KC=rt(jC),qC=G({},ts,{relatedTarget:0}),Ga=rt(qC),QC=G({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),YC=rt(QC),GC=G({},di,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),XC=rt(GC),ZC=G({},di,{data:0}),Xh=rt(ZC),eN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=nN[n])?!!e[n]:!1}function zf(){return rN}var iN=G({},ts,{key:function(n){if(n.key){var e=eN[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=nl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zf,charCode:function(n){return n.type==="keypress"?nl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?nl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oN=rt(iN),sN=G({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zh=rt(sN),lN=G({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zf}),aN=rt(lN),uN=G({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),cN=rt(uN),fN=G({},ea,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dN=rt(fN),hN=[9,13,27,32],Pf=Qt&&"CompositionEvent"in window,so=null;Qt&&"documentMode"in document&&(so=document.documentMode);var pN=Qt&&"TextEvent"in window&&!so,u0=Qt&&(!Pf||so&&8<so&&11>=so),ep=" ",tp=!1;function c0(n,e){switch(n){case"keyup":return hN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f0(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Mr=!1;function mN(n,e){switch(n){case"compositionend":return f0(e);case"keypress":return e.which!==32?null:(tp=!0,ep);case"textInput":return n=e.data,n===ep&&tp?null:n;default:return null}}function gN(n,e){if(Mr)return n==="compositionend"||!Pf&&c0(n,e)?(n=a0(),tl=bf=pn=null,Mr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return u0&&e.locale!=="ko"?null:e.data;default:return null}}var yN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function np(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!yN[n.type]:e==="textarea"}function d0(n,e,t,r){Wy(r),e=Tl(e,"onChange"),0<e.length&&(t=new If("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var lo=null,bo=null;function SN(n){C0(n,0)}function ta(n){var e=Dr(n);if(Fy(e))return n}function wN(n,e){if(n==="change")return e}var h0=!1;if(Qt){var Xa;if(Qt){var Za="oninput"in document;if(!Za){var rp=document.createElement("div");rp.setAttribute("oninput","return;"),Za=typeof rp.oninput=="function"}Xa=Za}else Xa=!1;h0=Xa&&(!document.documentMode||9<document.documentMode)}function ip(){lo&&(lo.detachEvent("onpropertychange",p0),bo=lo=null)}function p0(n){if(n.propertyName==="value"&&ta(bo)){var e=[];d0(e,bo,n,Of(n)),Ky(SN,e)}}function kN(n,e,t){n==="focusin"?(ip(),lo=e,bo=t,lo.attachEvent("onpropertychange",p0)):n==="focusout"&&ip()}function vN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ta(bo)}function xN(n,e){if(n==="click")return ta(e)}function CN(n,e){if(n==="input"||n==="change")return ta(e)}function NN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ct=typeof Object.is=="function"?Object.is:NN;function Io(n,e){if(Ct(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!qu.call(e,i)||!Ct(n[i],e[i]))return!1}return!0}function op(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function sp(n,e){var t=op(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=op(t)}}function m0(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?m0(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function g0(){for(var n=window,e=xl();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=xl(n.document)}return e}function Ff(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function MN(n){var e=g0(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&m0(t.ownerDocument.documentElement,t)){if(r!==null&&Ff(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!n.extend&&o>r&&(i=r,r=o,o=i),i=sp(t,o);var s=sp(t,r);i&&s&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var EN=Qt&&"documentMode"in document&&11>=document.documentMode,Er=null,hc=null,ao=null,pc=!1;function lp(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;pc||Er==null||Er!==xl(r)||(r=Er,"selectionStart"in r&&Ff(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ao&&Io(ao,r)||(ao=r,r=Tl(hc,"onSelect"),0<r.length&&(e=new If("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Er)))}function Cs(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Or={animationend:Cs("Animation","AnimationEnd"),animationiteration:Cs("Animation","AnimationIteration"),animationstart:Cs("Animation","AnimationStart"),transitionend:Cs("Transition","TransitionEnd")},eu={},y0={};Qt&&(y0=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function na(n){if(eu[n])return eu[n];if(!Or[n])return n;var e=Or[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in y0)return eu[n]=e[t];return n}var S0=na("animationend"),w0=na("animationiteration"),k0=na("animationstart"),v0=na("transitionend"),x0=new Map,ap="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(n,e){x0.set(n,e),fr(e,[n])}for(var tu=0;tu<ap.length;tu++){var nu=ap[tu],ON=nu.toLowerCase(),DN=nu[0].toUpperCase()+nu.slice(1);An(ON,"on"+DN)}An(S0,"onAnimationEnd");An(w0,"onAnimationIteration");An(k0,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(v0,"onTransitionEnd");ti("onMouseEnter",["mouseout","mouseover"]);ti("onMouseLeave",["mouseout","mouseover"]);ti("onPointerEnter",["pointerout","pointerover"]);ti("onPointerLeave",["pointerout","pointerover"]);fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function up(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,OC(r,e,void 0,n),n.currentTarget=null}function C0(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;up(i,l,u),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;up(i,l,u),o=a}}}if(Nl)throw n=uc,Nl=!1,uc=null,n}function j(n,e){var t=e[wc];t===void 0&&(t=e[wc]=new Set);var r=n+"__bubble";t.has(r)||(N0(e,n,2,!1),t.add(r))}function ru(n,e,t){var r=0;e&&(r|=4),N0(t,n,r,e)}var Ns="_reactListening"+Math.random().toString(36).slice(2);function zo(n){if(!n[Ns]){n[Ns]=!0,Ay.forEach(function(t){t!=="selectionchange"&&(TN.has(t)||ru(t,!1,n),ru(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Ns]||(e[Ns]=!0,ru("selectionchange",!1,e))}}function N0(n,e,t,r){switch(l0(e)){case 1:var i=WC;break;case 4:i=UC;break;default:i=Af}t=i.bind(null,e,t,n),i=void 0,!ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function iu(n,e,t,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Kn(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Ky(function(){var u=o,c=Of(t),f=[];e:{var d=x0.get(n);if(d!==void 0){var p=If,h=n;switch(n){case"keypress":if(nl(t)===0)break e;case"keydown":case"keyup":p=oN;break;case"focusin":h="focus",p=Ga;break;case"focusout":h="blur",p=Ga;break;case"beforeblur":case"afterblur":p=Ga;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=KC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=aN;break;case S0:case w0:case k0:p=YC;break;case v0:p=cN;break;case"scroll":p=HC;break;case"wheel":p=dN;break;case"copy":case"cut":case"paste":p=XC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Zh}var m=(e&4)!==0,w=!m&&n==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var y=u,S;y!==null;){S=y;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,g!==null&&(C=Do(y,g),C!=null&&m.push(Po(y,C,S)))),w)break;y=y.return}0<m.length&&(d=new p(d,h,null,t,c),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",d&&t!==sc&&(h=t.relatedTarget||t.fromElement)&&(Kn(h)||h[Yt]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(h=t.relatedTarget||t.toElement,p=u,h=h?Kn(h):null,h!==null&&(w=dr(h),h!==w||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=u),p!==h)){if(m=Gh,C="onMouseLeave",g="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(m=Zh,C="onPointerLeave",g="onPointerEnter",y="pointer"),w=p==null?d:Dr(p),S=h==null?d:Dr(h),d=new m(C,y+"leave",p,t,c),d.target=w,d.relatedTarget=S,C=null,Kn(c)===u&&(m=new m(g,y+"enter",h,t,c),m.target=S,m.relatedTarget=w,C=m),w=C,p&&h)t:{for(m=p,g=h,y=0,S=m;S;S=mr(S))y++;for(S=0,C=g;C;C=mr(C))S++;for(;0<y-S;)m=mr(m),y--;for(;0<S-y;)g=mr(g),S--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=mr(m),g=mr(g)}m=null}else m=null;p!==null&&cp(f,d,p,m,!1),h!==null&&w!==null&&cp(f,w,h,m,!0)}}e:{if(d=u?Dr(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var N=wN;else if(np(d))if(h0)N=CN;else{N=vN;var E=kN}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(N=xN);if(N&&(N=N(n,u))){d0(f,N,t,c);break e}E&&E(n,d,u),n==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&tc(d,"number",d.value)}switch(E=u?Dr(u):window,n){case"focusin":(np(E)||E.contentEditable==="true")&&(Er=E,hc=u,ao=null);break;case"focusout":ao=hc=Er=null;break;case"mousedown":pc=!0;break;case"contextmenu":case"mouseup":case"dragend":pc=!1,lp(f,t,c);break;case"selectionchange":if(EN)break;case"keydown":case"keyup":lp(f,t,c)}var O;if(Pf)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Mr?c0(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(u0&&t.locale!=="ko"&&(Mr||T!=="onCompositionStart"?T==="onCompositionEnd"&&Mr&&(O=a0()):(pn=c,bf="value"in pn?pn.value:pn.textContent,Mr=!0)),E=Tl(u,T),0<E.length&&(T=new Xh(T,n,null,t,c),f.push({event:T,listeners:E}),O?T.data=O:(O=f0(t),O!==null&&(T.data=O)))),(O=pN?mN(n,t):gN(n,t))&&(u=Tl(u,"onBeforeInput"),0<u.length&&(c=new Xh("onBeforeInput","beforeinput",null,t,c),f.push({event:c,listeners:u}),c.data=O))}C0(f,e)})}function Po(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Tl(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Do(n,t),o!=null&&r.unshift(Po(n,o,i)),o=Do(n,e),o!=null&&r.push(Po(n,o,i))),n=n.return}return r}function mr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function cp(n,e,t,r,i){for(var o=e._reactName,s=[];t!==null&&t!==r;){var l=t,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Do(t,o),a!=null&&s.unshift(Po(t,a,l))):i||(a=Do(t,o),a!=null&&s.push(Po(t,a,l)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var RN=/\r\n?/g,AN=/\u0000|\uFFFD/g;function fp(n){return(typeof n=="string"?n:""+n).replace(RN,`
`).replace(AN,"")}function Ms(n,e,t){if(e=fp(e),fp(n)!==e&&t)throw Error(M(425))}function Rl(){}var mc=null,gc=null;function yc(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sc=typeof setTimeout=="function"?setTimeout:void 0,bN=typeof clearTimeout=="function"?clearTimeout:void 0,dp=typeof Promise=="function"?Promise:void 0,IN=typeof queueMicrotask=="function"?queueMicrotask:typeof dp<"u"?function(n){return dp.resolve(null).then(n).catch(zN)}:Sc;function zN(n){setTimeout(function(){throw n})}function ou(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Ao(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Ao(e)}function vn(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function hp(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var hi=Math.random().toString(36).slice(2),Et="__reactFiber$"+hi,Fo="__reactProps$"+hi,Yt="__reactContainer$"+hi,wc="__reactEvents$"+hi,PN="__reactListeners$"+hi,FN="__reactHandles$"+hi;function Kn(n){var e=n[Et];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Yt]||t[Et]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=hp(n);n!==null;){if(t=n[Et])return t;n=hp(n)}return e}n=t,t=n.parentNode}return null}function ns(n){return n=n[Et]||n[Yt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Dr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(M(33))}function ra(n){return n[Fo]||null}var kc=[],Tr=-1;function bn(n){return{current:n}}function K(n){0>Tr||(n.current=kc[Tr],kc[Tr]=null,Tr--)}function H(n,e){Tr++,kc[Tr]=n.current,n.current=e}var Dn={},Ee=bn(Dn),We=bn(!1),ir=Dn;function ni(n,e){var t=n.type.contextTypes;if(!t)return Dn;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ue(n){return n=n.childContextTypes,n!=null}function Al(){K(We),K(Ee)}function pp(n,e,t){if(Ee.current!==Dn)throw Error(M(168));H(Ee,e),H(We,t)}function M0(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,kC(n)||"Unknown",i));return G({},t,r)}function bl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Dn,ir=Ee.current,H(Ee,n),H(We,We.current),!0}function mp(n,e,t){var r=n.stateNode;if(!r)throw Error(M(169));t?(n=M0(n,e,ir),r.__reactInternalMemoizedMergedChildContext=n,K(We),K(Ee),H(Ee,n)):K(We),H(We,t)}var Ut=null,ia=!1,su=!1;function E0(n){Ut===null?Ut=[n]:Ut.push(n)}function LN(n){ia=!0,E0(n)}function In(){if(!su&&Ut!==null){su=!0;var n=0,e=U;try{var t=Ut;for(U=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Ut=null,ia=!1}catch(i){throw Ut!==null&&(Ut=Ut.slice(n+1)),Gy(Df,In),i}finally{U=e,su=!1}}return null}var Rr=[],Ar=0,Il=null,zl=0,ot=[],st=0,or=null,Ht=1,jt="";function Jn(n,e){Rr[Ar++]=zl,Rr[Ar++]=Il,Il=n,zl=e}function O0(n,e,t){ot[st++]=Ht,ot[st++]=jt,ot[st++]=or,or=n;var r=Ht;n=jt;var i=32-kt(r)-1;r&=~(1<<i),t+=1;var o=32-kt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ht=1<<32-kt(e)+i|t<<i|r,jt=o+n}else Ht=1<<o|t<<i|r,jt=n}function Lf(n){n.return!==null&&(Jn(n,1),O0(n,1,0))}function $f(n){for(;n===Il;)Il=Rr[--Ar],Rr[Ar]=null,zl=Rr[--Ar],Rr[Ar]=null;for(;n===or;)or=ot[--st],ot[st]=null,jt=ot[--st],ot[st]=null,Ht=ot[--st],ot[st]=null}var et=null,Xe=null,q=!1,wt=null;function D0(n,e){var t=ut(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function gp(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,et=n,Xe=vn(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,et=n,Xe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=or!==null?{id:Ht,overflow:jt}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ut(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,et=n,Xe=null,!0):!1;default:return!1}}function vc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function xc(n){if(q){var e=Xe;if(e){var t=e;if(!gp(n,e)){if(vc(n))throw Error(M(418));e=vn(t.nextSibling);var r=et;e&&gp(n,e)?D0(r,t):(n.flags=n.flags&-4097|2,q=!1,et=n)}}else{if(vc(n))throw Error(M(418));n.flags=n.flags&-4097|2,q=!1,et=n}}}function yp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;et=n}function Es(n){if(n!==et)return!1;if(!q)return yp(n),q=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!yc(n.type,n.memoizedProps)),e&&(e=Xe)){if(vc(n))throw T0(),Error(M(418));for(;e;)D0(n,e),e=vn(e.nextSibling)}if(yp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(M(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Xe=vn(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Xe=null}}else Xe=et?vn(n.stateNode.nextSibling):null;return!0}function T0(){for(var n=Xe;n;)n=vn(n.nextSibling)}function ri(){Xe=et=null,q=!1}function Vf(n){wt===null?wt=[n]:wt.push(n)}var $N=Zt.ReactCurrentBatchConfig;function gt(n,e){if(n&&n.defaultProps){e=G({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Pl=bn(null),Fl=null,br=null,Bf=null;function Jf(){Bf=br=Fl=null}function _f(n){var e=Pl.current;K(Pl),n._currentValue=e}function Cc(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Wr(n,e){Fl=n,Bf=br=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Je=!0),n.firstContext=null)}function dt(n){var e=n._currentValue;if(Bf!==n)if(n={context:n,memoizedValue:e,next:null},br===null){if(Fl===null)throw Error(M(308));br=n,Fl.dependencies={lanes:0,firstContext:n}}else br=br.next=n;return e}var qn=null;function Wf(n){qn===null?qn=[n]:qn.push(n)}function R0(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Wf(e)):(t.next=i.next,i.next=t),e.interleaved=t,Gt(n,r)}function Gt(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var on=!1;function Uf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function A0(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function qt(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function xn(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gt(n,t)}return i=r.interleaved,i===null?(e.next=e,Wf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gt(n,t)}function rl(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Tf(n,t)}}function Sp(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=s:o=o.next=s,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Ll(n,e,t,r){var i=n.updateQueue;on=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?o=u:s.next=u,s=a;var c=n.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==s&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(o!==null){var f=i.baseState;s=0,c=u=a=null,l=o;do{var d=l.lane,p=l.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=n,m=l;switch(d=e,p=t,m.tag){case 1:if(h=m.payload,typeof h=="function"){f=h.call(p,f,d);break e}f=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=m.payload,d=typeof h=="function"?h.call(p,f,d):h,d==null)break e;f=G({},f,d);break e;case 2:on=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else p={eventTime:p,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=p,a=f):c=c.next=p,s|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);lr|=s,n.lanes=s,n.memoizedState=f}}function wp(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var b0=new Ry.Component().refs;function Nc(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:G({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var oa={isMounted:function(n){return(n=n._reactInternals)?dr(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Re(),i=Nn(n),o=qt(r,i);o.payload=e,t!=null&&(o.callback=t),e=xn(n,o,i),e!==null&&(vt(e,n,i,r),rl(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Re(),i=Nn(n),o=qt(r,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=xn(n,o,i),e!==null&&(vt(e,n,i,r),rl(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Re(),r=Nn(n),i=qt(t,r);i.tag=2,e!=null&&(i.callback=e),e=xn(n,i,r),e!==null&&(vt(e,n,r,t),rl(e,n,r))}};function kp(n,e,t,r,i,o,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Io(t,r)||!Io(i,o):!0}function I0(n,e,t){var r=!1,i=Dn,o=e.contextType;return typeof o=="object"&&o!==null?o=dt(o):(i=Ue(e)?ir:Ee.current,r=e.contextTypes,o=(r=r!=null)?ni(n,i):Dn),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oa,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=o),e}function vp(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&oa.enqueueReplaceState(e,e.state,null)}function Mc(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=b0,Uf(n);var o=e.contextType;typeof o=="object"&&o!==null?i.context=dt(o):(o=Ue(e)?ir:Ee.current,i.context=ni(n,o)),i.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Nc(n,e,o,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&oa.enqueueReplaceState(i,i.state,null),Ll(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Ci(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(M(309));var r=t.stateNode}if(!r)throw Error(M(147,n));var i=r,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;l===b0&&(l=i.refs={}),s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof n!="string")throw Error(M(284));if(!t._owner)throw Error(M(290,n))}return n}function Os(n,e){throw n=Object.prototype.toString.call(e),Error(M(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function xp(n){var e=n._init;return e(n._payload)}function z0(n){function e(g,y){if(n){var S=g.deletions;S===null?(g.deletions=[y],g.flags|=16):S.push(y)}}function t(g,y){if(!n)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=Mn(g,y),g.index=0,g.sibling=null,g}function o(g,y,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<y?(g.flags|=2,y):S):(g.flags|=2,y)):(g.flags|=1048576,y)}function s(g){return n&&g.alternate===null&&(g.flags|=2),g}function l(g,y,S,C){return y===null||y.tag!==6?(y=hu(S,g.mode,C),y.return=g,y):(y=i(y,S),y.return=g,y)}function a(g,y,S,C){var N=S.type;return N===Nr?c(g,y,S.props.children,C,S.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===rn&&xp(N)===y.type)?(C=i(y,S.props),C.ref=Ci(g,y,S),C.return=g,C):(C=ul(S.type,S.key,S.props,null,g.mode,C),C.ref=Ci(g,y,S),C.return=g,C)}function u(g,y,S,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=pu(S,g.mode,C),y.return=g,y):(y=i(y,S.children||[]),y.return=g,y)}function c(g,y,S,C,N){return y===null||y.tag!==7?(y=tr(S,g.mode,C,N),y.return=g,y):(y=i(y,S),y.return=g,y)}function f(g,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=hu(""+y,g.mode,S),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case gs:return S=ul(y.type,y.key,y.props,null,g.mode,S),S.ref=Ci(g,null,y),S.return=g,S;case Cr:return y=pu(y,g.mode,S),y.return=g,y;case rn:var C=y._init;return f(g,C(y._payload),S)}if(Yi(y)||Si(y))return y=tr(y,g.mode,S,null),y.return=g,y;Os(g,y)}return null}function d(g,y,S,C){var N=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:l(g,y,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case gs:return S.key===N?a(g,y,S,C):null;case Cr:return S.key===N?u(g,y,S,C):null;case rn:return N=S._init,d(g,y,N(S._payload),C)}if(Yi(S)||Si(S))return N!==null?null:c(g,y,S,C,null);Os(g,S)}return null}function p(g,y,S,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(S)||null,l(y,g,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case gs:return g=g.get(C.key===null?S:C.key)||null,a(y,g,C,N);case Cr:return g=g.get(C.key===null?S:C.key)||null,u(y,g,C,N);case rn:var E=C._init;return p(g,y,S,E(C._payload),N)}if(Yi(C)||Si(C))return g=g.get(S)||null,c(y,g,C,N,null);Os(y,C)}return null}function h(g,y,S,C){for(var N=null,E=null,O=y,T=y=0,b=null;O!==null&&T<S.length;T++){O.index>T?(b=O,O=null):b=O.sibling;var z=d(g,O,S[T],C);if(z===null){O===null&&(O=b);break}n&&O&&z.alternate===null&&e(g,O),y=o(z,y,T),E===null?N=z:E.sibling=z,E=z,O=b}if(T===S.length)return t(g,O),q&&Jn(g,T),N;if(O===null){for(;T<S.length;T++)O=f(g,S[T],C),O!==null&&(y=o(O,y,T),E===null?N=O:E.sibling=O,E=O);return q&&Jn(g,T),N}for(O=r(g,O);T<S.length;T++)b=p(O,g,T,S[T],C),b!==null&&(n&&b.alternate!==null&&O.delete(b.key===null?T:b.key),y=o(b,y,T),E===null?N=b:E.sibling=b,E=b);return n&&O.forEach(function(le){return e(g,le)}),q&&Jn(g,T),N}function m(g,y,S,C){var N=Si(S);if(typeof N!="function")throw Error(M(150));if(S=N.call(S),S==null)throw Error(M(151));for(var E=N=null,O=y,T=y=0,b=null,z=S.next();O!==null&&!z.done;T++,z=S.next()){O.index>T?(b=O,O=null):b=O.sibling;var le=d(g,O,z.value,C);if(le===null){O===null&&(O=b);break}n&&O&&le.alternate===null&&e(g,O),y=o(le,y,T),E===null?N=le:E.sibling=le,E=le,O=b}if(z.done)return t(g,O),q&&Jn(g,T),N;if(O===null){for(;!z.done;T++,z=S.next())z=f(g,z.value,C),z!==null&&(y=o(z,y,T),E===null?N=z:E.sibling=z,E=z);return q&&Jn(g,T),N}for(O=r(g,O);!z.done;T++,z=S.next())z=p(O,g,T,z.value,C),z!==null&&(n&&z.alternate!==null&&O.delete(z.key===null?T:z.key),y=o(z,y,T),E===null?N=z:E.sibling=z,E=z);return n&&O.forEach(function($t){return e(g,$t)}),q&&Jn(g,T),N}function w(g,y,S,C){if(typeof S=="object"&&S!==null&&S.type===Nr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case gs:e:{for(var N=S.key,E=y;E!==null;){if(E.key===N){if(N=S.type,N===Nr){if(E.tag===7){t(g,E.sibling),y=i(E,S.props.children),y.return=g,g=y;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===rn&&xp(N)===E.type){t(g,E.sibling),y=i(E,S.props),y.ref=Ci(g,E,S),y.return=g,g=y;break e}t(g,E);break}else e(g,E);E=E.sibling}S.type===Nr?(y=tr(S.props.children,g.mode,C,S.key),y.return=g,g=y):(C=ul(S.type,S.key,S.props,null,g.mode,C),C.ref=Ci(g,y,S),C.return=g,g=C)}return s(g);case Cr:e:{for(E=S.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){t(g,y.sibling),y=i(y,S.children||[]),y.return=g,g=y;break e}else{t(g,y);break}else e(g,y);y=y.sibling}y=pu(S,g.mode,C),y.return=g,g=y}return s(g);case rn:return E=S._init,w(g,y,E(S._payload),C)}if(Yi(S))return h(g,y,S,C);if(Si(S))return m(g,y,S,C);Os(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(t(g,y.sibling),y=i(y,S),y.return=g,g=y):(t(g,y),y=hu(S,g.mode,C),y.return=g,g=y),s(g)):t(g,y)}return w}var ii=z0(!0),P0=z0(!1),rs={},At=bn(rs),Lo=bn(rs),$o=bn(rs);function Qn(n){if(n===rs)throw Error(M(174));return n}function Hf(n,e){switch(H($o,e),H(Lo,n),H(At,rs),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rc(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=rc(e,n)}K(At),H(At,e)}function oi(){K(At),K(Lo),K($o)}function F0(n){Qn($o.current);var e=Qn(At.current),t=rc(e,n.type);e!==t&&(H(Lo,n),H(At,t))}function jf(n){Lo.current===n&&(K(At),K(Lo))}var Q=bn(0);function $l(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lu=[];function Kf(){for(var n=0;n<lu.length;n++)lu[n]._workInProgressVersionPrimary=null;lu.length=0}var il=Zt.ReactCurrentDispatcher,au=Zt.ReactCurrentBatchConfig,sr=0,Y=null,oe=null,ue=null,Vl=!1,uo=!1,Vo=0,VN=0;function ke(){throw Error(M(321))}function qf(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ct(n[t],e[t]))return!1;return!0}function Qf(n,e,t,r,i,o){if(sr=o,Y=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,il.current=n===null||n.memoizedState===null?WN:UN,n=t(r,i),uo){o=0;do{if(uo=!1,Vo=0,25<=o)throw Error(M(301));o+=1,ue=oe=null,e.updateQueue=null,il.current=HN,n=t(r,i)}while(uo)}if(il.current=Bl,e=oe!==null&&oe.next!==null,sr=0,ue=oe=Y=null,Vl=!1,e)throw Error(M(300));return n}function Yf(){var n=Vo!==0;return Vo=0,n}function Mt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?Y.memoizedState=ue=n:ue=ue.next=n,ue}function ht(){if(oe===null){var n=Y.alternate;n=n!==null?n.memoizedState:null}else n=oe.next;var e=ue===null?Y.memoizedState:ue.next;if(e!==null)ue=e,oe=n;else{if(n===null)throw Error(M(310));oe=n,n={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},ue===null?Y.memoizedState=ue=n:ue=ue.next=n}return ue}function Bo(n,e){return typeof e=="function"?e(n):e}function uu(n){var e=ht(),t=e.queue;if(t===null)throw Error(M(311));t.lastRenderedReducer=n;var r=oe,i=r.baseQueue,o=t.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,t.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,u=o;do{var c=u.lane;if((sr&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,s=r):a=a.next=f,Y.lanes|=c,lr|=c}u=u.next}while(u!==null&&u!==o);a===null?s=r:a.next=l,Ct(r,e.memoizedState)||(Je=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do o=i.lane,Y.lanes|=o,lr|=o,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function cu(n){var e=ht(),t=e.queue;if(t===null)throw Error(M(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do o=n(o,s.action),s=s.next;while(s!==i);Ct(o,e.memoizedState)||(Je=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,r]}function L0(){}function $0(n,e){var t=Y,r=ht(),i=e(),o=!Ct(r.memoizedState,i);if(o&&(r.memoizedState=i,Je=!0),r=r.queue,Gf(J0.bind(null,t,r,n),[n]),r.getSnapshot!==e||o||ue!==null&&ue.memoizedState.tag&1){if(t.flags|=2048,Jo(9,B0.bind(null,t,r,i,e),void 0,null),fe===null)throw Error(M(349));sr&30||V0(t,e,i)}return i}function V0(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Y.updateQueue,e===null?(e={lastEffect:null,stores:null},Y.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function B0(n,e,t,r){e.value=t,e.getSnapshot=r,_0(e)&&W0(n)}function J0(n,e,t){return t(function(){_0(e)&&W0(n)})}function _0(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ct(n,t)}catch{return!0}}function W0(n){var e=Gt(n,1);e!==null&&vt(e,n,1,-1)}function Cp(n){var e=Mt();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:n},e.queue=n,n=n.dispatch=_N.bind(null,Y,n),[e.memoizedState,n]}function Jo(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Y.updateQueue,e===null?(e={lastEffect:null,stores:null},Y.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function U0(){return ht().memoizedState}function ol(n,e,t,r){var i=Mt();Y.flags|=n,i.memoizedState=Jo(1|e,t,void 0,r===void 0?null:r)}function sa(n,e,t,r){var i=ht();r=r===void 0?null:r;var o=void 0;if(oe!==null){var s=oe.memoizedState;if(o=s.destroy,r!==null&&qf(r,s.deps)){i.memoizedState=Jo(e,t,o,r);return}}Y.flags|=n,i.memoizedState=Jo(1|e,t,o,r)}function Np(n,e){return ol(8390656,8,n,e)}function Gf(n,e){return sa(2048,8,n,e)}function H0(n,e){return sa(4,2,n,e)}function j0(n,e){return sa(4,4,n,e)}function K0(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function q0(n,e,t){return t=t!=null?t.concat([n]):null,sa(4,4,K0.bind(null,e,n),t)}function Xf(){}function Q0(n,e){var t=ht();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&qf(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Y0(n,e){var t=ht();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&qf(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function G0(n,e,t){return sr&21?(Ct(t,e)||(t=e0(),Y.lanes|=t,lr|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Je=!0),n.memoizedState=t)}function BN(n,e){var t=U;U=t!==0&&4>t?t:4,n(!0);var r=au.transition;au.transition={};try{n(!1),e()}finally{U=t,au.transition=r}}function X0(){return ht().memoizedState}function JN(n,e,t){var r=Nn(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Z0(n))e1(e,t);else if(t=R0(n,e,t,r),t!==null){var i=Re();vt(t,n,r,i),t1(t,e,r)}}function _N(n,e,t){var r=Nn(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Z0(n))e1(e,i);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,t);if(i.hasEagerState=!0,i.eagerState=l,Ct(l,s)){var a=e.interleaved;a===null?(i.next=i,Wf(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}t=R0(n,e,i,r),t!==null&&(i=Re(),vt(t,n,r,i),t1(t,e,r))}}function Z0(n){var e=n.alternate;return n===Y||e!==null&&e===Y}function e1(n,e){uo=Vl=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function t1(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Tf(n,t)}}var Bl={readContext:dt,useCallback:ke,useContext:ke,useEffect:ke,useImperativeHandle:ke,useInsertionEffect:ke,useLayoutEffect:ke,useMemo:ke,useReducer:ke,useRef:ke,useState:ke,useDebugValue:ke,useDeferredValue:ke,useTransition:ke,useMutableSource:ke,useSyncExternalStore:ke,useId:ke,unstable_isNewReconciler:!1},WN={readContext:dt,useCallback:function(n,e){return Mt().memoizedState=[n,e===void 0?null:e],n},useContext:dt,useEffect:Np,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ol(4194308,4,K0.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ol(4194308,4,n,e)},useInsertionEffect:function(n,e){return ol(4,2,n,e)},useMemo:function(n,e){var t=Mt();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Mt();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=JN.bind(null,Y,n),[r.memoizedState,n]},useRef:function(n){var e=Mt();return n={current:n},e.memoizedState=n},useState:Cp,useDebugValue:Xf,useDeferredValue:function(n){return Mt().memoizedState=n},useTransition:function(){var n=Cp(!1),e=n[0];return n=BN.bind(null,n[1]),Mt().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Y,i=Mt();if(q){if(t===void 0)throw Error(M(407));t=t()}else{if(t=e(),fe===null)throw Error(M(349));sr&30||V0(r,e,t)}i.memoizedState=t;var o={value:t,getSnapshot:e};return i.queue=o,Np(J0.bind(null,r,o,n),[n]),r.flags|=2048,Jo(9,B0.bind(null,r,o,t,e),void 0,null),t},useId:function(){var n=Mt(),e=fe.identifierPrefix;if(q){var t=jt,r=Ht;t=(r&~(1<<32-kt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Vo++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=VN++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},UN={readContext:dt,useCallback:Q0,useContext:dt,useEffect:Gf,useImperativeHandle:q0,useInsertionEffect:H0,useLayoutEffect:j0,useMemo:Y0,useReducer:uu,useRef:U0,useState:function(){return uu(Bo)},useDebugValue:Xf,useDeferredValue:function(n){var e=ht();return G0(e,oe.memoizedState,n)},useTransition:function(){var n=uu(Bo)[0],e=ht().memoizedState;return[n,e]},useMutableSource:L0,useSyncExternalStore:$0,useId:X0,unstable_isNewReconciler:!1},HN={readContext:dt,useCallback:Q0,useContext:dt,useEffect:Gf,useImperativeHandle:q0,useInsertionEffect:H0,useLayoutEffect:j0,useMemo:Y0,useReducer:cu,useRef:U0,useState:function(){return cu(Bo)},useDebugValue:Xf,useDeferredValue:function(n){var e=ht();return oe===null?e.memoizedState=n:G0(e,oe.memoizedState,n)},useTransition:function(){var n=cu(Bo)[0],e=ht().memoizedState;return[n,e]},useMutableSource:L0,useSyncExternalStore:$0,useId:X0,unstable_isNewReconciler:!1};function si(n,e){try{var t="",r=e;do t+=wC(r),r=r.return;while(r);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:i,digest:null}}function fu(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Ec(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var jN=typeof WeakMap=="function"?WeakMap:Map;function n1(n,e,t){t=qt(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){_l||(_l=!0,Fc=r),Ec(n,e)},t}function r1(n,e,t){t=qt(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Ec(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){Ec(n,e),typeof r!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function Mp(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new jN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=sM.bind(null,n,e,t),e.then(n,n))}function Ep(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Op(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=qt(-1,1),e.tag=2,xn(t,e,1))),t.lanes|=1),n)}var KN=Zt.ReactCurrentOwner,Je=!1;function De(n,e,t,r){e.child=n===null?P0(e,null,t,r):ii(e,n.child,t,r)}function Dp(n,e,t,r,i){t=t.render;var o=e.ref;return Wr(e,i),r=Qf(n,e,t,r,o,i),t=Yf(),n!==null&&!Je?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Xt(n,e,i)):(q&&t&&Lf(e),e.flags|=1,De(n,e,r,i),e.child)}function Tp(n,e,t,r,i){if(n===null){var o=t.type;return typeof o=="function"&&!sd(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,i1(n,e,o,r,i)):(n=ul(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&i)){var s=o.memoizedProps;if(t=t.compare,t=t!==null?t:Io,t(s,r)&&n.ref===e.ref)return Xt(n,e,i)}return e.flags|=1,n=Mn(o,r),n.ref=e.ref,n.return=e,e.child=n}function i1(n,e,t,r,i){if(n!==null){var o=n.memoizedProps;if(Io(o,r)&&n.ref===e.ref)if(Je=!1,e.pendingProps=r=o,(n.lanes&i)!==0)n.flags&131072&&(Je=!0);else return e.lanes=n.lanes,Xt(n,e,i)}return Oc(n,e,t,r,i)}function o1(n,e,t){var r=e.pendingProps,i=r.children,o=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},H(zr,Ye),Ye|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,H(zr,Ye),Ye|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,H(zr,Ye),Ye|=r}else o!==null?(r=o.baseLanes|t,e.memoizedState=null):r=t,H(zr,Ye),Ye|=r;return De(n,e,i,t),e.child}function s1(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Oc(n,e,t,r,i){var o=Ue(t)?ir:Ee.current;return o=ni(e,o),Wr(e,i),t=Qf(n,e,t,r,o,i),r=Yf(),n!==null&&!Je?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Xt(n,e,i)):(q&&r&&Lf(e),e.flags|=1,De(n,e,t,i),e.child)}function Rp(n,e,t,r,i){if(Ue(t)){var o=!0;bl(e)}else o=!1;if(Wr(e,i),e.stateNode===null)sl(n,e),I0(e,t,r),Mc(e,t,r,i),r=!0;else if(n===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,u=t.contextType;typeof u=="object"&&u!==null?u=dt(u):(u=Ue(t)?ir:Ee.current,u=ni(e,u));var c=t.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==u)&&vp(e,s,r,u),on=!1;var d=e.memoizedState;s.state=d,Ll(e,r,s,i),a=e.memoizedState,l!==r||d!==a||We.current||on?(typeof c=="function"&&(Nc(e,t,c,r),a=e.memoizedState),(l=on||kp(e,t,l,r,d,a,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,A0(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:gt(e.type,l),s.props=u,f=e.pendingProps,d=s.context,a=t.contextType,typeof a=="object"&&a!==null?a=dt(a):(a=Ue(t)?ir:Ee.current,a=ni(e,a));var p=t.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||d!==a)&&vp(e,s,r,a),on=!1,d=e.memoizedState,s.state=d,Ll(e,r,s,i);var h=e.memoizedState;l!==f||d!==h||We.current||on?(typeof p=="function"&&(Nc(e,t,p,r),h=e.memoizedState),(u=on||kp(e,t,u,r,d,h,a)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,h,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,h,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),s.props=r,s.state=h,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||l===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return Dc(n,e,t,r,o,i)}function Dc(n,e,t,r,i,o){s1(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&mp(e,t,!1),Xt(n,e,o);r=e.stateNode,KN.current=e;var l=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=ii(e,n.child,null,o),e.child=ii(e,null,l,o)):De(n,e,l,o),e.memoizedState=r.state,i&&mp(e,t,!0),e.child}function l1(n){var e=n.stateNode;e.pendingContext?pp(n,e.pendingContext,e.pendingContext!==e.context):e.context&&pp(n,e.context,!1),Hf(n,e.containerInfo)}function Ap(n,e,t,r,i){return ri(),Vf(i),e.flags|=256,De(n,e,t,r),e.child}var Tc={dehydrated:null,treeContext:null,retryLane:0};function Rc(n){return{baseLanes:n,cachePool:null,transitions:null}}function a1(n,e,t){var r=e.pendingProps,i=Q.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=n!==null&&n.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),H(Q,i&1),n===null)return xc(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ua(s,r,0,null),n=tr(n,r,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Rc(t),e.memoizedState=Tc,n):Zf(e,s));if(i=n.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return qN(n,e,s,r,l,i,t);if(o){o=r.fallback,s=e.mode,i=n.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Mn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Mn(l,o):(o=tr(o,s,t,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=n.child.memoizedState,s=s===null?Rc(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=n.childLanes&~t,e.memoizedState=Tc,r}return o=n.child,n=o.sibling,r=Mn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Zf(n,e){return e=ua({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ds(n,e,t,r){return r!==null&&Vf(r),ii(e,n.child,null,t),n=Zf(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function qN(n,e,t,r,i,o,s){if(t)return e.flags&256?(e.flags&=-257,r=fu(Error(M(422))),Ds(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ua({mode:"visible",children:r.children},i,0,null),o=tr(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&ii(e,n.child,null,s),e.child.memoizedState=Rc(s),e.memoizedState=Tc,o);if(!(e.mode&1))return Ds(n,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(M(419)),r=fu(o,r,void 0),Ds(n,e,s,r)}if(l=(s&n.childLanes)!==0,Je||l){if(r=fe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Gt(n,i),vt(r,n,i,-1))}return od(),r=fu(Error(M(421))),Ds(n,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=lM.bind(null,n),i._reactRetry=e,null):(n=o.treeContext,Xe=vn(i.nextSibling),et=e,q=!0,wt=null,n!==null&&(ot[st++]=Ht,ot[st++]=jt,ot[st++]=or,Ht=n.id,jt=n.overflow,or=e),e=Zf(e,r.children),e.flags|=4096,e)}function bp(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Cc(n.return,e,t)}function du(n,e,t,r,i){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i)}function u1(n,e,t){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(De(n,e,r.children,t),r=Q.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&bp(n,t,e);else if(n.tag===19)bp(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(H(Q,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&$l(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),du(e,!1,i,t,o);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&$l(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}du(e,!0,t,null,o);break;case"together":du(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sl(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Xt(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),lr|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(M(153));if(e.child!==null){for(n=e.child,t=Mn(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Mn(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function QN(n,e,t){switch(e.tag){case 3:l1(e),ri();break;case 5:F0(e);break;case 1:Ue(e.type)&&bl(e);break;case 4:Hf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;H(Pl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(H(Q,Q.current&1),e.flags|=128,null):t&e.child.childLanes?a1(n,e,t):(H(Q,Q.current&1),n=Xt(n,e,t),n!==null?n.sibling:null);H(Q,Q.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return u1(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),H(Q,Q.current),r)break;return null;case 22:case 23:return e.lanes=0,o1(n,e,t)}return Xt(n,e,t)}var c1,Ac,f1,d1;c1=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Ac=function(){};f1=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Qn(At.current);var o=null;switch(t){case"input":i=Zu(n,i),r=Zu(n,r),o=[];break;case"select":i=G({},i,{value:void 0}),r=G({},r,{value:void 0}),o=[];break;case"textarea":i=nc(n,i),r=nc(n,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Rl)}ic(t,r);var s;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Eo.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(t||(t={}),t[s]=a[s])}else t||(o||(o=[]),o.push(u,t)),t=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Eo.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&j("scroll",n),o||l===a||(o=[])):(o=o||[]).push(u,a))}t&&(o=o||[]).push("style",t);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};d1=function(n,e,t,r){t!==r&&(e.flags|=4)};function Ni(n,e){if(!q)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function ve(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function YN(n,e,t){var r=e.pendingProps;switch($f(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(e),null;case 1:return Ue(e.type)&&Al(),ve(e),null;case 3:return r=e.stateNode,oi(),K(We),K(Ee),Kf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Es(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wt!==null&&(Vc(wt),wt=null))),Ac(n,e),ve(e),null;case 5:jf(e);var i=Qn($o.current);if(t=e.type,n!==null&&e.stateNode!=null)f1(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return ve(e),null}if(n=Qn(At.current),Es(e)){r=e.stateNode,t=e.type;var o=e.memoizedProps;switch(r[Et]=e,r[Fo]=o,n=(e.mode&1)!==0,t){case"dialog":j("cancel",r),j("close",r);break;case"iframe":case"object":case"embed":j("load",r);break;case"video":case"audio":for(i=0;i<Xi.length;i++)j(Xi[i],r);break;case"source":j("error",r);break;case"img":case"image":case"link":j("error",r),j("load",r);break;case"details":j("toggle",r);break;case"input":Jh(r,o),j("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},j("invalid",r);break;case"textarea":Wh(r,o),j("invalid",r)}ic(t,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Ms(r.textContent,l,n),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Ms(r.textContent,l,n),i=["children",""+l]):Eo.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&j("scroll",r)}switch(t){case"input":ys(r),_h(r,o,!0);break;case"textarea":ys(r),Uh(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Rl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Vy(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[Et]=e,n[Fo]=r,c1(n,e,!1,!1),e.stateNode=n;e:{switch(s=oc(t,r),t){case"dialog":j("cancel",n),j("close",n),i=r;break;case"iframe":case"object":case"embed":j("load",n),i=r;break;case"video":case"audio":for(i=0;i<Xi.length;i++)j(Xi[i],n);i=r;break;case"source":j("error",n),i=r;break;case"img":case"image":case"link":j("error",n),j("load",n),i=r;break;case"details":j("toggle",n),i=r;break;case"input":Jh(n,r),i=Zu(n,r),j("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=G({},r,{value:void 0}),j("invalid",n);break;case"textarea":Wh(n,r),i=nc(n,r),j("invalid",n);break;default:i=r}ic(t,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?_y(n,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&By(n,a)):o==="children"?typeof a=="string"?(t!=="textarea"||a!=="")&&Oo(n,a):typeof a=="number"&&Oo(n,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Eo.hasOwnProperty(o)?a!=null&&o==="onScroll"&&j("scroll",n):a!=null&&Cf(n,o,a,s))}switch(t){case"input":ys(n),_h(n,r,!1);break;case"textarea":ys(n),Uh(n);break;case"option":r.value!=null&&n.setAttribute("value",""+On(r.value));break;case"select":n.multiple=!!r.multiple,o=r.value,o!=null?Vr(n,!!r.multiple,o,!1):r.defaultValue!=null&&Vr(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Rl)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ve(e),null;case 6:if(n&&e.stateNode!=null)d1(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(t=Qn($o.current),Qn(At.current),Es(e)){if(r=e.stateNode,t=e.memoizedProps,r[Et]=e,(o=r.nodeValue!==t)&&(n=et,n!==null))switch(n.tag){case 3:Ms(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ms(r.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Et]=e,e.stateNode=r}return ve(e),null;case 13:if(K(Q),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(q&&Xe!==null&&e.mode&1&&!(e.flags&128))T0(),ri(),e.flags|=98560,o=!1;else if(o=Es(e),r!==null&&r.dehydrated!==null){if(n===null){if(!o)throw Error(M(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(M(317));o[Et]=e}else ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ve(e),o=!1}else wt!==null&&(Vc(wt),wt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Q.current&1?se===0&&(se=3):od())),e.updateQueue!==null&&(e.flags|=4),ve(e),null);case 4:return oi(),Ac(n,e),n===null&&zo(e.stateNode.containerInfo),ve(e),null;case 10:return _f(e.type._context),ve(e),null;case 17:return Ue(e.type)&&Al(),ve(e),null;case 19:if(K(Q),o=e.memoizedState,o===null)return ve(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ni(o,!1);else{if(se!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=$l(n),s!==null){for(e.flags|=128,Ni(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)o=t,n=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,n=s.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return H(Q,Q.current&1|2),e.child}n=n.sibling}o.tail!==null&&te()>li&&(e.flags|=128,r=!0,Ni(o,!1),e.lanes=4194304)}else{if(!r)if(n=$l(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ni(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!q)return ve(e),null}else 2*te()-o.renderingStartTime>li&&t!==1073741824&&(e.flags|=128,r=!0,Ni(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(t=o.last,t!==null?t.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=te(),e.sibling=null,t=Q.current,H(Q,r?t&1|2:t&1),e):(ve(e),null);case 22:case 23:return id(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(ve(e),e.subtreeFlags&6&&(e.flags|=8192)):ve(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function GN(n,e){switch($f(e),e.tag){case 1:return Ue(e.type)&&Al(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return oi(),K(We),K(Ee),Kf(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return jf(e),null;case 13:if(K(Q),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(M(340));ri()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return K(Q),null;case 4:return oi(),null;case 10:return _f(e.type._context),null;case 22:case 23:return id(),null;case 24:return null;default:return null}}var Ts=!1,Ce=!1,XN=typeof WeakSet=="function"?WeakSet:Set,D=null;function Ir(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){X(n,e,r)}else t.current=null}function bc(n,e,t){try{t()}catch(r){X(n,e,r)}}var Ip=!1;function ZN(n,e){if(mc=Ol,n=g0(),Ff(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var s=0,l=-1,a=-1,u=0,c=0,f=n,d=null;t:for(;;){for(var p;f!==t||i!==0&&f.nodeType!==3||(l=s+i),f!==o||r!==0&&f.nodeType!==3||(a=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===n)break t;if(d===t&&++u===i&&(l=s),d===o&&++c===r&&(a=s),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}t=l===-1||a===-1?null:{start:l,end:a}}else t=null}t=t||{start:0,end:0}}else t=null;for(gc={focusedElem:n,selectionRange:t},Ol=!1,D=e;D!==null;)if(e=D,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,D=n;else for(;D!==null;){e=D;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var m=h.memoizedProps,w=h.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:gt(e.type,m),w);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(C){X(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}return h=Ip,Ip=!1,h}function co(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var o=i.destroy;i.destroy=void 0,o!==void 0&&bc(e,t,o)}i=i.next}while(i!==r)}}function la(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Ic(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function h1(n){var e=n.alternate;e!==null&&(n.alternate=null,h1(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Et],delete e[Fo],delete e[wc],delete e[PN],delete e[FN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function p1(n){return n.tag===5||n.tag===3||n.tag===4}function zp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||p1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Rl));else if(r!==4&&(n=n.child,n!==null))for(zc(n,e,t),n=n.sibling;n!==null;)zc(n,e,t),n=n.sibling}function Pc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Pc(n,e,t),n=n.sibling;n!==null;)Pc(n,e,t),n=n.sibling}var he=null,yt=!1;function en(n,e,t){for(t=t.child;t!==null;)m1(n,e,t),t=t.sibling}function m1(n,e,t){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Zl,t)}catch{}switch(t.tag){case 5:Ce||Ir(t,e);case 6:var r=he,i=yt;he=null,en(n,e,t),he=r,yt=i,he!==null&&(yt?(n=he,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):he.removeChild(t.stateNode));break;case 18:he!==null&&(yt?(n=he,t=t.stateNode,n.nodeType===8?ou(n.parentNode,t):n.nodeType===1&&ou(n,t),Ao(n)):ou(he,t.stateNode));break;case 4:r=he,i=yt,he=t.stateNode.containerInfo,yt=!0,en(n,e,t),he=r,yt=i;break;case 0:case 11:case 14:case 15:if(!Ce&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&bc(t,e,s),i=i.next}while(i!==r)}en(n,e,t);break;case 1:if(!Ce&&(Ir(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(l){X(t,e,l)}en(n,e,t);break;case 21:en(n,e,t);break;case 22:t.mode&1?(Ce=(r=Ce)||t.memoizedState!==null,en(n,e,t),Ce=r):en(n,e,t);break;default:en(n,e,t)}}function Pp(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new XN),e.forEach(function(r){var i=aM.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function mt(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var o=n,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:he=l.stateNode,yt=!1;break e;case 3:he=l.stateNode.containerInfo,yt=!0;break e;case 4:he=l.stateNode.containerInfo,yt=!0;break e}l=l.return}if(he===null)throw Error(M(160));m1(o,s,i),he=null,yt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){X(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)g1(e,n),e=e.sibling}function g1(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(mt(e,n),Nt(n),r&4){try{co(3,n,n.return),la(3,n)}catch(m){X(n,n.return,m)}try{co(5,n,n.return)}catch(m){X(n,n.return,m)}}break;case 1:mt(e,n),Nt(n),r&512&&t!==null&&Ir(t,t.return);break;case 5:if(mt(e,n),Nt(n),r&512&&t!==null&&Ir(t,t.return),n.flags&32){var i=n.stateNode;try{Oo(i,"")}catch(m){X(n,n.return,m)}}if(r&4&&(i=n.stateNode,i!=null)){var o=n.memoizedProps,s=t!==null?t.memoizedProps:o,l=n.type,a=n.updateQueue;if(n.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Ly(i,o),oc(l,s);var u=oc(l,o);for(s=0;s<a.length;s+=2){var c=a[s],f=a[s+1];c==="style"?_y(i,f):c==="dangerouslySetInnerHTML"?By(i,f):c==="children"?Oo(i,f):Cf(i,c,f,u)}switch(l){case"input":ec(i,o);break;case"textarea":$y(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Vr(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?Vr(i,!!o.multiple,o.defaultValue,!0):Vr(i,!!o.multiple,o.multiple?[]:"",!1))}i[Fo]=o}catch(m){X(n,n.return,m)}}break;case 6:if(mt(e,n),Nt(n),r&4){if(n.stateNode===null)throw Error(M(162));i=n.stateNode,o=n.memoizedProps;try{i.nodeValue=o}catch(m){X(n,n.return,m)}}break;case 3:if(mt(e,n),Nt(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Ao(e.containerInfo)}catch(m){X(n,n.return,m)}break;case 4:mt(e,n),Nt(n);break;case 13:mt(e,n),Nt(n),i=n.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(nd=te())),r&4&&Pp(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(Ce=(u=Ce)||c,mt(e,n),Ce=u):mt(e,n),Nt(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(D=n,c=n.child;c!==null;){for(f=D=c;D!==null;){switch(d=D,p=d.child,d.tag){case 0:case 11:case 14:case 15:co(4,d,d.return);break;case 1:Ir(d,d.return);var h=d.stateNode;if(typeof h.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(m){X(r,t,m)}}break;case 5:Ir(d,d.return);break;case 22:if(d.memoizedState!==null){Lp(f);continue}}p!==null?(p.return=d,D=p):Lp(f)}c=c.sibling}e:for(c=null,f=n;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,a=f.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Jy("display",s))}catch(m){X(n,n.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){X(n,n.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mt(e,n),Nt(n),r&4&&Pp(n);break;case 21:break;default:mt(e,n),Nt(n)}}function Nt(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(p1(t)){var r=t;break e}t=t.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Oo(i,""),r.flags&=-33);var o=zp(n);Pc(n,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=zp(n);zc(n,l,s);break;default:throw Error(M(161))}}catch(a){X(n,n.return,a)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function eM(n,e,t){D=n,y1(n)}function y1(n,e,t){for(var r=(n.mode&1)!==0;D!==null;){var i=D,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ts;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ce;l=Ts;var u=Ce;if(Ts=s,(Ce=a)&&!u)for(D=i;D!==null;)s=D,a=s.child,s.tag===22&&s.memoizedState!==null?$p(i):a!==null?(a.return=s,D=a):$p(i);for(;o!==null;)D=o,y1(o),o=o.sibling;D=i,Ts=l,Ce=u}Fp(n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,D=o):Fp(n)}}function Fp(n){for(;D!==null;){var e=D;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ce||la(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ce)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:gt(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&wp(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}wp(e,s,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&t.focus();break;case"img":a.src&&(t.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Ao(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ce||e.flags&512&&Ic(e)}catch(d){X(e,e.return,d)}}if(e===n){D=null;break}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}}function Lp(n){for(;D!==null;){var e=D;if(e===n){D=null;break}var t=e.sibling;if(t!==null){t.return=e.return,D=t;break}D=e.return}}function $p(n){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{la(4,e)}catch(a){X(e,t,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){X(e,i,a)}}var o=e.return;try{Ic(e)}catch(a){X(e,o,a)}break;case 5:var s=e.return;try{Ic(e)}catch(a){X(e,s,a)}}}catch(a){X(e,e.return,a)}if(e===n){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var tM=Math.ceil,Jl=Zt.ReactCurrentDispatcher,ed=Zt.ReactCurrentOwner,ft=Zt.ReactCurrentBatchConfig,B=0,fe=null,re=null,ye=0,Ye=0,zr=bn(0),se=0,_o=null,lr=0,aa=0,td=0,fo=null,Fe=null,nd=0,li=1/0,_t=null,_l=!1,Fc=null,Cn=null,Rs=!1,mn=null,Wl=0,ho=0,Lc=null,ll=-1,al=0;function Re(){return B&6?te():ll!==-1?ll:ll=te()}function Nn(n){return n.mode&1?B&2&&ye!==0?ye&-ye:$N.transition!==null?(al===0&&(al=e0()),al):(n=U,n!==0||(n=window.event,n=n===void 0?16:l0(n.type)),n):1}function vt(n,e,t,r){if(50<ho)throw ho=0,Lc=null,Error(M(185));es(n,t,r),(!(B&2)||n!==fe)&&(n===fe&&(!(B&2)&&(aa|=t),se===4&&un(n,ye)),He(n,r),t===1&&B===0&&!(e.mode&1)&&(li=te()+500,ia&&In()))}function He(n,e){var t=n.callbackNode;$C(n,e);var r=El(n,n===fe?ye:0);if(r===0)t!==null&&Kh(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Kh(t),e===1)n.tag===0?LN(Vp.bind(null,n)):E0(Vp.bind(null,n)),IN(function(){!(B&6)&&In()}),t=null;else{switch(t0(r)){case 1:t=Df;break;case 4:t=Xy;break;case 16:t=Ml;break;case 536870912:t=Zy;break;default:t=Ml}t=M1(t,S1.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function S1(n,e){if(ll=-1,al=0,B&6)throw Error(M(327));var t=n.callbackNode;if(Ur()&&n.callbackNode!==t)return null;var r=El(n,n===fe?ye:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Ul(n,r);else{e=r;var i=B;B|=2;var o=k1();(fe!==n||ye!==e)&&(_t=null,li=te()+500,er(n,e));do try{iM();break}catch(l){w1(n,l)}while(!0);Jf(),Jl.current=o,B=i,re!==null?e=0:(fe=null,ye=0,e=se)}if(e!==0){if(e===2&&(i=cc(n),i!==0&&(r=i,e=$c(n,i))),e===1)throw t=_o,er(n,0),un(n,r),He(n,te()),t;if(e===6)un(n,r);else{if(i=n.current.alternate,!(r&30)&&!nM(i)&&(e=Ul(n,r),e===2&&(o=cc(n),o!==0&&(r=o,e=$c(n,o))),e===1))throw t=_o,er(n,0),un(n,r),He(n,te()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:_n(n,Fe,_t);break;case 3:if(un(n,r),(r&130023424)===r&&(e=nd+500-te(),10<e)){if(El(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Re(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Sc(_n.bind(null,n,Fe,_t),e);break}_n(n,Fe,_t);break;case 4:if(un(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var s=31-kt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tM(r/1960))-r,10<r){n.timeoutHandle=Sc(_n.bind(null,n,Fe,_t),r);break}_n(n,Fe,_t);break;case 5:_n(n,Fe,_t);break;default:throw Error(M(329))}}}return He(n,te()),n.callbackNode===t?S1.bind(null,n):null}function $c(n,e){var t=fo;return n.current.memoizedState.isDehydrated&&(er(n,e).flags|=256),n=Ul(n,e),n!==2&&(e=Fe,Fe=t,e!==null&&Vc(e)),n}function Vc(n){Fe===null?Fe=n:Fe.push.apply(Fe,n)}function nM(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],o=i.getSnapshot;i=i.value;try{if(!Ct(o(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function un(n,e){for(e&=~td,e&=~aa,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-kt(e),r=1<<t;n[t]=-1,e&=~r}}function Vp(n){if(B&6)throw Error(M(327));Ur();var e=El(n,0);if(!(e&1))return He(n,te()),null;var t=Ul(n,e);if(n.tag!==0&&t===2){var r=cc(n);r!==0&&(e=r,t=$c(n,r))}if(t===1)throw t=_o,er(n,0),un(n,e),He(n,te()),t;if(t===6)throw Error(M(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,_n(n,Fe,_t),He(n,te()),null}function rd(n,e){var t=B;B|=1;try{return n(e)}finally{B=t,B===0&&(li=te()+500,ia&&In())}}function ar(n){mn!==null&&mn.tag===0&&!(B&6)&&Ur();var e=B;B|=1;var t=ft.transition,r=U;try{if(ft.transition=null,U=1,n)return n()}finally{U=r,ft.transition=t,B=e,!(B&6)&&In()}}function id(){Ye=zr.current,K(zr)}function er(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,bN(t)),re!==null)for(t=re.return;t!==null;){var r=t;switch($f(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Al();break;case 3:oi(),K(We),K(Ee),Kf();break;case 5:jf(r);break;case 4:oi();break;case 13:K(Q);break;case 19:K(Q);break;case 10:_f(r.type._context);break;case 22:case 23:id()}t=t.return}if(fe=n,re=n=Mn(n.current,null),ye=Ye=e,se=0,_o=null,td=aa=lr=0,Fe=fo=null,qn!==null){for(e=0;e<qn.length;e++)if(t=qn[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,o=t.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}t.pending=r}qn=null}return n}function w1(n,e){do{var t=re;try{if(Jf(),il.current=Bl,Vl){for(var r=Y.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vl=!1}if(sr=0,ue=oe=Y=null,uo=!1,Vo=0,ed.current=null,t===null||t.return===null){se=1,_o=e,re=null;break}e:{var o=n,s=t.return,l=t,a=e;if(e=ye,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Ep(s);if(p!==null){p.flags&=-257,Op(p,s,l,o,e),p.mode&1&&Mp(o,u,e),e=p,a=u;var h=e.updateQueue;if(h===null){var m=new Set;m.add(a),e.updateQueue=m}else h.add(a);break e}else{if(!(e&1)){Mp(o,u,e),od();break e}a=Error(M(426))}}else if(q&&l.mode&1){var w=Ep(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Op(w,s,l,o,e),Vf(si(a,l));break e}}o=a=si(a,l),se!==4&&(se=2),fo===null?fo=[o]:fo.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=n1(o,a,e);Sp(o,g);break e;case 1:l=a;var y=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Cn===null||!Cn.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var C=r1(o,l,e);Sp(o,C);break e}}o=o.return}while(o!==null)}x1(t)}catch(N){e=N,re===t&&t!==null&&(re=t=t.return);continue}break}while(!0)}function k1(){var n=Jl.current;return Jl.current=Bl,n===null?Bl:n}function od(){(se===0||se===3||se===2)&&(se=4),fe===null||!(lr&268435455)&&!(aa&268435455)||un(fe,ye)}function Ul(n,e){var t=B;B|=2;var r=k1();(fe!==n||ye!==e)&&(_t=null,er(n,e));do try{rM();break}catch(i){w1(n,i)}while(!0);if(Jf(),B=t,Jl.current=r,re!==null)throw Error(M(261));return fe=null,ye=0,se}function rM(){for(;re!==null;)v1(re)}function iM(){for(;re!==null&&!TC();)v1(re)}function v1(n){var e=N1(n.alternate,n,Ye);n.memoizedProps=n.pendingProps,e===null?x1(n):re=e,ed.current=null}function x1(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=GN(t,e),t!==null){t.flags&=32767,re=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{se=6,re=null;return}}else if(t=YN(t,e,Ye),t!==null){re=t;return}if(e=e.sibling,e!==null){re=e;return}re=e=n}while(e!==null);se===0&&(se=5)}function _n(n,e,t){var r=U,i=ft.transition;try{ft.transition=null,U=1,oM(n,e,t,r)}finally{ft.transition=i,U=r}return null}function oM(n,e,t,r){do Ur();while(mn!==null);if(B&6)throw Error(M(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(M(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(VC(n,o),n===fe&&(re=fe=null,ye=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Rs||(Rs=!0,M1(Ml,function(){return Ur(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=ft.transition,ft.transition=null;var s=U;U=1;var l=B;B|=4,ed.current=null,ZN(n,t),g1(t,n),MN(gc),Ol=!!mc,gc=mc=null,n.current=t,eM(t),RC(),B=l,U=s,ft.transition=o}else n.current=t;if(Rs&&(Rs=!1,mn=n,Wl=i),o=n.pendingLanes,o===0&&(Cn=null),IC(t.stateNode),He(n,te()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(_l)throw _l=!1,n=Fc,Fc=null,n;return Wl&1&&n.tag!==0&&Ur(),o=n.pendingLanes,o&1?n===Lc?ho++:(ho=0,Lc=n):ho=0,In(),null}function Ur(){if(mn!==null){var n=t0(Wl),e=ft.transition,t=U;try{if(ft.transition=null,U=16>n?16:n,mn===null)var r=!1;else{if(n=mn,mn=null,Wl=0,B&6)throw Error(M(331));var i=B;for(B|=4,D=n.current;D!==null;){var o=D,s=o.child;if(D.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(D=u;D!==null;){var c=D;switch(c.tag){case 0:case 11:case 15:co(8,c,o)}var f=c.child;if(f!==null)f.return=c,D=f;else for(;D!==null;){c=D;var d=c.sibling,p=c.return;if(h1(c),c===u){D=null;break}if(d!==null){d.return=p,D=d;break}D=p}}}var h=o.alternate;if(h!==null){var m=h.child;if(m!==null){h.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}D=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,D=s;else e:for(;D!==null;){if(o=D,o.flags&2048)switch(o.tag){case 0:case 11:case 15:co(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,D=g;break e}D=o.return}}var y=n.current;for(D=y;D!==null;){s=D;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,D=S;else e:for(s=y;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:la(9,l)}}catch(N){X(l,l.return,N)}if(l===s){D=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,D=C;break e}D=l.return}}if(B=i,In(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Zl,n)}catch{}r=!0}return r}finally{U=t,ft.transition=e}}return!1}function Bp(n,e,t){e=si(t,e),e=n1(n,e,1),n=xn(n,e,1),e=Re(),n!==null&&(es(n,1,e),He(n,e))}function X(n,e,t){if(n.tag===3)Bp(n,n,t);else for(;e!==null;){if(e.tag===3){Bp(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cn===null||!Cn.has(r))){n=si(t,n),n=r1(e,n,1),e=xn(e,n,1),n=Re(),e!==null&&(es(e,1,n),He(e,n));break}}e=e.return}}function sM(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Re(),n.pingedLanes|=n.suspendedLanes&t,fe===n&&(ye&t)===t&&(se===4||se===3&&(ye&130023424)===ye&&500>te()-nd?er(n,0):td|=t),He(n,e)}function C1(n,e){e===0&&(n.mode&1?(e=ks,ks<<=1,!(ks&130023424)&&(ks=4194304)):e=1);var t=Re();n=Gt(n,e),n!==null&&(es(n,e,t),He(n,t))}function lM(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),C1(n,t)}function aM(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),C1(n,t)}var N1;N1=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||We.current)Je=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Je=!1,QN(n,e,t);Je=!!(n.flags&131072)}else Je=!1,q&&e.flags&1048576&&O0(e,zl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sl(n,e),n=e.pendingProps;var i=ni(e,Ee.current);Wr(e,t),i=Qf(null,e,r,n,i,t);var o=Yf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(r)?(o=!0,bl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uf(e),i.updater=oa,e.stateNode=i,i._reactInternals=e,Mc(e,r,n,t),e=Dc(null,e,r,!0,o,t)):(e.tag=0,q&&o&&Lf(e),De(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(sl(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cM(r),n=gt(r,n),i){case 0:e=Oc(null,e,r,n,t);break e;case 1:e=Rp(null,e,r,n,t);break e;case 11:e=Dp(null,e,r,n,t);break e;case 14:e=Tp(null,e,r,gt(r.type,n),t);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gt(r,i),Oc(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gt(r,i),Rp(n,e,r,i,t);case 3:e:{if(l1(e),n===null)throw Error(M(387));r=e.pendingProps,o=e.memoizedState,i=o.element,A0(n,e),Ll(e,r,null,t);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=si(Error(M(423)),e),e=Ap(n,e,r,t,i);break e}else if(r!==i){i=si(Error(M(424)),e),e=Ap(n,e,r,t,i);break e}else for(Xe=vn(e.stateNode.containerInfo.firstChild),et=e,q=!0,wt=null,t=P0(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ri(),r===i){e=Xt(n,e,t);break e}De(n,e,r,t)}e=e.child}return e;case 5:return F0(e),n===null&&xc(e),r=e.type,i=e.pendingProps,o=n!==null?n.memoizedProps:null,s=i.children,yc(r,i)?s=null:o!==null&&yc(r,o)&&(e.flags|=32),s1(n,e),De(n,e,s,t),e.child;case 6:return n===null&&xc(e),null;case 13:return a1(n,e,t);case 4:return Hf(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=ii(e,null,r,t):De(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gt(r,i),Dp(n,e,r,i,t);case 7:return De(n,e,e.pendingProps,t),e.child;case 8:return De(n,e,e.pendingProps.children,t),e.child;case 12:return De(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,H(Pl,r._currentValue),r._currentValue=s,o!==null)if(Ct(o.value,s)){if(o.children===i.children&&!We.current){e=Xt(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=qt(-1,t&-t),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Cc(o.return,t,e),l.lanes|=t;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(M(341));s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Cc(s,t,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}De(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Wr(e,t),i=dt(i),r=r(i),e.flags|=1,De(n,e,r,t),e.child;case 14:return r=e.type,i=gt(r,e.pendingProps),i=gt(r.type,i),Tp(n,e,r,i,t);case 15:return i1(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gt(r,i),sl(n,e),e.tag=1,Ue(r)?(n=!0,bl(e)):n=!1,Wr(e,t),I0(e,r,i),Mc(e,r,i,t),Dc(null,e,r,!0,n,t);case 19:return u1(n,e,t);case 22:return o1(n,e,t)}throw Error(M(156,e.tag))};function M1(n,e){return Gy(n,e)}function uM(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(n,e,t,r){return new uM(n,e,t,r)}function sd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cM(n){if(typeof n=="function")return sd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Mf)return 11;if(n===Ef)return 14}return 2}function Mn(n,e){var t=n.alternate;return t===null?(t=ut(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ul(n,e,t,r,i,o){var s=2;if(r=n,typeof n=="function")sd(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case Nr:return tr(t.children,i,o,e);case Nf:s=8,i|=8;break;case Qu:return n=ut(12,t,e,i|2),n.elementType=Qu,n.lanes=o,n;case Yu:return n=ut(13,t,e,i),n.elementType=Yu,n.lanes=o,n;case Gu:return n=ut(19,t,e,i),n.elementType=Gu,n.lanes=o,n;case zy:return ua(t,i,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case by:s=10;break e;case Iy:s=9;break e;case Mf:s=11;break e;case Ef:s=14;break e;case rn:s=16,r=null;break e}throw Error(M(130,n==null?n:typeof n,""))}return e=ut(s,t,e,i),e.elementType=n,e.type=r,e.lanes=o,e}function tr(n,e,t,r){return n=ut(7,n,r,e),n.lanes=t,n}function ua(n,e,t,r){return n=ut(22,n,r,e),n.elementType=zy,n.lanes=t,n.stateNode={isHidden:!1},n}function hu(n,e,t){return n=ut(6,n,null,e),n.lanes=t,n}function pu(n,e,t){return e=ut(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function fM(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qa(0),this.expirationTimes=qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ld(n,e,t,r,i,o,s,l,a){return n=new fM(n,e,t,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ut(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uf(o),n}function dM(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cr,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function E1(n){if(!n)return Dn;n=n._reactInternals;e:{if(dr(n)!==n||n.tag!==1)throw Error(M(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(n.tag===1){var t=n.type;if(Ue(t))return M0(n,t,e)}return e}function O1(n,e,t,r,i,o,s,l,a){return n=ld(t,r,!0,n,i,o,s,l,a),n.context=E1(null),t=n.current,r=Re(),i=Nn(t),o=qt(r,i),o.callback=e??null,xn(t,o,i),n.current.lanes=i,es(n,i,r),He(n,r),n}function ca(n,e,t,r){var i=e.current,o=Re(),s=Nn(i);return t=E1(t),e.context===null?e.context=t:e.pendingContext=t,e=qt(o,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=xn(i,e,s),n!==null&&(vt(n,i,s,o),rl(n,i,s)),s}function Hl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Jp(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function ad(n,e){Jp(n,e),(n=n.alternate)&&Jp(n,e)}function hM(){return null}var D1=typeof reportError=="function"?reportError:function(n){console.error(n)};function ud(n){this._internalRoot=n}fa.prototype.render=ud.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(M(409));ca(n,e,null,null)};fa.prototype.unmount=ud.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ar(function(){ca(null,n,null,null)}),e[Yt]=null}};function fa(n){this._internalRoot=n}fa.prototype.unstable_scheduleHydration=function(n){if(n){var e=i0();n={blockedOn:null,target:n,priority:e};for(var t=0;t<an.length&&e!==0&&e<an[t].priority;t++);an.splice(t,0,n),t===0&&s0(n)}};function cd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function da(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function _p(){}function pM(n,e,t,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Hl(s);o.call(u)}}var s=O1(e,r,n,0,null,!1,!1,"",_p);return n._reactRootContainer=s,n[Yt]=s.current,zo(n.nodeType===8?n.parentNode:n),ar(),s}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Hl(a);l.call(u)}}var a=ld(n,0,!1,null,null,!1,!1,"",_p);return n._reactRootContainer=a,n[Yt]=a.current,zo(n.nodeType===8?n.parentNode:n),ar(function(){ca(e,a,t,r)}),a}function ha(n,e,t,r,i){var o=t._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=Hl(s);l.call(a)}}ca(e,s,n,i)}else s=pM(t,e,n,i,r);return Hl(s)}n0=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Gi(e.pendingLanes);t!==0&&(Tf(e,t|1),He(e,te()),!(B&6)&&(li=te()+500,In()))}break;case 13:ar(function(){var r=Gt(n,1);if(r!==null){var i=Re();vt(r,n,1,i)}}),ad(n,1)}};Rf=function(n){if(n.tag===13){var e=Gt(n,134217728);if(e!==null){var t=Re();vt(e,n,134217728,t)}ad(n,134217728)}};r0=function(n){if(n.tag===13){var e=Nn(n),t=Gt(n,e);if(t!==null){var r=Re();vt(t,n,e,r)}ad(n,e)}};i0=function(){return U};o0=function(n,e){var t=U;try{return U=n,e()}finally{U=t}};lc=function(n,e,t){switch(e){case"input":if(ec(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=ra(r);if(!i)throw Error(M(90));Fy(r),ec(r,i)}}}break;case"textarea":$y(n,t);break;case"select":e=t.value,e!=null&&Vr(n,!!t.multiple,e,!1)}};Hy=rd;jy=ar;var mM={usingClientEntryPoint:!1,Events:[ns,Dr,ra,Wy,Uy,rd]},Mi={findFiberByHostInstance:Kn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},gM={bundleType:Mi.bundleType,version:Mi.version,rendererPackageName:Mi.rendererPackageName,rendererConfig:Mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Qy(n),n===null?null:n.stateNode},findFiberByHostInstance:Mi.findFiberByHostInstance||hM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var As=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!As.isDisabled&&As.supportsFiber)try{Zl=As.inject(gM),Rt=As}catch{}}nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mM;nt.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cd(e))throw Error(M(200));return dM(n,e,null,t)};nt.createRoot=function(n,e){if(!cd(n))throw Error(M(299));var t=!1,r="",i=D1;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ld(n,1,!1,null,null,t,!1,r,i),n[Yt]=e.current,zo(n.nodeType===8?n.parentNode:n),new ud(e)};nt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(M(188)):(n=Object.keys(n).join(","),Error(M(268,n)));return n=Qy(e),n=n===null?null:n.stateNode,n};nt.flushSync=function(n){return ar(n)};nt.hydrate=function(n,e,t){if(!da(e))throw Error(M(200));return ha(null,n,e,!0,t)};nt.hydrateRoot=function(n,e,t){if(!cd(n))throw Error(M(405));var r=t!=null&&t.hydratedSources||null,i=!1,o="",s=D1;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=O1(e,null,n,1,t??null,i,!1,o,s),n[Yt]=e.current,zo(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new fa(e)};nt.render=function(n,e,t){if(!da(e))throw Error(M(200));return ha(null,n,e,!1,t)};nt.unmountComponentAtNode=function(n){if(!da(n))throw Error(M(40));return n._reactRootContainer?(ar(function(){ha(null,null,n,!1,function(){n._reactRootContainer=null,n[Yt]=null})}),!0):!1};nt.unstable_batchedUpdates=rd;nt.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!da(t))throw Error(M(200));if(n==null||n._reactInternals===void 0)throw Error(M(38));return ha(n,e,t,!1,r)};nt.version="18.2.0-next-9e3b772b8-20220608";function T1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T1)}catch(n){console.error(n)}}T1(),Oy.exports=nt;var ai=Oy.exports,R1,Wp=ai;R1=Wp.createRoot,Wp.hydrateRoot;const pi=v.createContext(null),yM=v.createContext(null),A1=v.createContext(null);function SM(n,e){const t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),n.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(e)),r)for(const i in r)i=="class"?t.class+=" "+r[i]:i=="style"?t.style=(t.style?t.style+";":"")+r[i]:!t[i]&&i!="contenteditable"&&i!="nodeName"&&(t[i]=String(r[i]))}),t.translate||(t.translate="no"),[ge.node(0,e.doc.content.size,t)]}const wM=[],kM={},Bc=J.empty;class Un{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,kM));return Un.from(r)}forChild(e,t){if(t.isLeaf)return J.empty;let r=[];for(let i=0;i<this.members.length;i++){const o=this.members[i].forChild(e,t);o!=Bc&&(o instanceof Un?r=r.concat(o.members):r.push(o))}return Un.from(r)}eq(e){if(!(e instanceof Un)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){const o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let s=0;s<o.length;s++)t.push(o[s])}}return t?vM(r?t:t.sort(b1)):wM}static from(e){switch(e.length){case 0:return Bc;case 1:return e[0];default:return new Un(e.every(t=>t instanceof J)?e:e.reduce((t,r)=>t.concat(r instanceof J?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function b1(n,e){return n.from-e.from||n.to-e.to}function vM(n){let e=n;for(let t=0;t<e.length-1;t++){const r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){const o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),Up(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),Up(e,i,r.copy(o.from,r.to)));break}}}return e}function Up(n,e,t){for(;e<n.length&&b1(t,n[e])>0;)e++;n.splice(e,0,t)}function xM(n,e,t){const r=[];return n.someProp("decorations",i=>{const o=i(e);o&&o!=Bc&&r.push(o)}),t&&r.push(J.create(e.doc,[t])),Un.from(r)}const fd=function(n){for(let e=0;;e++)if(n=n.previousSibling,!n)return e},Hp=function(n){const e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e},CM=function(n,e,t,r){return t&&(jp(n,e,t,r,-1)||jp(n,e,t,r,1))},NM=/^(img|br|input|textarea|hr)$/i;function jp(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:jl(n))){const o=n.parentNode;if(!o||o.nodeType!=1||EM(n)||NM.test(n.nodeName)||n.contentEditable=="false")return!1;e=fd(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?jl(n):0}else return!1}}function jl(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function MM(n,e,t){for(let r=e==0,i=e==jl(n);r||i;){if(n==t)return!0;const o=fd(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==jl(n)}return!1}function EM(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const I1=function(n){return n.focusNode&&CM(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)},z1=v.createContext(null);function OM(n,e){const t=v.useContext(z1);v.useLayoutEffect(()=>t(n),e)}function P1(n,e){const{view:t}=v.useContext(pi);OM(()=>{if(t)return n(t)},e&&[t,...e])}const DM=v.forwardRef(function({widget:e,pos:t,...r},i){const[o,s]=v.useState(!0),l=v.useRef(null);return v.useImperativeHandle(i,()=>l.current,[]),P1(a=>{if(!a||!l.current)return;a.domObserver.disconnectSelection();const u=a.domSelection(),c=document.createRange(),f=l.current;f.nodeName=="IMG"&&f.parentNode?c.setEnd(f.parentNode,fd(f)+1):c.setEnd(f,0),c.collapse(!1),u.removeAllRanges(),u.addRange(c),s(!1),a.domObserver.connectSelection()},[]),o?A.jsx("img",{ref:l,className:"ProseMirror-separator","mark-placeholder":"true",alt:"",...r}):null});function TM(n,e){if(n==e)return!0;for(const t in n)if(n[t]!==e[t])return!1;for(const t in e)if(!(t in n))return!1;return!0}const RM={side:0};class Wo{constructor(e,t){this.Component=e,this.spec=t??RM,this.side=this.spec.side??0}map(e,t,r,i){const{pos:o,deleted:s}=e.mapResult(t.from+i,this.side<0?-1:1);return s?null:new ge(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Wo&&(this.spec.key&&this.spec.key==e.spec.key||this.Component==e.Component&&TM(this.spec,e.spec))}destroy(){}}function F1(n,e,t){return new ge(n,n,new Wo(e,t))}function mu(){return Math.floor(Math.random()*0xffffffffffff).toString(16)}const Uo=new Qo("@nytimes/react-prosemirror/reactKeys");function AM(){let n=!1;return new Lt({key:Uo,state:{init(e,t){const r={posToKey:new Map,keyToPos:new Map};return t.doc.descendants((i,o)=>{const s=mu();return r.posToKey.set(o,s),r.keyToPos.set(s,o),!0}),r},apply(e,t,r,i){if(!e.docChanged||n)return t;const o=e.getMeta(Uo),s=(o==null?void 0:o.type)==="bustKey"&&o.payload.key,l={posToKey:new Map,keyToPos:new Map},a=Array.from(t.posToKey.entries()).sort(([u],[c])=>u-c);for(const[u,c]of a){const{pos:f,deleted:d}=e.mapping.mapResult(u);if(d)continue;let p=c;s===c&&(p=mu()),l.posToKey.set(f,p),l.keyToPos.set(p,f)}return i.doc.descendants((u,c)=>{if(l.posToKey.has(c))return!0;const f=mu();return l.posToKey.set(c,f),l.keyToPos.set(f,c),!0}),l}},props:{handleDOMEvents:{compositionstart:()=>{n=!0},compositionend:()=>{n=!1}}}})}function gu(n,e,t={}){var s;if(e===null)return!1;const r=t.from??n.state.selection.from,i=t.to??n.state.selection.to;if(n.someProp("handleTextInput",l=>l(n,r,i,e)))return!0;const{tr:o}=n.state;if(t.marks&&o.ensureMarks(t.marks),o.insertText(e,r,i),t.bust){const l=n.state.doc.resolve(r),a=l.sharedDepth(i),u=l.start(a),c=(s=Uo.getState(n.state))==null?void 0:s.posToKey.get(u-1);o.setMeta(Uo,{type:"bustKey",payload:{key:c}})}return n.dispatch(o),!0}function bM(n){let e=null,t=null;return new Lt({props:{handleDOMEvents:{compositionstart(r){var s;const{state:i}=r;r.dispatch(i.tr.deleteSelection());const o=i.selection.$from;return i.selection.empty&&(i.storedMarks||!o.textOffset&&o.parentOffset&&((s=o.nodeBefore)!=null&&s.marks.some(l=>l.type.spec.inclusive===!1)))&&n(F1(i.selection.from,DM,{key:"cursor-wrapper",marks:i.storedMarks??o.marks()})),t=i.storedMarks??o.marks(),r.input.composing=!0,!0},compositionupdate(){return!0},compositionend(r){if(r.input.composing=!1,e!==null)return gu(r,e,{bust:!0,marks:t}),e=null,t=null,n(null),!0},beforeinput(r,i){var o,s;switch(i.preventDefault(),i.inputType){case"insertCompositionText":{if(i.data===null)break;e=i.data;break}case"insertReplacementText":{const l=i.getTargetRanges();(s=(o=i.dataTransfer)==null?void 0:o.items[0])==null||s.getAsString(a=>{for(const u of l){const c=r.posAtDOM(u.startContainer,u.startOffset,1),f=r.posAtDOM(u.endContainer,u.endOffset,1);gu(r,a,{from:c,to:f})}});break}case"insertText":{gu(r,i.data);break}case"deleteWordBackward":case"deleteContentBackward":case"deleteWordForward":case"deleteContentForward":case"deleteContent":{const l=i.getTargetRanges(),{tr:a}=r.state;for(const u of l){const c=r.posAtDOM(u.startContainer,u.startOffset),f=r.posAtDOM(u.endContainer,u.endOffset),{doc:d}=r.state,p=d.resolve(c).marksAcross(d.resolve(f));a.delete(c,f).setStoredMarks(p)}r.dispatch(a);break}}return!0}}}})}const Ft=typeof navigator<"u"?navigator:null,Kp=typeof document<"u"?document:null,zn=Ft&&Ft.userAgent||"",Jc=/Edge\/(\d+)/.exec(zn),L1=/MSIE \d/.exec(zn),_c=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(zn),pa=!!(L1||_c||Jc),IM=L1?document.documentMode:_c?+_c[1]:Jc?+Jc[1]:0,$1=!pa&&/gecko\/(\d+)/i.test(zn),zM=$1&&+(/Firefox\/(\d+)/.exec(zn)||[0,0])[1],Wc=!pa&&/Chrome\/(\d+)/.exec(zn),PM=!!Wc,FM=Wc?+Wc[1]:0,V1=!pa&&!!Ft&&/Apple Computer/.test(Ft.vendor),B1=V1&&(/Mobile\/\w+/.test(zn)||!!Ft&&Ft.maxTouchPoints>2),LM=B1||(Ft?/Mac/.test(Ft.platform):!1),$M=Ft?/Win/.test(Ft.platform):!1,VM=/Android \d/.test(zn),J1=!!Kp&&"webkitFontSmoothing"in Kp.documentElement.style,BM=J1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,Me={ie:pa,ie_version:IM,gecko:$1,gecko_version:zM,chrome:PM,chrome_version:FM,safari:V1,ios:B1,mac:LM,windows:$M,android:VM,webkit:J1,webkit_version:BM};function yu(n){return n.editable&&!n.hasFocus()?!1:JM(n)}function JM(n){var t,r;const e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(((t=e.focusNode)==null?void 0:t.nodeType)==3?(r=e.focusNode)==null?void 0:r.parentNode:e.focusNode))}catch{return!1}}function _M(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||$.between(e,t,r)}function qp(n,e=null){const t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode);const o=i&&i.size==0;let s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,u;if(I1(t)){for(a=s;i&&!i.node;)i=i.parent;const f=i.node;if(i&&f.isAtom&&I.isSelectable(f)&&i.parent&&!(f.isInline&&MM(t.focusNode,t.focusOffset,i.dom))){const d=i.posBefore;u=new I(s==d?l:r.resolve(d))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let f=s,d=s;for(let p=0;p<t.rangeCount;p++){const h=t.getRangeAt(p);f=Math.min(f,n.docView.posFromDOM(h.startContainer,h.startOffset,1)),d=Math.max(d,n.docView.posFromDOM(h.endContainer,h.endOffset,-1))}if(f<0)return null;[a,s]=d==n.state.selection.anchor?[d,f]:[f,d],l=r.resolve(s)}else a=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(a<0)return null}const c=r.resolve(a);if(!u){const f=e=="pointer"||n.state.selection.head<l.pos&&!o?1:-1;u=_M(n,c,l,f)}return u}const Kl=function(n,e,t,r){return t&&(Qp(n,e,t,r,-1)||Qp(n,e,t,r,1))};function WM(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const UM=/^(img|br|input|textarea|hr)$/i;function Qp(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Yp(n))){const o=n.parentNode;if(!o||o.nodeType!=1||WM(n)||UM.test(n.nodeName)||n.contentEditable=="false")return!1;e=sn(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Yp(n):0}else return!1}}const sn=function(n){let e=n;for(let t=0;;t++)if(e=e.previousSibling,!e)return t};function Yp(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function HM(n,e){const t=n;if(e instanceof I){const r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(Gp(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else Gp(t)}function Gp(n){const e=n;e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function jM(n){const e=n,t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function _1(n){return n.editable?n.hasFocus():jM(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function KM(n){const e=n,t=e.domSelection(),r=document.createRange();if(!t)return;const i=e.cursorWrapper.dom,o=i.nodeName=="IMG";o?r.setStart(i.parentNode,sn(i)+1):r.setStart(i,0),r.collapse(!0),t.removeAllRanges(),t.addRange(r),!o&&!e.state.selection.visible&&Me.ie&&Me.ie_version<=11&&(i.disabled=!0,i.disabled=!1)}function Xp(n,e){const t=n,{node:r,offset:i}=t.docView.domFromPos(e,0),o=i<r.childNodes.length?r.childNodes[i]:null,s=i?r.childNodes[i-1]:null;if(Me.safari&&o&&o.contentEditable=="false")return Su(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return Su(o);if(s)return Su(s)}}function Su(n){return n.contentEditable="true",Me.safari&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Zp(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function qM(n){const e=n,t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);const r=e.domSelectionRange(),i=r.anchorNode,o=r.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(r.anchorNode!=i||r.anchorOffset!=o)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!_1(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}const em=Me.safari||Me.chrome&&Me.chrome_version<63;function bs(n,e=!1){const t=n,r=t.state.selection;if(HM(t,r),!!_1(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Me.chrome){const i=t.domSelectionRange(),o=t.domObserver.currentSelection;if(i.anchorNode&&o.anchorNode&&Kl(i.anchorNode,i.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)KM(t);else{const{anchor:i,head:o}=r;let s,l;em&&!(r instanceof $)&&(r.$from.parent.inlineContent||(s=Xp(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(l=Xp(t,r.to))),t.docView.setSelection(i,o,t.root,e),em&&(s&&Zp(s),l&&Zp(l)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&qM(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}class QM{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class YM{constructor(e){this.view=e,this.flushingSoon=-1,this.currentSelection=new QM,this.suppressingSelectionUpdates=!1,this.view=e,this.onSelectionChange=this.onSelectionChange.bind(this)}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}stop(){this.disconnectSelection()}start(){this.connectSelection()}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;const t=new Set;let r;for(let o=e.focusNode;o;o=Hp(o))t.add(o);for(let o=e.anchorNode;o;o=Hp(o))if(t.has(o)){r=o;break}const i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:(r==null?void 0:r.nodeType)==3?r==null?void 0:r.parentNode:r}))return this.setCurSelection(),!0}registerMutation(){}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}updateSelection(){const{view:e}=this,t=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);e.input.compositionPendingChanges=0;const r=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,i=qp(e,r);if(i&&!e.state.selection.eq(i)){const o=e.state.tr.setSelection(i);r=="pointer"?o.setMeta("pointer",!0):r=="key"&&o.scrollIntoView(),t&&o.setMeta("composition",t),e.dispatch(o)}}selectionToDOM(){const{view:e}=this;bs(e);const t=e.domSelectionRange();this.currentSelection.set(t)}flush(){const{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;const t=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&yu(e)&&!this.ignoreSelectionChange(t);let i=null;r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&I1(t)&&(i=qp(e))&&i.eq(P.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,bs(e),this.currentSelection.set(t),e.scrollToSelection()):r&&(this.updateSelection(),this.currentSelection.eq(t)||bs(e),this.currentSelection.set(t))}selectionChanged(e){return!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&yu(this.view)&&!this.ignoreSelectionChange(e)}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}onSelectionChange(){if(yu(this.view)&&!this.view.composing){if(this.suppressingSelectionUpdates)return bs(this.view);if(Me.ie&&Me.ie_version<=11&&!this.view.state.selection.empty){const e=this.view.domSelectionRange();if(e.focusNode&&Kl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}}const ui=0,tm=1,Is=2,Ho=3;class is{constructor(e,t,r,i,o){this.parent=e,this.children=t,this.pos=r,this.dom=i,this.contentDOM=o,this.dirty=ui,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){const i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>sn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){const o=this.getDesc(i);let s;if(o&&(!t||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){const t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){const o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t];const o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){const s=this.children[r],l=o+s.size;if(l>e||s instanceof pd){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof dd&&o.side>=0;r--);if(t<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&t&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?sn(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?sn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){const a=this.children[l],u=s+a.size;if(i==-1&&e<=u){const c=s+a.border;if(e>=c&&t<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=s;for(let f=l;f>0;f--){const d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=sn(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(u>t||l==this.children.length-1)){t=u;for(let c=l+1;c<this.children.length;c++){const f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=sn(f.dom);break}t+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;const t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){const{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){var d;const o=Math.min(e,t),s=Math.max(e,t);for(let p=0,h=0;p<this.children.length;p++){const m=this.children[p],w=h+m.size;if(o>h&&s<w)return m.setSelection(e-h-m.border,t-h-m.border,r,i);h=w}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1);const u=r.getSelection();let c=!1;if((Me.gecko||Me.safari)&&e==t){const{node:p,offset:h}=l;if(p.nodeType==3){if(c=!!(h&&((d=p.nodeValue)==null?void 0:d[h-1])==`
`),c&&h==p.nodeValue.length)for(let m=p,w;m;m=m.parentNode){if(w=m.nextSibling){w.nodeName=="BR"&&(l=a={node:w.parentNode,offset:sn(w)+1});break}const g=m.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{const m=p.childNodes[h-1];c=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Me.gecko&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){const p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||c&&Me.safari)&&Kl(l.node,l.offset,u.anchorNode,u.anchorOffset)&&Kl(a.node,a.offset,u.focusNode,u.focusOffset))return;let f=!1;if((u.extend||e==t)&&!c){u.collapse(l.node,l.offset);try{e!=t&&u.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>t){const h=l;l=a,a=h}const p=document.createRange();p.setEnd(a.node,a.offset),p.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){const o=this.children[i],s=r+o.size;if(r==s?e<=s&&t>=r:e<s&&t>r){const l=r+o.border,a=s-o.border;if(e>=l&&t<=a){this.dirty=e==r||t==s?Is:tm,e==l&&t==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ho:o.markDirty(e-l,t-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Is:Ho}r=s}this.dirty=Is}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){const r=e==1?Is:tm;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class dd extends is{constructor(e,t,r,i){super(e,[],t,i,null),this.widget=r,this.widget=r}matchesWidget(e){return this.dirty==ui&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){const t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}get domAtom(){return!0}get side(){return this.widget.type.side}}class ql extends is{constructor(e,t,r,i,o){super(e,[],t,r,null),this.textDOM=i,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class GM extends is{constructor(e,t,r,i,o,s){super(e,t,r,o,s),this.mark=i}parseRule(){return this.dirty&Ho||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ho&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=ui){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ui}}}class hd extends is{constructor(e,t,r,i,o,s,l,a,u,c){super(e,t,r,l,a),this.node=i,this.outerDeco=o,this.innerDeco=s,this.nodeDOM=u,this.stopEvent=c}updateOuterDeco(){}parseRule(){if(this.node.type.spec.reparseInView)return null;const e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){const r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>x.empty)}return e}matchesNode(e,t,r){return this.dirty==ui&&e.eq(this.node)&&ZM(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}update(e,t,r,i){return!0}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}class XM extends hd{constructor(e,t,r,i,o,s,l,a){super(e,t,r,i,o,s,l,null,a,()=>!1)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return!0}inParent(){const e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Ho)}get domAtom(){return!1}}class pd extends is{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ui&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}function ZM(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function eE(n){const e={};for(const[r,i]of n.entries()){let o=function(s,l){for(const a of i){let u=!1;if(ai.unstable_batchedUpdates(()=>{u=!!a.call(this,s,l)}),u||l.defaultPrevented)return!0}return!1};e[r]=o}return new Lt({key:new Qo("@nytimes/react-prosemirror/componentEventListeners"),props:{handleDOMEvents:e}})}function tE(){const[n,e]=v.useState(new Map),t=v.useCallback((o,s)=>{const l=n.get(o)??[];l.unshift(s),n.has(o)||(n.set(o,l),e(new Map(n)))},[n]),r=v.useCallback((o,s)=>{const l=n.get(o);l==null||l.splice(l.indexOf(s),1)},[n]),i=v.useMemo(()=>eE(n),[n]);return{registerEventListener:t,unregisterEventListener:r,componentEventListenersPlugin:i}}function W1(){const[,n]=v.useReducer(e=>e+1,0);return n}function nE(n){const e=Object.create(null);function t(r){for(const i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function rE(n,e){let t=0,r=0;for(const i in n){if(n[i]!=e[i])return!0;t++}for(const i in e)r++;return t!=r}function iE(n,e){for(const t of Object.keys(n))if(n[t]!==e[t])return!0;return!1}function nm(n){return!n.someProp("editable",e=>e(n.state)===!1)}class oE extends bv{constructor(e,t){super(e,{state:cn.create({schema:t.state.schema,plugins:t.state.plugins}),plugins:t.plugins}),this.shouldUpdatePluginViews=!1,this.shouldUpdatePluginViews=!0,this._props=t,this.oldProps={state:t.state},this.state=t.state,this.domObserver.stop(),this.domObserver=new YM(this),this.domObserver.start(),this.editable=nm(this),this.docView.dom.replaceChildren(),this.docView=t.docView}get needsRedraw(){if(this.oldProps.state.plugins===this._props.state.plugins&&this._props.plugins===this.oldProps.plugins)return!1;const e=nE(this);return rE(this.nodeViews,e)}pureSetProps(e){this._props={...this._props,...e},this.state=this._props.state,this.editable=nm(this)}runPendingEffects(){if(iE(this.props,this.oldProps)){const e=this.props;this._props=this.oldProps,this.state=this._props.state,this.update(e)}}update(e){super.update(e),this.oldProps=e}updatePluginViews(e){this.shouldUpdatePluginViews&&super.updatePluginViews(e)}destroy(){this.dom=document.createElement("div"),super.destroy()}}const sE=new Tm({nodes:{doc:{content:"text*"},text:{inline:!0}}}),lE=cn.create({schema:sE});function aE(n,e){const[t,r]=v.useState(null),[i,o]=v.useState(null),s=W1(),l=e.defaultState??lE,[a,u]=v.useState(l),c=e.state??a,{componentEventListenersPlugin:f,registerEventListener:d,unregisterEventListener:p}=tE(),h=v.useCallback(N=>{ai.flushSync(()=>{o(N)})},[]),m=v.useMemo(()=>[...e.plugins??[],f,bM(h)],[e.plugins,f,h]),w=v.useCallback(function(E){ai.flushSync(()=>{e.state||u(O=>O.apply(E)),e.dispatchTransaction&&e.dispatchTransaction.call(this,E)})},[e.dispatchTransaction,e.state]),g=document.createElement("div"),y=v.useRef(new hd(void 0,[],-1,c.doc,[],J.empty,g,null,g,()=>!1)),S={...e,state:c,plugins:m,dispatchTransaction:w,docView:y.current};return v.useLayoutEffect(()=>()=>{t==null||t.destroy()},[t]),v.useLayoutEffect(()=>{if(t&&t.dom!==n&&r(null),!!n&&!t){const N=new oE({mount:n},S);r(N),N.dom.addEventListener("compositionend",s);return}}),v.useLayoutEffect(()=>{if(t!=null&&t.needsRedraw){r(null);return}else t==null||t.domObserver.selectionToDOM(),t==null||t.runPendingEffects()}),t==null||t.pureSetProps(S),{editor:v.useMemo(()=>({view:t,registerEventListener:d,unregisterEventListener:p,cursorWrapper:i,docViewDescRef:y}),[t,d,p,i]),state:c}}function uE({children:n}){const e=v.useRef(new Set).current,t=v.useRef(new Set).current,r=v.useRef(!1),i=W1(),o=v.useRef(!0),s=v.useCallback(()=>{o.current||(i(),o.current=!0)},[i]),l=v.useCallback(a=>{let u;const c=()=>{u=a()};return e.add(c),s(),()=>{e.delete(c),u&&(r.current?(t.add(u),s()):u())}},[e,t,s]);return v.useLayoutEffect(()=>(o.current=!1,e.forEach(a=>a()),e.clear(),()=>{t.forEach(a=>a()),t.clear()})),v.useLayoutEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),A.jsx(z1.Provider,{value:l,children:n})}const pt=v.createContext({parentRef:{current:void 0},siblingsRef:{current:[]}});function U1(n,e,t,r,i,o,s,l){const{view:a}=v.useContext(pi),[u,c]=v.useState(!0),f=v.useRef(s),d=v.useRef(()=>!1),p=v.useCallback(g=>{d.current=g},[]),{siblingsRef:h,parentRef:m}=v.useContext(pt),w=v.useRef([]);return v.useLayoutEffect(()=>{const g=h.current;return()=>{if(f.current&&g.includes(f.current)){const y=g.indexOf(f.current);g.splice(y,1)}}},[h]),v.useLayoutEffect(()=>{var y;if(!n||!r.current)return;const g=w.current[0];f.current?(f.current.parent=m.current,f.current.children=w.current,f.current.node=n,f.current.pos=e,f.current.outerDeco=o,f.current.innerDeco=i,f.current.dom=(t==null?void 0:t.current)??r.current,f.current.dom.pmViewDesc=f.current,f.current.contentDOM=(l==null?void 0:l.current)??f.current.contentDOM??(g==null?void 0:g.dom.parentElement)??null,f.current.nodeDOM=r.current):f.current=new hd(m.current,w.current,e,n,o,i,(t==null?void 0:t.current)??r.current,(g==null?void 0:g.dom.parentElement)??null,r.current,S=>!!d.current(S)),c(f.current.contentDOM!==null),h.current.includes(f.current)||h.current.push(f.current),h.current.sort((S,C)=>S.pos-C.pos);for(const S of w.current)if(S.parent=f.current,S instanceof ql){const C=(y=f.current.contentDOM)==null?void 0:y.firstChild;if(!C)throw new Error("Started a composition but couldn't find the text node it belongs to.");let N=C;for(;N.firstChild;)N=N.firstChild;if(!N||!(N instanceof Text))throw new Error("Started a composition but couldn't find the text node it belongs to.");S.dom=C,S.textDOM=N,S.text=N.data,S.textDOM.pmViewDesc=S,a==null||a.input.compositionNodes.push(S)}return()=>{var S,C,N,E;((S=f.current)==null?void 0:S.children[0])instanceof ql&&!(a!=null&&a.composing)&&((E=(C=f.current)==null?void 0:C.children[0].dom.parentNode)==null||E.removeChild((N=f.current)==null?void 0:N.children[0].dom))}}),{hasContentDOM:u,childDescriptors:w,nodeViewDescRef:f,setStopEvent:p}}function cE(n,e){return n.type.side-e.type.side}function fE(n,e,t,r){const i=e.locals(n);let o=0;if(i.length==0){for(let u=0;u<n.childCount;u++){const c=n.child(u);r(c,i,e.forChild(o,c),o,u),o+=c.nodeSize}return}let s=0;const l=[];let a=null;for(let u=0;;){if(s<i.length&&i[s].to==o){const h=i[s++];let m;for(;s<i.length&&i[s].to==o;)(m||(m=[h])).push(i[s++]);if(m){m.sort(cE);for(let w=0;w<m.length;w++)t(m[w],!(m[w].type instanceof Wo),o,u+w,!!a)}else t(h,!(h.type instanceof Wo),o,u,!!a)}let c,f;if(a)f=-1,c=a,a=null;else if(u<n.childCount)f=u,c=n.child(u++);else break;for(let h=0;h<l.length;h++)l[h].to<=o&&l.splice(h--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let d=o+c.nodeSize;if(c.isText){let h=d;s<i.length&&i[s].from<h&&(h=i[s].from);for(let m=0;m<l.length;m++)l[m].to<h&&(h=l[m].to);h<d&&(a=c.cut(h-o),c=c.cut(0,h-o),d=h,f=-1)}const p=c.isInline&&!c.isLeaf?l.filter(h=>!h.inline):l.slice();r(c,p,e.forChild(o,c),o,f),o=d}}function H1(){const{view:n}=v.useContext(pi);return n&&Uo.getState(n.state)}var j1={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var s=typeof o;if(s==="string"||s==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var l=t.apply(null,o);l&&r.push(l)}}else if(s==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var a in o)e.call(o,a)&&o[a]&&r.push(a)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(j1);var dE=j1.exports;const hE=X1(dE);function pE(n){return n.replaceAll(/-[a-z]/g,e=>{var t;return((t=e[1])==null?void 0:t.toUpperCase())??""})}function mE(n){const e=new CSSStyleSheet;e.insertRule(`* { ${n} }`);const r=e.cssRules[0].style,i={};for(let o=0;o<r.length;o++){const s=r.item(o),l=r.getPropertyValue(s),a=s.startsWith("--")?s:pE(s);i[a]=l}return i}function K1(n,e){return{...n,...e,className:hE(n.className,e.className),style:{...n.style,...e.style}}}function q1(n){const e={};for(const[t,r]of Object.entries(n))switch(t.toLowerCase()){case"class":{e.className=r;break}case"style":{e.style=mE(r);break}case"autocapitalize":{e.autoCapitalize=r;break}case"contenteditable":{if(r===""||r==="true"){e.contentEditable=!0;break}if(r==="false"){e.contentEditable=!1;break}if(r==="plaintext-only"){e.contentEditable="plaintext-only";break}e.contentEditable=null;break}case"draggable":{e.draggable=r!=null;break}case"enterkeyhint":{e.enterKeyHint=r;break}case"for":{e.htmlFor=r;break}case"hidden":{e.hidden=r;break}case"inputmode":{e.inputMode=r;break}case"itemprop":{e.itemProp=r;break}case"spellcheck":{if(r===""||r==="true"){e.spellCheck=!0;break}if(r==="false"){e.spellCheck=!1;break}e.spellCheck=null;break}case"tabindex":{const i=parseInt(r,10);Number.isNaN(i)||(e.tabIndex=i);break}case"autocomplete":{e.autoComplete=r;break}case"autofocus":{e.autoFocus=r!=null;break}case"formaction":{e.formAction=r;break}case"formenctype":{e.formEnctype=r;break}case"formmethod":{e.formMethod=r;break}case"formnovalidate":{e.formNoValidate=r;break}case"formtarget":{e.formTarget=r;break}case"maxlength":{const i=parseInt(r,10);Number.isNaN(i)||(e.maxLength=r);break}case"minlength":{const i=parseInt(r,10);Number.isNaN(i)||(e.minLength=r);break}case"max":{const i=parseInt(r,10);Number.isNaN(i)||(e.max=r);break}case"min":{const i=parseInt(r,10);Number.isNaN(i)||(e.min=r);break}case"multiple":{e.multiple=r!=null;break}case"readonly":{e.readOnly=r!=null;break}case"required":{e.required=r!=null;break}case"size":{const i=parseInt(r,10);Number.isNaN(i)||(e.size=r);break}case"step":{if(r==="any"){e.step=r;break}const i=parseInt(r,10);!Number.isNaN(i)&&i>0&&(e.step=r);break}case"disabled":{e.disabled=r!=null;break}case"rows":{const i=parseInt(r,10);Number.isNaN(i)||(e.rows=r);break}default:{e[t]=r;break}}return e}const md=v.memo(v.forwardRef(function({outputSpec:e,children:t,...r},i){if(typeof e=="string")return A.jsx(A.Fragment,{children:e});if(!Array.isArray(e))throw new Error("@nytimes/react-prosemirror only supports strings and arrays in toDOM");const s=e[0].replace(" ",":"),l=e[1];let a={ref:i,...r},u=1;l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)&&(u=2,a=K1(q1(l),a));const c=[];for(let f=u;f<e.length;f++){const d=e[f];if(d===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return v.createElement(s,a,t)}c.push(A.jsx(md,{outputSpec:d,children:t}))}return v.createElement(s,a,...c)})),Q1=v.memo(v.forwardRef(function({mark:e,pos:t,children:r},i){const{siblingsRef:o,parentRef:s}=v.useContext(pt),l=v.useRef(void 0),a=v.useRef([]),u=v.useRef(null);v.useImperativeHandle(i,()=>u.current,[]);const c=v.useMemo(()=>{var d,p;return(p=(d=e.type.spec).toDOM)==null?void 0:p.call(d,e,!0)},[e]);if(!c)throw new Error(`Mark spec for ${e.type.name} is missing toDOM`);v.useLayoutEffect(()=>{const d=o.current;return()=>{if(l.current&&d.includes(l.current)){const p=d.indexOf(l.current);d.splice(p,1)}}},[o]),v.useLayoutEffect(()=>{if(!u.current)return;const d=a.current[0];l.current?(l.current.parent=s.current,l.current.dom=u.current,l.current.contentDOM=(d==null?void 0:d.dom.parentElement)??u.current,l.current.mark=e,l.current.pos=t):l.current=new GM(s.current,a.current,t,e,u.current,(d==null?void 0:d.dom.parentElement)??u.current),o.current.includes(l.current)||o.current.push(l.current),o.current.sort((p,h)=>p.pos-h.pos);for(const p of a.current)p.parent=l.current});const f=v.useMemo(()=>({parentRef:l,siblingsRef:a}),[a,l]);return A.jsx(md,{ref:u,outputSpec:c,children:A.jsx(pt.Provider,{value:f,children:r})})}));function gE({widget:n,pos:e}){const{siblingsRef:t,parentRef:r}=v.useContext(pt),i=v.useRef(null),o=v.useRef(null),s=v.useRef(e);return s.current=e,v.useLayoutEffect(()=>{const l=t.current;return()=>{if(i.current&&l.includes(i.current)){const a=l.indexOf(i.current);l.splice(a,1)}}},[t]),P1(l=>{if(!o.current)return;const a=n.type.toDOM;let u=typeof a=="function"?a(l,()=>s.current):a;if(!n.type.spec.raw){if(u.nodeType!=1){const c=document.createElement("span");c.appendChild(u),u=c}u.contentEditable="false",u.classList.add("ProseMirror-widget")}o.current.firstElementChild!==u&&o.current.replaceChildren(u)}),v.useLayoutEffect(()=>{o.current&&(i.current?(i.current.parent=r.current,i.current.widget=n,i.current.pos=e,i.current.dom=o.current):i.current=new dd(r.current,e,n,o.current),t.current.includes(i.current)||t.current.push(i.current),t.current.sort((l,a)=>l.pos-a.pos))}),A.jsx("span",{ref:o})}const yE=v.createContext(null),Y1=v.memo(function({outerDeco:e,pos:t,node:r,innerDeco:i,...o}){const s=v.useRef(null),l=v.useRef(null),a=v.useRef(null),u=v.useRef(r),c=v.useRef(e),f=v.useRef(i),d=v.useRef(t);d.current=t;const p=v.useRef(null),h=v.useRef(null),{nodeViews:m}=v.useContext(A1),{view:w}=v.useContext(pi);let g=null;const y=m[r.type.name],S=v.useMemo(()=>{var W,we;return(we=(W=r.type.spec).toDOM)==null?void 0:we.call(W,r)},[r]),C=w==null?void 0:w.someProp("nodeViews",W=>W==null?void 0:W[r.type.name]);v.useLayoutEffect(()=>{if(!h.current||!p.current)return;const{dom:W}=h.current;return l.current=p.current,p.current.appendChild(W),()=>{var we,mi;(mi=(we=h.current)==null?void 0:we.destroy)==null||mi.call(we)}},[]),v.useLayoutEffect(()=>{if(!C||!h.current)return;const{destroy:W,update:we}=h.current;if(((we==null?void 0:we.call(h.current,r,e,i))??!0)||(W==null||W.call(h.current),!p.current))return;u.current=r,c.current=e,f.current=i,h.current=C(u.current,w,()=>d.current,c.current,f.current);const{dom:gi}=h.current;l.current=p.current,p.current.appendChild(gi)},[C,w,i,r,e]);const{hasContentDOM:N,childDescriptors:E,setStopEvent:O,nodeViewDescRef:T}=U1(r,t,s,l,i,e,void 0,a),b={...o,...!N&&{contentEditable:!1}};if(y)g=A.jsx(y,{...b,ref:l,nodeProps:{node:r,pos:t,decorations:e,innerDecorations:i,isSelected:!1},children:A.jsx(mo,{pos:t,node:r,innerDecorations:i})});else if(C){h.current||(h.current=C(u.current,w,()=>d.current,c.current,f.current));const{contentDOM:W}=h.current;a.current=W??null,g=v.createElement(r.isInline?"span":"div",{ref:p,contentEditable:!!W,suppressContentEditableWarning:!0},W&&ai.createPortal(A.jsx(mo,{pos:t,node:r,innerDecorations:i}),W))}else S&&(g=A.jsx(md,{...b,ref:l,outputSpec:S,children:A.jsx(mo,{pos:t,node:r,innerDecorations:i})}));if(!g)throw new Error(`Node spec for ${r.type.name} is missing toDOM`);const z=v.cloneElement(e.reduce(gd,g),e.some(W=>W.type.attrs.nodeName)?{ref:s}:void 0),le=r.marks.reduce((W,we)=>A.jsx(Q1,{pos:t,mark:we,children:W}),z),$t=v.useMemo(()=>({parentRef:T,siblingsRef:E}),[E,T]);return A.jsx(yE.Provider,{value:O,children:A.jsx(pt.Provider,{value:$t,children:v.cloneElement(le,r.marks.length||e.some(W=>W.type.attrs.nodeName)?{ref:s}:void 0)})})});function SE({pos:n}){const{siblingsRef:e,parentRef:t}=v.useContext(pt),r=v.useRef(null),i=v.useRef(null),[o,s]=v.useState(!1);return v.useLayoutEffect(()=>{const l=e.current;return()=>{if(r.current&&l.includes(r.current)){const a=l.indexOf(r.current);l.splice(a,1)}}},[e]),v.useLayoutEffect(()=>{var a;const l=e.current[e.current.length-1];if((Me.safari||Me.chrome)&&((a=l==null?void 0:l.dom)==null?void 0:a.contentEditable)=="false"){s(!0);return}i.current&&(r.current?(r.current.parent=t.current,r.current.dom=i.current,r.current.pos=n):r.current=new pd(t.current,[],n,i.current,null),e.current.includes(r.current)||e.current.push(r.current))}),o?A.jsx("img",{ref:i,className:"ProseMirror-separator"}):null}function wE(n,e){if(n===e)return!0;if(!n||!e)return!1;const t=Object.keys(n),r=Object.keys(e),i=t.length;if(r.length!==i)return!1;for(let o=0;o<i;o++){const s=t[o];if(n[s]!==e[s]||!Object.prototype.hasOwnProperty.call(e,s))return!1}return!0}class kE extends v.Component{constructor(){super(...arguments),this.viewDescRef=null,this.renderRef=null}updateEffect(){const{view:e,decorations:t,siblingsRef:r,parentRef:i,pos:o,node:s}=this.props,l=ai.findDOMNode(this);if(!l){if(!(e!=null&&e.composing))return;this.viewDescRef=new ql(i.current,o,document.createElement("div"),document.createTextNode(s.text??""),s.text??"");return}let a=l;for(;a.firstChild;)a=a.firstChild;!this.viewDescRef||this.viewDescRef instanceof ql?this.viewDescRef=new XM(void 0,[],o,s,t,J.empty,l,a):(this.viewDescRef.parent=i.current,this.viewDescRef.children=[],this.viewDescRef.node=s,this.viewDescRef.pos=o,this.viewDescRef.outerDeco=t,this.viewDescRef.innerDeco=J.empty,this.viewDescRef.dom=l,this.viewDescRef.dom.pmViewDesc=this.viewDescRef,this.viewDescRef.nodeDOM=a),r.current.includes(this.viewDescRef)||r.current.push(this.viewDescRef),r.current.sort((u,c)=>u.pos-c.pos)}shouldComponentUpdate(e){return!wE(this.props,e)}componentDidMount(){this.updateEffect()}componentDidUpdate(){this.updateEffect()}componentWillUnmount(){const{siblingsRef:e}=this.props;if(this.viewDescRef&&e.current.includes(this.viewDescRef)){const t=e.current.indexOf(this.viewDescRef);e.current.splice(t,1)}}render(){const{view:e,pos:t,node:r,decorations:i}=this.props;return e!=null&&e.composing&&e.state.selection.from>=t&&e.state.selection.from<=t+r.nodeSize?this.renderRef:(this.renderRef=i.reduce(gd,r.text),this.renderRef)}}function vE({pos:n}){const{siblingsRef:e,parentRef:t}=v.useContext(pt),r=v.useRef(null),i=v.useRef(null);return v.useLayoutEffect(()=>{const o=e.current;return()=>{if(r.current&&o.includes(r.current)){const s=o.indexOf(r.current);o.splice(s,1)}}},[e]),v.useLayoutEffect(()=>{i.current&&(r.current?(r.current.parent=t.current,r.current.dom=i.current,r.current.pos=n):r.current=new pd(t.current,[],n,i.current,null),e.current.includes(r.current)||e.current.push(r.current),e.current.sort((o,s)=>o.pos-s.pos))}),A.jsx("br",{ref:i,className:"ProseMirror-trailingBreak"})}function xE({widget:n,pos:e}){const{siblingsRef:t,parentRef:r}=v.useContext(pt),i=v.useRef(null),o=v.useRef(null);v.useLayoutEffect(()=>{const l=t.current;return()=>{if(i.current&&l.includes(i.current)){const a=l.indexOf(i.current);l.splice(a,1)}}},[t]),v.useLayoutEffect(()=>{o.current&&(i.current?(i.current.parent=r.current,i.current.widget=n,i.current.pos=e,i.current.dom=o.current):i.current=new dd(r.current,e,n,o.current),t.current.includes(i.current)||t.current.push(i.current),t.current.sort((l,a)=>l.pos-a.pos))});const{Component:s}=n.type;return s&&A.jsx(s,{ref:o,widget:n,pos:e,contentEditable:!1})}function gd(n,e){const{nodeName:t,...r}=e.type.attrs,i=q1(r);return t||typeof n=="string"?v.createElement(t??"span",i,n):v.cloneElement(n,K1(n.props,i))}const rm=v.memo(function n({innerPos:e,childViews:t}){const{view:r}=v.useContext(pi),i=H1(),o=t.reduce((s,l)=>{var c;const a=s[s.length-1];if(!a)return[[l]];const u=a[a.length-1];return u?!l.marks.length&&!u.marks.length||l.marks.length&&u.marks.length&&((c=l.marks[0])!=null&&c.eq(u.marks[0]))?[...s.slice(0,s.length-1),[...a.slice(0,a.length),l]]:[...s,[l]]:[...s.slice(0,s.length),[l]]},[]);return A.jsx(A.Fragment,{children:o.map(s=>{const l=s[0];if(!l)return null;const a=l.marks[0];return a?A.jsx(Q1,{pos:e+l.offset,mark:a,children:A.jsx(n,{innerPos:e,childViews:s.map(u=>({...u,marks:u.marks.slice(1)}))},po(e,l,i==null?void 0:i.posToKey))},po(e,l,i==null?void 0:i.posToKey)):s.map(u=>{const c=e+u.offset,f=u.type==="widget"?A.jsx(xE,{widget:u.widget,pos:c}):u.type==="native-widget"?A.jsx(gE,{widget:u.widget,pos:c}):u.node.isText?A.jsx(pt.Consumer,{children:({siblingsRef:d,parentRef:p})=>A.jsx(kE,{view:r,node:u.node,pos:c,siblingsRef:d,parentRef:p,decorations:u.outerDeco})}):A.jsx(Y1,{node:u.node,pos:c,outerDeco:u.outerDeco,innerDeco:u.innerDeco});return v.cloneElement(f,{key:po(e,u,i==null?void 0:i.posToKey)})})})})});function po(n,e,t){const r=n+e.offset,i=t==null?void 0:t.get(r);return e.type==="widget"||e.type==="native-widget"?e.widget.type.spec.key?e.widget.type.spec.key:(console.warn(`Widget at position ${r} doesn't have a key specified. This has negative performance implications.`),`${i}-${e.index}`):i||r}function CE(n){const e=n[n.length-1];if((e==null?void 0:e.type)!=="widget"&&(e==null?void 0:e.type)!=="native-widget"||e.widget.type.side>=0)return;let t=null;for(let i=n.length-2;i>=0;i--){const o=n[i];if((o==null?void 0:o.type)==="node"){t=o;break}}if(!t||!t.node.isInline)return;const r=t.marks;e.marks=e.marks.reduce((i,o)=>o.addToSet(i),r)}function NE(n){const e=n[n.length-1];if((e==null?void 0:e.type)!=="node"||!e.node.isInline)return;const t=e.marks;for(let r=n.length-2;r>=0;r--){const i=n[r];if((i==null?void 0:i.type)!=="widget"&&(i==null?void 0:i.type)!=="native-widget"||i.widget.type.side<0)break;i.marks=i.marks.reduce((o,s)=>s.addToSet(o),t)}}function ME(n,e,t){return n.length?n.every(r=>r.type!=="node"||r.node.isInline)?[A.jsx(rm,{childViews:n,innerPos:e},po(e,n[0],t))]:n.map(r=>{if(r.type==="node"){const i=e+r.offset,o=(t==null?void 0:t.get(i))??i;return A.jsx(Y1,{outerDeco:r.outerDeco,node:r.node,innerDeco:r.innerDeco,pos:i},o)}else return A.jsx(rm,{childViews:[r],innerPos:e},po(e,r,t))}):[]}const mo=v.memo(function({pos:e,node:t,innerDecorations:r}){const i=H1();if(!t)return null;const o=e+1,s=[];fE(t,r,(u,c,f,d)=>{const p=u.type.spec.marks??[];c?s.push({type:"native-widget",widget:u,marks:p,offset:f,index:d}):s.push({type:"widget",widget:u,marks:p,offset:f,index:d}),CE(s)},(u,c,f,d)=>{s.push({type:"node",node:u,marks:u.marks,innerDeco:f,outerDeco:c,offset:d}),NE(s)});const l=ME(s,o,i==null?void 0:i.posToKey),a=s[s.length-1];return(!a||a.type!=="node"||a.node.isInline&&!a.node.isText||/\n$/.test(a.node.text))&&l.push(A.jsx(SE,{pos:o},"trailing-hack-img"),A.jsx(vE,{pos:o},"trailing-hack-br")),A.jsx(A.Fragment,{children:l})}),EE=v.memo(v.forwardRef(function({className:e,node:t,innerDeco:r,outerDeco:i,as:o,viewDesc:s,...l},a){const u=v.useRef(null);v.useImperativeHandle(a,()=>u.current,[]);const{childDescriptors:c,nodeViewDescRef:f}=U1(t,-1,u,u,r,i,s),d=v.useMemo(()=>({parentRef:f,siblingsRef:c}),[c,f]),p={...l,ref:u,className:e,suppressContentEditableWarning:!0},h=o?v.cloneElement(o,p,A.jsx(pt.Provider,{value:d,children:A.jsx(mo,{pos:-1,node:t,innerDecorations:r})})):v.createElement("div",p,A.jsx(pt.Provider,{value:d,children:A.jsx(mo,{pos:-1,node:t,innerDecorations:r})}));if(!t)return h;const m=i.filter(g=>!g.inline);return m.length?m.reduce(gd,h):h})),G1=v.createContext(null);function OE({as:n,...e},t){const r=v.useRef([]),i=v.useRef(null),{setMount:o,...s}=v.useContext(G1),l=v.useRef(void 0);v.useImperativeHandle(t,()=>i.current,[]);const a=v.useMemo(()=>({parentRef:l,siblingsRef:r}),[r,l]);return A.jsx(pt.Provider,{value:a,children:A.jsx(EE,{ref:u=>{i.current=u,o(u)},...e,...s,as:n})})}const DE=v.forwardRef(OE);function TE({className:n,children:e,nodeViews:t={},customNodeViews:r,...i}){var p;const[o,s]=v.useState(null),{editor:l,state:a}=aE(o,{...i,nodeViews:r}),u=v.useMemo(()=>l.view?xM(l.view,a,l.cursorWrapper):J.empty,[l.cursorWrapper,l.view,a,i.decorations]),c=v.useMemo(()=>l.view?SM(l.view,a):[],[l.view,a,i.attributes,i.editable]),f=v.useMemo(()=>({nodeViews:t}),[t]),d=v.useMemo(()=>{var h;return{className:n,setMount:s,node:(h=l.view)==null?void 0:h.state.doc,innerDeco:u,outerDeco:c,viewDesc:l.docViewDescRef.current}},[n,l.docViewDescRef,(p=l.view)==null?void 0:p.state.doc,u,c]);return A.jsx(pi.Provider,{value:l,children:A.jsx(yM.Provider,{value:a,children:A.jsx(A1.Provider,{value:f,children:A.jsx(G1.Provider,{value:d,children:e})})})})}function RE(n){return A.jsx(uE,{children:A.jsx(TE,{...n})})}const Pr=new Tm({nodes:{doc:{content:"block+"},paragraph:{group:"block",content:"inline*",toDOM(){return["p",0]}},...Fx({cellContent:"inline*",cellAttributes:{},tableGroup:"block"}),footnote:{group:"inline",content:"text*",inline:!0,atom:!0,attrs:{number:{default:0}}},list:{group:"block",content:"list_item+",toDOM(){return["ul",0]}},list_item:{content:"paragraph+",toDOM(){return["li",0]}},image:{group:"block",toDOM(){return["div",["img",{src:"https://smoores.gitlab.io/storyteller/img/Storyteller_Logo.png",height:150,width:150}]]}},text:{group:"inline"}},marks:{em:{toDOM(){return["em",0]}},strong:{toDOM(){return["strong",0]}}}}),AE=cn.create({schema:Pr,doc:Pr.nodes.doc.create({},[Pr.nodes.paragraph.create()]),plugins:[AM(),ex({rules:[tx(/^\s*([-+*])\s$/,Pr.nodes.list)]}),tC(),hC()]});v.forwardRef(function({children:e,nodeProps:t,...r},i){return A.jsx("p",{ref:i,...r,children:e})});const bE=v.forwardRef(function({children:e,nodeProps:t,...r},i){return A.jsx("ul",{ref:i,...r,children:e})}),IE=v.forwardRef(function({children:e,nodeProps:t,...r},i){return A.jsx("li",{ref:i,...r,children:e})}),zE=v.forwardRef(function({nodeProps:e,...t},r){return A.jsx("span",{ref:r,...t,suppressContentEditableWarning:!0,contentEditable:"false",children:A.jsx("button",{children:e.node.attrs.number})})}),PE=v.forwardRef(function({widget:e,pos:t,...r},i){return A.jsx("span",{...r,ref:i,style:{display:"block",backgroundColor:"blue",width:"4px",height:"4px",position:"absolute",transform:"translateX(-2px)"},children:"Widget"})}),FE=new Lt({view(n){const e=n.coordsAtPos(n.state.selection.from),t=document.createElement("div");return t.style.width="4px",t.style.height="4px",t.style.position="absolute",t.style.top=`${e.top-2}px`,t.style.left=`${e.left-2}px`,t.style.backgroundColor="blue",document.body.appendChild(t),{update(r){const i=r.coordsAtPos(r.state.selection.from);t.style.top=`${i.top-2}px`,t.style.left=`${i.left-2}px`},destroy(){document.body.removeChild(t)}}}});new Lt({props:{decorations(n){return J.create(n.doc,[F1(n.selection.from,PE,{side:0,key:"widget-plugin-widget"})])}},view(n){const e=n.coordsAtPos(n.state.selection.from),t=document.createElement("div");return t.style.width="4px",t.style.height="4px",t.style.position="absolute",t.style.top=`${e.top-2}px`,t.style.left=`${e.left-2}px`,t.style.backgroundColor="blue",document.body.appendChild(t),{update(r){const i=r.coordsAtPos(r.state.selection.from);t.style.top=`${i.top-2}px`,t.style.left=`${i.left-2}px`},destroy(){document.body.removeChild(t)}}}});const LE=[ox({...Jw,"Mod-i":Bd(Pr.marks.em),"Mod-b":Bd(Pr.marks.strong)}),FE,Lv()],$E={paragraph:()=>{const n=document.createElement("p");return{dom:n,contentDOM:n}}};function VE(){const[n,e]=v.useState(AE),[t,r]=v.useState(!0),i=v.useMemo(()=>t?{list:bE,list_item:IE,footnote:zE}:void 0,[t]),o=v.useCallback(function(s){e(l=>l.apply(s))},[]);return A.jsxs("main",{children:[A.jsx("h1",{children:"React ProseMirror Demo"}),A.jsxs("button",{onClick:()=>{t?r(s=>!s):window.location.reload()},children:["Switch to"," ",t?"ProseMirror node views":"React node views (requires reload)"]}),A.jsx(RE,{className:"ProseMirror",state:n,dispatchTransaction:o,plugins:LE,nodeViews:i,customNodeViews:t?void 0:$E,children:A.jsx(DE,{})},`${t}`)]})}const BE=R1(document.getElementById("root"));BE.render(A.jsx(v.StrictMode,{children:A.jsx(VE,{})}));
