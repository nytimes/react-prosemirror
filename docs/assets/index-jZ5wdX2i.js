(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function y0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hp={exports:{}},vl={},Kp={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ko=Symbol.for("react.element"),w0=Symbol.for("react.portal"),k0=Symbol.for("react.fragment"),v0=Symbol.for("react.strict_mode"),S0=Symbol.for("react.profiler"),x0=Symbol.for("react.provider"),C0=Symbol.for("react.context"),E0=Symbol.for("react.forward_ref"),N0=Symbol.for("react.suspense"),M0=Symbol.for("react.memo"),R0=Symbol.for("react.lazy"),If=Symbol.iterator;function O0(n){return n===null||typeof n!="object"?null:(n=If&&n[If]||n["@@iterator"],typeof n=="function"?n:null)}var jp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qp=Object.assign,qp={};function jr(n,e,t){this.props=n,this.context=e,this.refs=qp,this.updater=t||jp}jr.prototype.isReactComponent={};jr.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};jr.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Yp(){}Yp.prototype=jr.prototype;function ac(n,e,t){this.props=n,this.context=e,this.refs=qp,this.updater=t||jp}var uc=ac.prototype=new Yp;uc.constructor=ac;Qp(uc,jr.prototype);uc.isPureReactComponent=!0;var Pf=Array.isArray,Xp=Object.prototype.hasOwnProperty,cc={current:null},Gp={key:!0,ref:!0,__self:!0,__source:!0};function Zp(n,e,t){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Xp.call(e,r)&&!Gp.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(n&&n.defaultProps)for(r in l=n.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ko,type:n,key:o,ref:s,props:i,_owner:cc.current}}function T0(n,e){return{$$typeof:ko,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function fc(n){return typeof n=="object"&&n!==null&&n.$$typeof===ko}function A0(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Ff=/\/+/g;function Wl(n,e){return typeof n=="object"&&n!==null&&n.key!=null?A0(""+n.key):e.toString(36)}function ss(n,e,t,r,i){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case ko:case w0:s=!0}}if(s)return s=n,i=i(s),n=r===""?"."+Wl(s,0):r,Pf(i)?(t="",n!=null&&(t=n.replace(Ff,"$&/")+"/"),ss(i,e,t,"",function(u){return u})):i!=null&&(fc(i)&&(i=T0(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ff,"$&/")+"/")+n)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Pf(n))for(var l=0;l<n.length;l++){o=n[l];var a=r+Wl(o,l);s+=ss(o,e,t,a,i)}else if(a=O0(n),typeof a=="function")for(n=a.call(n),l=0;!(o=n.next()).done;)o=o.value,a=r+Wl(o,l++),s+=ss(o,e,t,a,i);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Po(n,e,t){if(n==null)return n;var r=[],i=0;return ss(n,r,"","",function(o){return e.call(t,o,i++)}),r}function D0(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Re={current:null},ls={transition:null},z0={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:ls,ReactCurrentOwner:cc};$.Children={map:Po,forEach:function(n,e,t){Po(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Po(n,function(){e++}),e},toArray:function(n){return Po(n,function(e){return e})||[]},only:function(n){if(!fc(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};$.Component=jr;$.Fragment=k0;$.Profiler=S0;$.PureComponent=ac;$.StrictMode=v0;$.Suspense=N0;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z0;$.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Qp({},n.props),i=n.key,o=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=cc.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(a in e)Xp.call(e,a)&&!Gp.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ko,type:n.type,key:i,ref:o,props:r,_owner:s}};$.createContext=function(n){return n={$$typeof:C0,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:x0,_context:n},n.Consumer=n};$.createElement=Zp;$.createFactory=function(n){var e=Zp.bind(null,n);return e.type=n,e};$.createRef=function(){return{current:null}};$.forwardRef=function(n){return{$$typeof:E0,render:n}};$.isValidElement=fc;$.lazy=function(n){return{$$typeof:R0,_payload:{_status:-1,_result:n},_init:D0}};$.memo=function(n,e){return{$$typeof:M0,type:n,compare:e===void 0?null:e}};$.startTransition=function(n){var e=ls.transition;ls.transition={};try{n()}finally{ls.transition=e}};$.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};$.useCallback=function(n,e){return Re.current.useCallback(n,e)};$.useContext=function(n){return Re.current.useContext(n)};$.useDebugValue=function(){};$.useDeferredValue=function(n){return Re.current.useDeferredValue(n)};$.useEffect=function(n,e){return Re.current.useEffect(n,e)};$.useId=function(){return Re.current.useId()};$.useImperativeHandle=function(n,e,t){return Re.current.useImperativeHandle(n,e,t)};$.useInsertionEffect=function(n,e){return Re.current.useInsertionEffect(n,e)};$.useLayoutEffect=function(n,e){return Re.current.useLayoutEffect(n,e)};$.useMemo=function(n,e){return Re.current.useMemo(n,e)};$.useReducer=function(n,e,t){return Re.current.useReducer(n,e,t)};$.useRef=function(n){return Re.current.useRef(n)};$.useState=function(n){return Re.current.useState(n)};$.useSyncExternalStore=function(n,e,t){return Re.current.useSyncExternalStore(n,e,t)};$.useTransition=function(){return Re.current.useTransition()};$.version="18.2.0";Kp.exports=$;var C=Kp.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0=C,P0=Symbol.for("react.element"),F0=Symbol.for("react.fragment"),L0=Object.prototype.hasOwnProperty,$0=I0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b0={key:!0,ref:!0,__self:!0,__source:!0};function eh(n,e,t){var r,i={},o=null,s=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)L0.call(e,r)&&!b0.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:P0,type:n,key:o,ref:s,props:i,_owner:$0.current}}vl.Fragment=F0;vl.jsx=eh;vl.jsxs=eh;Hp.exports=vl;var D=Hp.exports;function pe(n){this.content=n}pe.prototype={constructor:pe,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new pe(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new pe(t)},addToStart:function(n,e){return new pe([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new pe(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new pe(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=pe.from(n),n.size?new pe(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=pe.from(n),n.size?new pe(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=pe.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};pe.from=function(n){if(n instanceof pe)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new pe(e)};function th(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)t++;return t}if(i.content.size||o.content.size){let s=th(i.content,o.content,t+1);if(s!=null)return s}t+=i.nodeSize}}function nh(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let s=n.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){t-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:t,b:r};if(s.isText&&s.text!=l.text){let u=0,c=Math.min(s.text.length,l.text.length);for(;u<c&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,t--,r--;return{a:t,b:r}}if(s.content.size||l.content.size){let u=nh(s.content,l.content,t-1,r-1);if(u)return u}t-=a,r-=a}}class S{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let s=0,l=0;l<t;s++){let a=this.content[s],u=l+a.nodeSize;if(u>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),r,i+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",s=!0;return this.nodesBetween(e,t,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,t-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new S(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,s=0;s<t;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,t-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,t-s-1))),r.push(l),i+=l.nodeSize),s=a}return new S(r,i)}cutByIndex(e,t){return e==t?S.empty:e==0&&t==this.content.length?this:new S(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new S(i,o)}addToStart(e){return new S([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new S(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return th(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return nh(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Fo(0,e);if(e==this.size)return Fo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||t>0?Fo(r+1,s):Fo(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return S.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new S(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return S.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new S(t||e,r)}static from(e){if(!e)return S.empty;if(e instanceof S)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new S([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}S.empty=new S([],0);const Ul={index:0,offset:0};function Fo(n,e){return Ul.index=n,Ul.offset=e,Ul}function Ls(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Ls(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Ls(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class V{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ls(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return V.none;if(e instanceof V)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}V.none=[];class un extends Error{}class k{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=ih(this.content,e+this.openStart,t);return r&&new k(r,this.openStart,this.openEnd)}removeBetween(e,t){return new k(rh(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return k.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new k(S.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new k(e,r,i)}}k.empty=new k(S.empty,0,0);function rh(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:s,offset:l}=n.findIndex(t);if(i==e||o.isText){if(l!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(rh(o.content,e-i-1,t-i-1)))}function ih(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),s=n.maybeChild(i);if(o==e||s.isText)return n.cut(0,e).append(t).append(n.cut(e));let l=ih(s.content,e-o-1,t);return l&&n.replaceChild(i,s.copy(l))}function B0(n,e,t){if(t.openStart>n.depth)throw new un("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new un("Inconsistent open depths");return oh(n,e,t,0)}function oh(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let s=oh(n,e,t,r+1);return o.copy(o.content.replaceChild(i,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let s=n.parent,l=s.content;return $n(s,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=J0(t,n);return $n(o,lh(n,s,l,e,r))}else return $n(o,$s(n,e,r))}function sh(n,e){if(!e.type.compatibleContent(n.type))throw new un("Cannot join "+e.type.name+" onto "+n.type.name)}function _a(n,e,t){let r=n.node(t);return sh(r,e.node(t)),r}function Ln(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Di(n,e,t,r){let i=(e||n).node(t),o=0,s=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Ln(n.nodeAfter,r),o++));for(let l=o;l<s;l++)Ln(i.child(l),r);e&&e.depth==t&&e.textOffset&&Ln(e.nodeBefore,r)}function $n(n,e){return n.type.checkContent(e),n.copy(e)}function lh(n,e,t,r,i){let o=n.depth>i&&_a(n,e,i+1),s=r.depth>i&&_a(t,r,i+1),l=[];return Di(null,n,i,l),o&&s&&e.index(i)==t.index(i)?(sh(o,s),Ln($n(o,lh(n,e,t,r,i+1)),l)):(o&&Ln($n(o,$s(n,e,i+1)),l),Di(e,t,i,l),s&&Ln($n(s,$s(t,r,i+1)),l)),Di(r,null,i,l),new S(l)}function $s(n,e,t){let r=[];if(Di(null,n,t,r),n.depth>t){let i=_a(n,e,t+1);Ln($n(i,$s(n,e,t+1)),r)}return Di(e,null,t,r),new S(r)}function J0(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(S.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Hi{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return V.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new W0(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),u=o-a;if(r.push(s,l,i+a),!u||(s=s.child(l),s.isText))break;o=u-1,i+=a+1}return new Hi(t,r,o)}static resolveCached(e,t){let r=Lf.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==t)return s}else Lf.set(e,r=new V0);let i=r.elts[r.i]=Hi.resolve(e,t);return r.i=(r.i+1)%_0,i}}class V0{constructor(){this.elts=[],this.i=0}}const _0=12,Lf=new WeakMap;class W0{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const U0=Object.create(null);class vt{constructor(e,t,r,i=V.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||S.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Ls(this.attrs,t||e.defaultAttrs||U0)&&V.sameSet(this.marks,r||V.none)}copy(e=null){return e==this.content?this:new vt(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new vt(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return k.empty;let i=this.resolve(e),o=this.resolve(t),s=r?0:i.sharedDepth(t),l=i.start(s),u=i.node(s).content.cut(i.pos-l,o.pos-l);return new k(u,i.depth-s,o.depth-s)}replace(e,t,r){return B0(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Hi.resolveCached(this,e)}resolveNoCache(e){return Hi.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ah(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=S.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=V.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!V.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=S.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,i,r);return o.type.checkAttrs(o.attrs),o}}vt.prototype.text=void 0;class bs extends vt{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ah(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new bs(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new bs(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ah(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class _n{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new H0(e,t);if(r.next==null)return _n.empty;let i=uh(r);r.next&&r.err("Unexpected trailing text");let o=G0(X0(i));return Z0(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!t||a.validEnd))return S.from(l.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:f}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,l.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}_n.empty=new _n(!0);class H0{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function uh(n){let e=[];do e.push(K0(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function K0(n){let e=[];do e.push(j0(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function j0(n){let e=Y0(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Q0(n,e);else break;return e}function $f(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Q0(n,e){let t=$f(n),r=t;return n.eat(",")&&(n.next!="}"?r=$f(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function q0(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let s=t[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function Y0(n){if(n.eat("(")){let e=uh(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=q0(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function X0(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(s,l,a){let u={term:a,to:l};return e[s].push(u),u}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,u)=>a.concat(o(u,l)),[]);if(s.type=="seq")for(let a=0;;a++){let u=o(s.exprs[a],l);if(a==s.exprs.length-1)return u;i(u,l=t())}else if(s.type=="star"){let a=t();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=t();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let u=0;u<s.min;u++){let c=t();i(o(s.expr,a),c),a=c}if(s.max==-1)i(o(s.expr,a),a);else for(let u=s.min;u<s.max;u++){let c=t();r(a,c),i(o(s.expr,a),c),a=c}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function ch(n,e){return e-n}function bf(n,e){let t=[];return r(e),t.sort(ch);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&t.indexOf(a)==-1&&r(a)}}}function G0(n){let e=Object.create(null);return t(bf(n,0));function t(r){let i=[];r.forEach(s=>{n[s].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<i.length;c++)i[c][0]==l&&(u=i[c][1]);bf(n,a).forEach(c=>{u||i.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new _n(r.indexOf(n.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(ch);o.next.push({type:i[s][0],next:e[l.join(",")]||t(l)})}return o}}function Z0(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:u}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function fh(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function dh(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function ph(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(e[i])}}function hh(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new t1(n,r,e[r]);return t}let Bf=class mh{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=hh(e,r.attrs),this.defaultAttrs=fh(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==_n.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:dh(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new vt(this,this.computeAttrs(e),S.from(t),V.setFrom(r))}createChecked(e=null,t,r){return t=S.from(t),this.checkContent(t),new vt(this,this.computeAttrs(e),t,V.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=S.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(S.empty,!0);return o?new vt(this,e,t.append(o),V.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ph(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:V.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,s)=>r[o]=new mh(o,t,s));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function e1(n,e,t){let r=t.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class t1{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?e1(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class vo{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=hh(e,i.attrs),this.excluded=null;let o=fh(this.attrs);this.instance=o?new V(this,o):null}create(e=null){return!e&&this.instance?this.instance:new V(this,dh(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new vo(o,i++,t,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){ph(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class gh{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=pe.from(e.nodes),t.marks=pe.from(e.marks||{}),this.nodes=Bf.compile(this.spec.nodes,this),this.marks=vo.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=_n.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?Jf(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Jf(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Bf){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new bs(r,r.defaultAttrs,e,V.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return vt.fromJSON(this,e)}markFromJSON(e){return V.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Jf(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],s=o;if(o)t.push(o);else for(let l in n.marks){let a=n.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&t.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function n1(n){return n.tag!=null}function r1(n){return n.style!=null}class Bs{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(n1(i))this.tags.push(i);else if(r1(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new _f(this,t,!1);return r.addAll(e,V.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new _f(this,t,!0);return r.addAll(e,V.none,t.from,t.to),k.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(s1(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<t.length;s++){let l=t[s];if((l.priority==null?50:l.priority)<o)break}t.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Wf(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Wf(s)),s.node||s.ignore||s.mark||(s.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Bs(e,Bs.schemaRules(e)))}}const yh={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},i1={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},wh={ol:!0,ul:!0},Js=1,Vs=2,zi=4;function Vf(n,e,t){return e!=null?(e?Js:0)|(e==="full"?Vs:0):n&&n.whitespace=="pre"?Js|Vs:t&~zi}class Lo{constructor(e,t,r,i,o,s){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=V.none,this.match=o||(s&zi?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(S.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Js)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=S.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(S.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!yh.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class _f{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,o,s=Vf(null,t.preserveWhitespace,0)|(r?zi:0);i?o=new Lo(i.type,i.attrs,V.none,!0,t.topMatch||i.type.contentMatch,s):r?o=new Lo(null,null,V.none,!0,null,s):o=new Lo(e.schema.topNodeType,null,V.none,!0,null,s),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top;if(i.options&Vs||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i.options&Js)i.options&Vs?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],s=e.previousSibling;(!o||s&&s.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=e.nodeName.toLowerCase(),o;wh.hasOwnProperty(i)&&this.parser.normalizeLists&&o1(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));if(s?s.ignore:i1.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let l,a=this.top,u=this.needsBlock;if(yh.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),l=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);return}let c=s&&s.skip?t:this.readStyles(e,t);c&&this.addAll(e,c),l&&this.sync(a),this.needsBlock=u}else{let l=this.readStyles(e,t);l&&this.addElementByRule(e,s,l,s.consuming===!1?o:void 0)}}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?t=t.filter(u=>!a.clearMark(u)):t=t.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return t}addElementByRule(e,t,r,i){let o,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,t.attrs||null,r,t.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[t.mark];r=r.concat(a.create(t.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a,r)}o&&this.sync(l)&&this.open--}addAll(e,t,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,t);this.findAtPoint(e,o)}findPlace(e,t){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=s,!l.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)t=this.enterInner(r[o],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=V.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):Uf(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let o=this.findPlace(e.create(t),r);return o&&(o=this.enterInner(e,t,r,!0,i)),o}enterInner(e,t,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=Vf(e,o,s.options);s.options&zi&&s.content.length==0&&(l|=zi);let a=V.none;return r=r.filter(u=>(s.type?s.type.allowsMarkType(u.type):Uf(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new Lo(e,t,a,i,null,l)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let u=t[l];if(u==""){if(l==t.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let c=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;a--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function o1(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&wh.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function s1(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Wf(n){let e={};for(let t in n)e[t]=n[t];return e}function Uf(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}class Sl{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Hl(t).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let u=s.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(o[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let u=s.marks[a++],c=this.serializeMark(u,s.isInline,t);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=as(Hl(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&as(Hl(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return as(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Sl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Hf(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Hf(e.marks)}}function Hf(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Hl(n){return n.document||window.document}const Kf=new WeakMap;function l1(n){let e=Kf.get(n);return e===void 0&&Kf.set(n,e=a1(n)),e}function a1(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function as(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=l1(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(t=i.slice(0,s),i=i.slice(s+1));let l,a=t?n.createElementNS(t,i):n.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let f in u)if(u[f]!=null){let d=f.indexOf(" ");d>0?a.setAttributeNS(f.slice(0,d),f.slice(d+1),u[f]):a.setAttribute(f,u[f])}}for(let f=c;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:p,contentDOM:h}=as(n,d,t,r);if(a.appendChild(p),h){if(l)throw new RangeError("Multiple content holes");l=h}}}return{dom:a,contentDOM:l}}const kh=65535,vh=Math.pow(2,16);function u1(n,e){return n+e*vh}function jf(n){return n&kh}function c1(n){return(n-(n&kh))/vh}const Sh=1,xh=2,us=4,Ch=8;let Qf=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Ch)>0}get deletedBefore(){return(this.delInfo&(Sh|us))>0}get deletedAfter(){return(this.delInfo&(xh|us))>0}get deletedAcross(){return(this.delInfo&us)>0}},Ar=class rr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&rr.empty)return rr.empty}recover(e){let t=0,r=jf(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+c1(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:t:t,p=a+i+(d<0?0:c);if(r)return p;let h=e==(t<0?a:f)?null:u1(l/3,e-a),g=e==a?xh:e==f?Sh:us;return(t<0?e!=a:e!=f)&&(g|=Ch),new Qf(p,g,h)}i+=c-u}return r?e+i:new Qf(e+i,0,null)}touches(e,t){let r=0,i=jf(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new rr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?rr.empty:new rr(e<0?[0,-e,0]:[0,0,e])}};Ar.empty=new Ar([]);const Kl=Object.create(null);let Be=class{getMap(){return Ar.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Kl[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Kl)throw new RangeError("Duplicate use of step JSON ID "+e);return Kl[e]=t,t.prototype.jsonID=e,t}},Ae=class ii{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new ii(e,null)}static fail(e){return new ii(null,e)}static fromReplace(e,t,r,i){try{return ii.ok(e.replace(t,r,i))}catch(o){if(o instanceof un)return ii.fail(o.message);throw o}}};function dc(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(dc(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return S.fromArray(r)}let Eh=class oi extends Be{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new k(dc(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return Ae.fromReplace(e,this.from,this.to,o)}invert(){return new Nh(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new oi(t.pos,r.pos,this.mark)}merge(e){return e instanceof oi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new oi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new oi(t.from,t.to,e.markFromJSON(t.mark))}};Be.jsonID("addMark",Eh);let Nh=class si extends Be{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new k(dc(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Ae.fromReplace(e,this.from,this.to,r)}invert(){return new Eh(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new si(t.pos,r.pos,this.mark)}merge(e){return e instanceof si&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new si(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new si(t.from,t.to,e.markFromJSON(t.mark))}};Be.jsonID("removeMark",Nh);let Mh=class li extends Be{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ae.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Ae.fromReplace(e,this.pos,this.pos+1,new k(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new li(this.pos,t.marks[i]);return new li(this.pos,this.mark)}}return new Rh(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new li(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new li(t.pos,e.markFromJSON(t.mark))}};Be.jsonID("addNodeMark",Mh);let Rh=class Wa extends Be{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ae.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Ae.fromReplace(e,this.pos,this.pos+1,new k(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Mh(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Wa(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Wa(t.pos,e.markFromJSON(t.mark))}};Be.jsonID("removeNodeMark",Rh);let pc=class En extends Be{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Ua(e,this.from,this.to)?Ae.fail("Structure replace would overwrite content"):Ae.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ar([this.from,this.to-this.from,this.slice.size])}invert(e){return new En(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new En(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof En)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new En(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new En(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new En(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}};Be.jsonID("replace",pc);let _s=class cs extends Be{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Ua(e,this.from,this.gapFrom)||Ua(e,this.gapTo,this.to)))return Ae.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Ae.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Ae.fromReplace(e,this.from,this.to,r):Ae.fail("Content does not fit in gap")}getMap(){return new Ar([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new cs(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new cs(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new cs(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}};Be.jsonID("replaceAround",_s);function Ua(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function f1(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function hc(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,s,t))return r;if(r==0||i.type.spec.isolating||!f1(i,o,s))break}return null}function fs(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=t-2;u>o;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(d,f.childCount),h=r&&r[c]||f;if(h!=f&&(p=p.replaceChild(0,h.type.create(h.attrs))),!f.canReplace(d+1,f.childCount)||!h.type.validContent(p))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function Oh(n,e){let t=n.resolve(e),r=t.index();return d1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function d1(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Th(n,e,t=e,r=k.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return p1(i,o,r)?new pc(e,t,r):new h1(i,o,r).fit()}function p1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}let h1=class{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=S.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=S.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new k(o,s,l);return e>-1?new _s(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new pc(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=jl(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,f=null;if(t==1&&(s?u.matchType(s.type)||(f=u.fillBefore(S.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:f};if(t==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=jl(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new k(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=jl(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new k(ai(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new k(ai(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[t];if(i){for(let g=0;g<i.childCount;g++)c.push(i.child(g));f=f.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let g=l.child(u),v=f.matchType(g.type);if(!v)break;u++,(u>1||a==0||g.content.size)&&(f=v,c.push(Ah(g.mark(d.allowedMarks(g.marks)),u==1?a:0,u==l.childCount?p:-1)))}let h=u==l.childCount;h||(p=-1),this.placed=ui(this.placed,t,S.from(c)),this.frontier[t].match=f,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=l;g<p;g++){let m=v.lastChild;this.frontier.push({type:m.type,match:m.contentMatchAt(m.childCount)}),v=m.content}this.unplaced=h?e==0?k.empty:new k(ai(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new k(ai(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ql(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Ql(e,t,i,r,o);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=Ql(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=ui(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ui(this.placed,this.depth,S.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(S.empty,!0);t.childCount&&(this.placed=ui(this.placed,this.frontier.length,t))}};function ai(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(ai(n.firstChild.content,e-1,t)))}function ui(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(ui(n.lastChild.content,e-1,t)))}function jl(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Ah(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Ah(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(S.empty,!0)))),n.copy(r)}function Ql(n,e,t,r,i){let o=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!m1(t,o.content,s)?l:null}function m1(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}let g1=class ds extends Be{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ae.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Ae.fromReplace(e,this.pos,this.pos+1,new k(S.from(i),0,t.isLeaf?0:1))}getMap(){return Ar.empty}invert(e){return new ds(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ds(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ds(t.pos,t.attr,t.value)}};Be.jsonID("attr",g1);let Ki=class extends Error{};Ki=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Ki.prototype=Object.create(Error.prototype);Ki.prototype.constructor=Ki;Ki.prototype.name="TransformError";const Dh=65535,zh=Math.pow(2,16);function y1(n,e){return n+e*zh}function qf(n){return n&Dh}function w1(n){return(n-(n&Dh))/zh}const Ih=1,Ph=2,ps=4,Fh=8;let Ha=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Fh)>0}get deletedBefore(){return(this.delInfo&(Ih|ps))>0}get deletedAfter(){return(this.delInfo&(Ph|ps))>0}get deletedAcross(){return(this.delInfo&ps)>0}},Dr=class ir{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ir.empty)return ir.empty}recover(e){let t=0,r=qf(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+w1(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:t:t,p=a+i+(d<0?0:c);if(r)return p;let h=e==(t<0?a:f)?null:y1(l/3,e-a),g=e==a?Ph:e==f?Ih:ps;return(t<0?e!=a:e!=f)&&(g|=Fh),new Ha(p,g,h)}i+=c-u}return r?e+i:new Ha(e+i,0,null)}touches(e,t){let r=0,i=qf(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new ir(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ir.empty:new ir(e<0?[0,-e,0]:[0,0,e])}};Dr.empty=new Dr([]);let k1=class hs{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new hs(this.maps,this.mirror,e,t)}copy(){return new hs(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new hs;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],l=s.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Ha(e,i,null)}};const ql=Object.create(null);let Je=class{getMap(){return Dr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ql[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ql)throw new RangeError("Duplicate use of step JSON ID "+e);return ql[e]=t,t.prototype.jsonID=e,t}},De=class ci{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new ci(e,null)}static fail(e){return new ci(null,e)}static fromReplace(e,t,r,i){try{return ci.ok(e.replace(t,r,i))}catch(o){if(o instanceof un)return ci.fail(o.message);throw o}}};function mc(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(mc(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return S.fromArray(r)}let gc=class fi extends Je{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new k(mc(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return De.fromReplace(e,this.from,this.to,o)}invert(){return new So(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new fi(t.pos,r.pos,this.mark)}merge(e){return e instanceof fi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new fi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new fi(t.from,t.to,e.markFromJSON(t.mark))}};Je.jsonID("addMark",gc);let So=class di extends Je{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new k(mc(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return De.fromReplace(e,this.from,this.to,r)}invert(){return new gc(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new di(t.pos,r.pos,this.mark)}merge(e){return e instanceof di&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new di(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new di(t.from,t.to,e.markFromJSON(t.mark))}};Je.jsonID("removeMark",So);let yc=class pi extends Je{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return De.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return De.fromReplace(e,this.pos,this.pos+1,new k(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new pi(this.pos,t.marks[i]);return new pi(this.pos,this.mark)}}return new wc(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new pi(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new pi(t.pos,e.markFromJSON(t.mark))}};Je.jsonID("addNodeMark",yc);let wc=class Ka extends Je{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return De.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return De.fromReplace(e,this.pos,this.pos+1,new k(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new yc(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ka(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ka(t.pos,e.markFromJSON(t.mark))}};Je.jsonID("removeNodeMark",wc);let dn=class Nn extends Je{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&ja(e,this.from,this.to)?De.fail("Structure replace would overwrite content"):De.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Dr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Nn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Nn(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Nn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Nn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Nn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Nn(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}};Je.jsonID("replace",dn);let Qn=class ms extends Je{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(ja(e,this.from,this.gapFrom)||ja(e,this.gapTo,this.to)))return De.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return De.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?De.fromReplace(e,this.from,this.to,r):De.fail("Content does not fit in gap")}getMap(){return new Dr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ms(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new ms(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ms(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}};Je.jsonID("replaceAround",Qn);function ja(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function v1(n,e,t,r){let i=[],o=[],s,l;n.doc.nodesBetween(e,t,(a,u,c)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),p=Math.min(u+a.nodeSize,t),h=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(h)||(s&&s.to==d&&s.mark.eq(f[g])?s.to=p:i.push(s=new So(d,p,f[g])));l&&l.to==d?l.to=p:o.push(l=new gc(d,p,r))}}),i.forEach(a=>n.step(a)),o.forEach(a=>n.step(a))}function S1(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof vo){let u=s.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,t);for(let c=0;c<a.length;c++){let f=a[c],d;for(let p=0;p<i.length;p++){let h=i[p];h.step==o-1&&f.eq(i[p].style)&&(d=h)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(l,e),to:u,step:o})}}}),i.forEach(s=>n.step(new So(s.from,s.to,s.style)))}function x1(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),o=[],s=e+1;for(let l=0;l<i.childCount;l++){let a=i.child(l),u=s+a.nodeSize,c=r.matchType(a.type);if(!c)o.push(new dn(s,u,k.empty));else{r=c;for(let f=0;f<a.marks.length;f++)t.allowsMarkType(a.marks[f].type)||n.step(new So(s,u,a.marks[f]))}s=u}if(!r.validEnd){let l=r.fillBefore(S.empty,!0);n.replace(s,s,new k(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function C1(n,e,t){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,u=l,c=S.empty,f=0;for(let h=o,g=!1;h>t;h--)g||r.index(h)>0?(g=!0,c=S.from(r.node(h).copy(c)),f++):a--;let d=S.empty,p=0;for(let h=o,g=!1;h>t;h--)g||i.after(h+1)<i.end(h)?(g=!0,d=S.from(i.node(h).copy(d)),p++):u++;n.step(new Qn(a,u,s,l,new k(c.append(d),f,p),c.size-f,!0))}function E1(n,e,t){let r=S.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let l=t[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=S.from(t[s].type.create(t[s].attrs,r))}let i=e.start,o=e.end;n.step(new Qn(i,o,i,o,new k(r,0,0),t.length,!0))}function N1(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(s,l)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&M1(n.doc,n.mapping.slice(o).map(l),r)){n.clearIncompatible(n.mapping.slice(o).map(l,1),r);let a=n.mapping.slice(o),u=a.map(l,1),c=a.map(l+s.nodeSize,1);return n.step(new Qn(u,c,u+1,c-1,new k(S.from(r.create(i,null,s.marks)),0,0),1,!0)),!1}})}function M1(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function R1(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let s=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Qn(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new k(S.from(s),0,0),1,!0))}function O1(n,e,t=1,r){let i=n.doc.resolve(e),o=S.empty,s=S.empty;for(let l=i.depth,a=i.depth-t,u=t-1;l>a;l--,u--){o=S.from(i.node(l).copy(o));let c=r&&r[u];s=S.from(c?c.type.create(c.attrs,s):i.node(l).copy(s))}n.step(new dn(e,e,new k(o.append(s),t,t),!0))}function T1(n,e,t){let r=new dn(e-t,e+t,k.empty,!0);n.step(r)}function A1(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function D1(n,e,t=e,r=k.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return Lh(i,o,r)?new dn(e,t,r):new z1(i,o,r).fit()}function Lh(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}let z1=class{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=S.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=S.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new k(o,s,l);return e>-1?new Qn(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new dn(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Yl(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,f=null;if(t==1&&(s?u.matchType(s.type)||(f=u.fillBefore(S.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:f};if(t==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Yl(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new k(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Yl(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new k(hi(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new k(hi(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[t];if(i){for(let g=0;g<i.childCount;g++)c.push(i.child(g));f=f.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let g=l.child(u),v=f.matchType(g.type);if(!v)break;u++,(u>1||a==0||g.content.size)&&(f=v,c.push($h(g.mark(d.allowedMarks(g.marks)),u==1?a:0,u==l.childCount?p:-1)))}let h=u==l.childCount;h||(p=-1),this.placed=mi(this.placed,t,S.from(c)),this.frontier[t].match=f,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=l;g<p;g++){let m=v.lastChild;this.frontier.push({type:m.type,match:m.contentMatchAt(m.childCount)}),v=m.content}this.unplaced=h?e==0?k.empty:new k(hi(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new k(hi(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Xl(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Xl(e,t,i,r,o);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=Xl(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=mi(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=mi(this.placed,this.depth,S.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(S.empty,!0);t.childCount&&(this.placed=mi(this.placed,this.frontier.length,t))}};function hi(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(hi(n.firstChild.content,e-1,t)))}function mi(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(mi(n.lastChild.content,e-1,t)))}function Yl(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function $h(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,$h(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(S.empty,!0)))),n.copy(r)}function Xl(n,e,t,r,i){let o=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!I1(t,o.content,s)?l:null}function I1(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function P1(n){return n.spec.defining||n.spec.definingForContent}function F1(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(Lh(i,o,r))return n.step(new dn(e,t,r));let s=Bh(i,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let d=i.depth,p=i.pos-1;d>0;d--,p--){let h=i.node(d).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(d)>-1?l=d:i.before(d)==p&&s.splice(1,0,-d)}let a=s.indexOf(l),u=[],c=r.openStart;for(let d=r.content,p=0;;p++){let h=d.firstChild;if(u.push(h),p==r.openStart)break;d=h.content}for(let d=c-1;d>=0;d--){let p=u[d].type,h=P1(p);if(h&&i.node(a).type!=p)c=d;else if(h||!p.isTextblock)break}for(let d=r.openStart;d>=0;d--){let p=(d+c+1)%(r.openStart+1),h=u[p];if(h)for(let g=0;g<s.length;g++){let v=s[(g+a)%s.length],m=!0;v<0&&(m=!1,v=-v);let y=i.node(v-1),w=i.index(v-1);if(y.canReplaceWith(w,w,h.type,h.marks))return n.replace(i.before(v),m?o.after(v):t,new k(bh(r.content,0,r.openStart,p),p,r.openEnd))}}let f=n.steps.length;for(let d=s.length-1;d>=0&&(n.replace(e,t,r),!(n.steps.length>f));d--){let p=s[d];p<0||(e=i.before(p),t=o.after(p))}}function bh(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(bh(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(n).append(n);n=s.append(o.matchFragment(s).fillBefore(S.empty,!0))}return n}function L1(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=A1(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new k(S.from(r),0,0))}function $1(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=Bh(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return n.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&i.end(s)-t!=i.depth-s)return n.delete(r.before(s),t);n.delete(e,t)}function Bh(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}let Jh=class gs extends Je{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return De.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return De.fromReplace(e,this.pos,this.pos+1,new k(S.from(i),0,t.isLeaf?0:1))}getMap(){return Dr.empty}invert(e){return new gs(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new gs(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new gs(t.pos,t.attr,t.value)}};Je.jsonID("attr",Jh);let zr=class extends Error{};zr=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};zr.prototype=Object.create(Error.prototype);zr.prototype.constructor=zr;zr.prototype.name="TransformError";let b1=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new k1}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new zr(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=k.empty){let i=D1(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new k(S.from(r),0,0))}delete(e,t){return this.replace(e,t,k.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return F1(this,e,t,r),this}replaceRangeWith(e,t,r){return L1(this,e,t,r),this}deleteRange(e,t){return $1(this,e,t),this}lift(e,t){return C1(this,e,t),this}join(e,t=1){return T1(this,e,t),this}wrap(e,t){return E1(this,e,t),this}setBlockType(e,t=e,r,i=null){return N1(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return R1(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Jh(e,t,r)),this}addNodeMark(e,t){return this.step(new yc(e,t)),this}removeNodeMark(e,t){if(!(t instanceof V)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new wc(e,t)),this}split(e,t=1,r){return O1(this,e,t,r),this}addMark(e,t,r){return v1(this,e,t,r),this}removeMark(e,t,r){return S1(this,e,t,r),this}clearIncompatible(e,t,r){return x1(this,e,t,r),this}};const Gl=Object.create(null);class P{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Vh(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=k.empty){let r=t.content.lastChild,i=null;for(let l=0;l<t.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:u}=s[l],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(u.pos),l?k.empty:t),l==0&&Gf(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),u=a.map(s.pos),c=a.map(l.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,t),Gf(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new B(e):or(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=t<0?or(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):or(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new je(e.node(0))}static atStart(e){return or(e,e,0,0,1)||new je(e)}static atEnd(e){return or(e,e,e.content.size,e.childCount,-1)||new je(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Gl[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Gl)throw new RangeError("Duplicate use of selection JSON ID "+e);return Gl[e]=t,t.prototype.jsonID=e,t}getBookmark(){return B.between(this.$anchor,this.$head).getBookmark()}}P.prototype.visible=!0;class Vh{constructor(e,t){this.$from=e,this.$to=t}}let Yf=!1;function Xf(n){!Yf&&!n.parent.inlineContent&&(Yf=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class B extends P{constructor(e,t=e){Xf(e),Xf(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return P.near(r);let i=e.resolve(t.map(this.anchor));return new B(i.parent.inlineContent?i:r,r)}replace(e,t=k.empty){if(super.replace(e,t),t==k.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof B&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new xl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new B(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=P.findFrom(t,r,!0)||P.findFrom(t,-r,!0);if(o)t=o.$head;else return P.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(P.findFrom(e,-r,!0)||P.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new B(e,t)}}P.jsonID("text",B);class xl{constructor(e,t){this.anchor=e,this.head=t}map(e){return new xl(e.map(this.anchor),e.map(this.head))}resolve(e){return B.between(e.resolve(this.anchor),e.resolve(this.head))}}class z extends P{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?P.near(o):new z(o)}content(){return new k(S.from(this.node),0,0)}eq(e){return e instanceof z&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new kc(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new z(e.resolve(t.anchor))}static create(e,t){return new z(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}z.prototype.visible=!1;P.jsonID("node",z);class kc{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new xl(r,r):new kc(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&z.isSelectable(r)?new z(t):P.near(t)}}class je extends P{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=k.empty){if(t==k.empty){e.delete(0,e.doc.content.size);let r=P.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new je(e)}map(e){return new je(e)}eq(e){return e instanceof je}getBookmark(){return B1}}P.jsonID("all",je);const B1={map(){return this},resolve(n){return new je(n)}};function or(n,e,t,r,i,o=!1){if(e.inlineContent)return B.create(n,t);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&z.isSelectable(l))return z.create(n,t-(i<0?l.nodeSize:0))}else{let a=or(n,l,t+i,i<0?l.childCount:0,i,o);if(a)return a}t+=l.nodeSize*i}return null}function Gf(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof dn||i instanceof Qn))return;let o=n.mapping.maps[r],s;o.forEach((l,a,u,c)=>{s==null&&(s=c)}),n.setSelection(P.near(n.doc.resolve(s),t))}const Zf=1,$o=2,ed=4;class J1 extends b1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Zf)&~$o,this.storedMarks=null,this}get selectionSet(){return(this.updated&Zf)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=$o,this}ensureMarks(e){return V.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&$o)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~$o,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||V.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(t);o=r==t?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(P.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=ed,this}get scrolledIntoView(){return(this.updated&ed)>0}}function td(n,e){return!e||!n?n:n.bind(e)}class gi{constructor(e,t,r){this.name=e,this.init=td(t.init,r),this.apply=td(t.apply,r)}}const V1=[new gi("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new gi("selection",{init(n,e){return n.selection||P.atStart(e.doc)},apply(n){return n.selection}}),new gi("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new gi("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Zl{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=V1.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new gi(r.key,r.spec.state,r))})}}class zn{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,u=i?i[s].state:this,c=a<t.length&&l.spec.appendTransaction.call(l,a?t.slice(a):t,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:t.length}:{state:this,n:0})}t.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new zn(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new J1(this)}static create(e){let t=new Zl(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new zn(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Zl(this.schema,e.plugins),r=t.fields,i=new zn(t);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Zl(e.schema,e.plugins),o=new zn(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=vt.fromJSON(e.schema,t.doc);else if(s.name=="selection")o.selection=P.fromJSON(o.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){o[s.name]=u.fromJSON.call(a,e,t[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function _h(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=_h(i,e,{})),t[r]=i}return t}class pn{constructor(e){this.spec=e,this.props={},e.props&&_h(e.props,this,this.props),this.key=e.key?e.key.key:Wh("plugin")}getState(e){return e[this.key]}}const ea=Object.create(null);function Wh(n){return n in ea?n+"$"+ ++ea[n]:(ea[n]=0,n+"$")}class Cl{constructor(e="key"){this.key=Wh(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Uh=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function _1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const W1=(n,e,t)=>{let r=_1(n,t);if(!r)return!1;let i=Hh(r);if(!i){let s=r.blockRange(),l=s&&hc(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&jh(n,i,e))return!0;if(r.parent.content.size==0&&(Ir(o,"end")||z.isSelectable(o))){let s=Th(n.doc,r.before(),r.after(),k.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=n.tr.step(s);l.setSelection(Ir(o,"end")?P.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):z.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function Ir(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const U1=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=Hh(r)}let s=o&&o.nodeBefore;return!s||!z.isSelectable(s)?!1:(e&&e(n.tr.setSelection(z.create(n.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Hh(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function H1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const K1=(n,e,t)=>{let r=H1(n,t);if(!r)return!1;let i=Kh(r);if(!i)return!1;let o=i.nodeAfter;if(jh(n,i,e))return!0;if(r.parent.content.size==0&&(Ir(o,"start")||z.isSelectable(o))){let s=Th(n.doc,r.before(),r.after(),k.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=n.tr.step(s);l.setSelection(Ir(o,"start")?P.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):z.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},j1=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=Kh(r)}let s=o&&o.nodeAfter;return!s||!z.isSelectable(s)?!1:(e&&e(n.tr.setSelection(z.create(n.doc,o.pos)).scrollIntoView()),!0)};function Kh(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Q1=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function vc(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const q1=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),s=vc(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=t.after(),a=n.tr.replaceWith(l,l,s.createAndFill());a.setSelection(P.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},Y1=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof je||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=vc(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=n.tr.insert(s,o.createAndFill());l.setSelection(B.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},X1=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(fs(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&hc(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function G1(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof z&&e.selection.node.isBlock)return!r.parentOffset||!fs(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){let o=i.parentOffset==i.parent.content.size,s=e.tr;(e.selection instanceof B||e.selection instanceof je)&&s.deleteSelection();let l=r.depth==0?null:vc(r.node(-1).contentMatchAt(r.indexAfter(-1))),a=o&&l?[{type:l}]:void 0,u=fs(s.doc,s.mapping.map(r.pos),1,a);if(!a&&!u&&fs(s.doc,s.mapping.map(r.pos),1,l?[{type:l}]:void 0)&&(l&&(a=[{type:l}]),u=!0),u&&(s.split(s.mapping.map(r.pos),1,a),!o&&!r.parentOffset&&r.parent.type!=l)){let c=s.mapping.map(r.before()),f=s.doc.resolve(c);l&&r.node(-1).canReplaceWith(f.index(),f.index()+1,l)&&s.setNodeMarkup(s.mapping.map(r.before()),l)}t(s.scrollIntoView())}return!0}}const Z1=G1(),ew=(n,e)=>(e&&e(n.tr.setSelection(new je(n.doc))),!0);function tw(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Oh(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function jh(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(tw(n,e,t))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(t){let f=e.pos+i.nodeSize,d=S.empty;for(let g=o.length-1;g>=0;g--)d=S.from(o[g].create(null,d));d=S.from(r.copy(d));let p=n.tr.step(new _s(e.pos-1,f,e.pos,f,new k(d,1,0),o.length,!0)),h=f+2*o.length;Oh(p.doc,h)&&p.join(h),t(p.scrollIntoView())}return!0}let a=P.findFrom(e,1),u=a&&a.$from.blockRange(a.$to),c=u&&hc(u);if(c!=null&&c>=e.depth)return t&&t(n.tr.lift(u,c).scrollIntoView()),!0;if(l&&Ir(i,"start",!0)&&Ir(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let p=i,h=1;for(;!p.isTextblock;p=p.firstChild)h++;if(f.canReplace(f.childCount,f.childCount,p.content)){if(t){let g=S.empty;for(let m=d.length-1;m>=0;m--)g=S.from(d[m].copy(g));let v=n.tr.step(new _s(e.pos-d.length,e.pos+i.nodeSize,e.pos+h,e.pos+i.nodeSize-h,new k(g,d.length,0),0,!0));t(v.scrollIntoView())}return!0}}return!1}function Qh(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(B.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const nw=Qh(-1),rw=Qh(1);function iw(n,e,t){for(let r=0;r<e.length;r++){let{$from:i,$to:o}=e[r],s=i.depth==0?n.inlineContent&&n.type.allowsMarkType(t):!1;if(n.nodesBetween(i.pos,o.pos,l=>{if(s)return!1;s=l.inlineContent&&l.type.allowsMarkType(t)}),s)return!0}return!1}function nd(n,e=null){return function(t,r){let{empty:i,$cursor:o,ranges:s}=t.selection;if(i&&!o||!iw(t.doc,s,n))return!1;if(r)if(o)n.isInSet(t.storedMarks||o.marks())?r(t.tr.removeStoredMark(n)):r(t.tr.addStoredMark(n.create(e)));else{let l=!1,a=t.tr;for(let u=0;!l&&u<s.length;u++){let{$from:c,$to:f}=s[u];l=t.doc.rangeHasMark(c.pos,f.pos,n)}for(let u=0;u<s.length;u++){let{$from:c,$to:f}=s[u];if(l)a.removeMark(c.pos,f.pos,n);else{let d=c.pos,p=f.pos,h=c.nodeAfter,g=f.nodeBefore,v=h&&h.isText?/^\s*/.exec(h.text)[0].length:0,m=g&&g.isText?/\s*$/.exec(g.text)[0].length:0;d+v<p&&(d+=v,p-=m),a.addMark(d,p,n.create(e))}}r(a.scrollIntoView())}return!0}}function Sc(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}let ta=Sc(Uh,W1,U1),rd=Sc(Uh,K1,j1);const At={Enter:Sc(Q1,Y1,X1,Z1),"Mod-Enter":q1,Backspace:ta,"Mod-Backspace":ta,"Shift-Backspace":ta,Delete:rd,"Mod-Delete":rd,"Mod-a":ew},qh={"Ctrl-h":At.Backspace,"Alt-Backspace":At["Mod-Backspace"],"Ctrl-d":At.Delete,"Ctrl-Alt-Backspace":At["Mod-Delete"],"Alt-Delete":At["Mod-Delete"],"Alt-d":At["Mod-Delete"],"Ctrl-a":nw,"Ctrl-e":rw};for(let n in At)qh[n]=At[n];const ow=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,sw=ow?qh:At;var Et={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ws={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},id=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),lw=typeof navigator<"u"&&/Mac/.test(navigator.platform),aw=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),uw=lw||id&&+id[1]<57;for(var me=0;me<10;me++)Et[48+me]=Et[96+me]=String(me);for(var me=1;me<=24;me++)Et[me+111]="F"+me;for(var me=65;me<=90;me++)Et[me]=String.fromCharCode(me+32),Ws[me]=String.fromCharCode(me);for(var na in Et)Ws.hasOwnProperty(na)||(Ws[na]=Et[na]);function xc(n){var e=uw&&(n.ctrlKey||n.altKey||n.metaKey)||aw&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ws:Et)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const cw=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function fw(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))cw?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function dw(n){let e=Object.create(null);for(let t in n)e[fw(t)]=n[t];return e}function ra(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function pw(n){let e=dw(n);return function(t,r){let i=xc(r),o,s=e[ra(i,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[ra(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Et[r.keyCode])&&o!=i){let l=e[ra(o,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const Yh=65535,Xh=Math.pow(2,16);function hw(n,e){return n+e*Xh}function od(n){return n&Yh}function mw(n){return(n-(n&Yh))/Xh}const Gh=1,Zh=2,ys=4,em=8;let sd=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&em)>0}get deletedBefore(){return(this.delInfo&(Gh|ys))>0}get deletedAfter(){return(this.delInfo&(Zh|ys))>0}get deletedAcross(){return(this.delInfo&ys)>0}},Pr=class sr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&sr.empty)return sr.empty}recover(e){let t=0,r=od(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+mw(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:t:t,p=a+i+(d<0?0:c);if(r)return p;let h=e==(t<0?a:f)?null:hw(l/3,e-a),g=e==a?Zh:e==f?Gh:ys;return(t<0?e!=a:e!=f)&&(g|=em),new sd(p,g,h)}i+=c-u}return r?e+i:new sd(e+i,0,null)}touches(e,t){let r=0,i=od(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new sr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?sr.empty:new sr(e<0?[0,-e,0]:[0,0,e])}};Pr.empty=new Pr([]);const ia=Object.create(null);let Ve=class{getMap(){return Pr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ia[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ia)throw new RangeError("Duplicate use of step JSON ID "+e);return ia[e]=t,t.prototype.jsonID=e,t}},ze=class yi{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new yi(e,null)}static fail(e){return new yi(null,e)}static fromReplace(e,t,r,i){try{return yi.ok(e.replace(t,r,i))}catch(o){if(o instanceof un)return yi.fail(o.message);throw o}}};function Cc(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(Cc(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return S.fromArray(r)}let tm=class wi extends Ve{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new k(Cc(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return ze.fromReplace(e,this.from,this.to,o)}invert(){return new nm(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new wi(t.pos,r.pos,this.mark)}merge(e){return e instanceof wi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new wi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new wi(t.from,t.to,e.markFromJSON(t.mark))}};Ve.jsonID("addMark",tm);let nm=class ki extends Ve{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new k(Cc(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return ze.fromReplace(e,this.from,this.to,r)}invert(){return new tm(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new ki(t.pos,r.pos,this.mark)}merge(e){return e instanceof ki&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ki(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ki(t.from,t.to,e.markFromJSON(t.mark))}};Ve.jsonID("removeMark",nm);let rm=class vi extends Ve{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ze.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ze.fromReplace(e,this.pos,this.pos+1,new k(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new vi(this.pos,t.marks[i]);return new vi(this.pos,this.mark)}}return new im(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new vi(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new vi(t.pos,e.markFromJSON(t.mark))}};Ve.jsonID("addNodeMark",rm);let im=class Qa extends Ve{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ze.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ze.fromReplace(e,this.pos,this.pos+1,new k(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new rm(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Qa(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Qa(t.pos,e.markFromJSON(t.mark))}};Ve.jsonID("removeNodeMark",im);let gw=class Mn extends Ve{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&qa(e,this.from,this.to)?ze.fail("Structure replace would overwrite content"):ze.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Pr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Mn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Mn(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Mn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Mn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Mn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Mn(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}};Ve.jsonID("replace",gw);let yw=class ws extends Ve{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(qa(e,this.from,this.gapFrom)||qa(e,this.gapTo,this.to)))return ze.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ze.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?ze.fromReplace(e,this.from,this.to,r):ze.fail("Content does not fit in gap")}getMap(){return new Pr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ws(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new ws(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ws(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}};Ve.jsonID("replaceAround",yw);function qa(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function ww(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(a,a,i);else{let f=u.contentMatchAt(a).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(a,a,f[0])}if(c)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}let kw=class ks extends Ve{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return ze.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return ze.fromReplace(e,this.pos,this.pos+1,new k(S.from(i),0,t.isLeaf?0:1))}getMap(){return Pr.empty}invert(e){return new ks(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ks(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ks(t.pos,t.attr,t.value)}};Ve.jsonID("attr",kw);let ji=class extends Error{};ji=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};ji.prototype=Object.create(Error.prototype);ji.prototype.constructor=ji;ji.prototype.name="TransformError";const qn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},om=function(n,e,t,r){return t&&(ld(n,e,t,r,-1)||ld(n,e,t,r,1))},vw=/^(img|br|input|textarea|hr)$/i;function ld(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Us(n))){let o=n.parentNode;if(!o||o.nodeType!=1||Ec(n)||vw.test(n.nodeName)||n.contentEditable=="false")return!1;e=qn(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Us(n):0}else return!1}}function Us(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Sw(n,e,t){for(let r=e==0,i=e==Us(n);r||i;){if(n==t)return!0;let o=qn(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==Us(n)}}function Ec(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const sm=function(n){return n.focusNode&&om(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function lm(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}const Nt=typeof navigator<"u"?navigator:null,ad=typeof document<"u"?document:null,hn=Nt&&Nt.userAgent||"",Ya=/Edge\/(\d+)/.exec(hn),am=/MSIE \d/.exec(hn),Xa=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(hn),xo=!!(am||Xa||Ya),um=am?document.documentMode:Xa?+Xa[1]:Ya?+Ya[1]:0,El=!xo&&/gecko\/(\d+)/i.test(hn);El&&+(/Firefox\/(\d+)/.exec(hn)||[0,0])[1];const Ga=!xo&&/Chrome\/(\d+)/.exec(hn),mn=!!Ga,cm=Ga?+Ga[1]:0,Yn=!xo&&!!Nt&&/Apple Computer/.test(Nt.vendor),Nc=Yn&&(/Mobile\/\w+/.test(hn)||!!Nt&&Nt.maxTouchPoints>2),Ze=Nc||(Nt?/Mac/.test(Nt.platform):!1),xw=Nt?/Win/.test(Nt.platform):!1,Co=/Android \d/.test(hn),Mc=!!ad&&"webkitFontSmoothing"in ad.documentElement.style,Cw=Mc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Ew(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,u;if(sm(t)){for(a=l;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&z.isSelectable(c)&&i.parent&&!(c.isInline&&Sw(t.focusNode,t.focusOffset,i.dom))){let f=i.posBefore;u=new z(s==f?l:r.resolve(f))}}else{let c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null;a=r.resolve(c)}if(!u){let c=e=="pointer"||n.state.selection.head<l.pos&&!o?1:-1;u=dm(n,a,l,c)}return u}function fm(n){return n.editable?n.hasFocus():Ow(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Rc(n,e=!1){let t=n.state.selection;if(Rw(n,t),!!fm(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&mn){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&om(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Mw(n);else{let{anchor:r,head:i}=t,o,s;ud&&!(t instanceof B)&&(t.$from.parent.inlineContent||(o=cd(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=cd(n,t.to))),n.docView.setSelection(r,i,n.root,e),ud&&(o&&fd(o),s&&fd(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Nw(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const ud=Yn||mn&&cm<63;function cd(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Yn&&i&&i.contentEditable=="false")return oa(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return oa(i);if(o)return oa(o)}}function oa(n){return n.contentEditable="true",Yn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function fd(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Nw(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!fm(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Mw(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,qn(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&xo&&um<=11&&(r.disabled=!0,r.disabled=!1)}function Rw(n,e){if(e instanceof z){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(dd(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else dd(n)}function dd(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function dm(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||B.between(e,t,r)}function Ow(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Za(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&P.findFrom(o,e)}function _t(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function pd(n,e,t){let r=n.state.selection;if(r instanceof B)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return _t(n,new B(r.$anchor,s))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Za(n.state,e);return i&&i instanceof z?_t(n,i):!1}else if(!(Ze&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=n.docView.descAt(l))&&!s.contentDOM?z.isSelectable(o)?_t(n,new z(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):Mc?_t(n,new B(n.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof z&&r.node.isInline)return _t(n,new B(e>0?r.$to:r.$from));{let i=Za(n.state,e);return i?_t(n,i):!1}}}function Hs(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ii(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function tr(n,e){return e<0?Tw(n):Aw(n)}function Tw(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,s=!1;for(El&&t.nodeType==1&&r<Hs(t)&&Ii(t.childNodes[r],-1)&&(s=!0);;)if(r>0){if(t.nodeType!=1)break;{let l=t.childNodes[r-1];if(Ii(l,-1))i=t,o=--r;else if(l.nodeType==3)t=l,r=t.nodeValue.length;else break}}else{if(pm(t))break;{let l=t.previousSibling;for(;l&&Ii(l,-1);)i=t.parentNode,o=qn(l),l=l.previousSibling;if(l)t=l,r=Hs(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}s?eu(n,t,r):i&&eu(n,i,o)}function Aw(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Hs(t),o,s;for(;;)if(r<i){if(t.nodeType!=1)break;let l=t.childNodes[r];if(Ii(l,1))o=t,s=++r;else break}else{if(pm(t))break;{let l=t.nextSibling;for(;l&&Ii(l,1);)o=l.parentNode,s=qn(l)+1,l=l.nextSibling;if(l)t=l,r=0,i=Hs(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&eu(n,o,s)}function pm(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Dw(n,e){for(;n&&e==n.childNodes.length&&!Ec(n);)e=qn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function zw(n,e){for(;n&&!e&&!Ec(n);)e=qn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function eu(n,e,t){if(e.nodeType!=3){let o,s;(s=Dw(e,t))?(e=s,t=0):(o=zw(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(sm(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Rc(n)},50)}function hd(n,e){let t=n.state.doc.resolve(e);if(!(mn||xw)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function md(n,e,t){let r=n.state.selection;if(r instanceof B&&!r.empty||t.indexOf("s")>-1||Ze&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=Za(n.state,e);if(s&&s instanceof z)return _t(n,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof je?P.near(s,e):P.findFrom(s,e);return l?_t(n,l):!1}return!1}function gd(n,e){if(!(n.state.selection instanceof B))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let s=n.state.tr;return e<0?s.delete(t.pos-o.nodeSize,t.pos):s.delete(t.pos,t.pos+o.nodeSize),n.dispatch(s),!0}return!1}function yd(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function Iw(n){if(!Yn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;yd(n,r,"true"),setTimeout(()=>yd(n,r,"false"),20)}return!1}function Pw(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Fw(n,e){let t=e.keyCode,r=Pw(e);if(t==8||Ze&&t==72&&r=="c")return gd(n,-1)||tr(n,-1);if(t==46&&!e.shiftKey||Ze&&t==68&&r=="c")return gd(n,1)||tr(n,1);if(t==13||t==27)return!0;if(t==37||Ze&&t==66&&r=="c"){let i=t==37?hd(n,n.state.selection.from)=="ltr"?-1:1:-1;return pd(n,i,r)||tr(n,i)}else if(t==39||Ze&&t==70&&r=="c"){let i=t==39?hd(n,n.state.selection.from)=="ltr"?1:-1:1;return pd(n,i,r)||tr(n,i)}else{if(t==38||Ze&&t==80&&r=="c")return md(n,-1,r)||tr(n,-1);if(t==40||Ze&&t==78&&r=="c")return Iw(n)||md(n,1,r)||tr(n,1);if(r==(Ze?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function hm(n,e){n.someProp("transformCopied",p=>{e=p(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let p=r.firstChild;t.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=n.someProp("clipboardSerializer")||Sl.fromSchema(n.state.schema),l=vm(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let u=a.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=km[u.nodeName.toLowerCase()]);){for(let p=c.length-1;p>=0;p--){let h=l.createElement(c[p]);for(;a.firstChild;)h.appendChild(a.firstChild);a.appendChild(h),f++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(t)}`);let d=n.someProp("clipboardTextSerializer",p=>p(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:d,slice:e}}function mm(n,e,t,r,i){let o=i.parent.type.spec.code,s,l;if(!t&&!e)return null;let a=e&&(r||o||!t);if(a){if(n.someProp("transformPastedText",d=>{e=d(e,o||r,n)}),o)return e?new k(S.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):k.empty;let f=n.someProp("clipboardTextParser",d=>d(e,i,r,n));if(f)l=f;else{let d=i.marks(),{schema:p}=n.state,h=Sl.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=s.appendChild(document.createElement("p"));g&&v.appendChild(h.serializeNode(p.text(g,d)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),s=Bw(t),Mc&&Jw(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=s.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;s=d}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||Bs.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Lw.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)l=Vw(wd(l,+c[1],+c[2]),c[4]);else if(l=k.maxOpen($w(l.content,i),!0),l.openStart||l.openEnd){let f=0,d=0;for(let p=l.content.firstChild;f<l.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=l.content.lastChild;d<l.openEnd&&!p.type.spec.isolating;d++,p=p.lastChild);l=wd(l,f,d)}return n.someProp("transformPasted",f=>{l=f(l,n)}),l}const Lw=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $w(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,s=[];if(n.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),u;if(!a)return s=null;if(u=s.length&&o.length&&ym(a,o,l,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=wm(s[s.length-1],o.length));let c=gm(l,a);s.push(c),i=i.matchType(c.type),o=a}}),s)return S.from(s)}return n}function gm(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,S.from(n));return n}function ym(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=ym(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(S.from(gm(t,n,i+1))))}}function wm(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,wm(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(S.empty,!0);return n.copy(t.append(r))}function tu(n,e,t,r,i,o){let s=e<0?n.firstChild:n.lastChild,l=s.content;return n.childCount>1&&(o=0),i<r-1&&(l=tu(l,e,t,r,i+1,o)),i>=t&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(S.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(l))}function wd(n,e,t){return e<n.openStart&&(n=new k(tu(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new k(tu(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const km={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let kd=null;function vm(){return kd||(kd=document.implementation.createHTMLDocument("title"))}function bw(n){let e=window.trustedTypes;return e?e.createPolicy("detachedDocument",{createHTML:t=>t}).createHTML(n):n}function Bw(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=vm().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&km[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=bw(n),i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function Jw(n){let e=n.querySelectorAll(mn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Vw(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:s}=n;for(let l=r.length-2;l>=0;l-=2){let a=t.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=S.from(a.create(r[l+1],i)),o++,s++}return new k(i,o,s)}const mt={},qe={};function Qt(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}qe.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!xm(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Co&&mn&&t.keyCode==13)))if(n.domObserver.selectionChanged(n.domSelectionRange())?n.domObserver.flush():t.keyCode!=229&&n.domObserver.forceFlush(),Nc&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,lm(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Fw(n,t)?t.preventDefault():Qt(n,"key")};qe.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};qe.keypress=(n,e)=>{let t=e;if(xm(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Ze&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof B)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function Nl(n){return{left:n.clientX,top:n.clientY}}function _w(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Oc(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(n.someProp(e,l=>s>o.depth?l(n,t,o.nodeAfter,o.before(s),i,!0):l(n,t,o.node(s),o.before(s),i,!1)))return!0;return!1}function xr(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function Ww(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&z.isSelectable(r)?(xr(n,new z(t)),!0):!1}function Uw(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof z&&(r=t.node);let o=n.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(z.isSelectable(l)){r&&t.$from.depth>0&&s>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(s);break}}return i!=null?(xr(n,z.create(n.state.doc,i)),!0):!1}function Hw(n,e,t,r,i){return Oc(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?Uw(n,t):Ww(n,t))}function Kw(n,e,t,r){return Oc(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function jw(n,e,t,r){return Oc(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||Qw(n,t,r)}function Qw(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(xr(n,B.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)xr(n,B.create(r,l+1,l+1+s.content.size));else if(z.isSelectable(s))xr(n,z.create(r,l));else continue;return!0}}function Tc(n){return Ks(n)}const Sm=Ze?"metaKey":"ctrlKey";mt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Tc(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&_w(t,n.input.lastClick)&&!t[Sm]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let s=n.posAtCoords(Nl(t));s&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new qw(n,s,t,!!r)):(o=="doubleClick"?Kw:jw)(n,s.pos,s.inside,t)?t.preventDefault():Qt(n,"pointer"))};class qw{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Sm],this.allowDefault=r.shiftKey;let o,s;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),s=t.inside;else{let c=e.state.doc.resolve(t.pos);o=c.parent,s=c.depth?c.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof z&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&El&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qt(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Rc(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Nl(e))),this.updateAllowDefault(e),this.allowDefault||!t?Qt(this.view,"pointer"):Hw(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Yn&&this.mightDrag&&!this.mightDrag.node.isAtom||mn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(xr(this.view,P.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Qt(this.view,"pointer")}move(e){this.updateAllowDefault(e),Qt(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}mt.touchstart=n=>{n.input.lastTouch=Date.now(),Tc(n),Qt(n,"pointer")};mt.touchmove=n=>{n.input.lastTouch=Date.now(),Qt(n,"pointer")};mt.contextmenu=n=>Tc(n);function xm(n,e){return n.composing?!0:Yn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const Yw=Co?5e3:-1;qe.compositionstart=qe.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof B&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Ks(n,!0),n.markCursor=null;else if(Ks(n,!e.selection.empty),El&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=n.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}n.input.composing=!0}Cm(n,Yw)};qe.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Cm(n,20))};function Cm(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Ks(n),e))}function Xw(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=Gw());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function Gw(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Ks(n,e=!1){if(!(Co&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Xw(n),e||n.docView&&n.docView.dirty){let t=Ew(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function Zw(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Qi=xo&&um<15||Nc&&Cw<604;mt.copy=qe.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=Qi?null:t.clipboardData,s=r.content(),{dom:l,text:a}=hm(n,s);o?(t.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):Zw(n,l),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ek(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function tk(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?nu(n,r.value,null,i,e):nu(n,r.textContent,r.innerHTML,i,e)},50)}function nu(n,e,t,r,i){let o=mm(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",a=>a(n,i,o||k.empty)))return!0;if(!o)return!1;let s=ek(o),l=s?n.state.tr.replaceSelectionWith(s,r):n.state.tr.replaceSelection(o);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Em(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}qe.paste=(n,e)=>{let t=e;if(n.composing&&!Co)return;let r=Qi?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&nu(n,Em(r),r.getData("text/html"),i,t)?t.preventDefault():tk(n,t)};class nk{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const Nm=Ze?"altKey":"ctrlKey";mt.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(Nl(t)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof z?i.to-1:i.to))){if(r&&r.mightDrag)s=z.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=n.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=n.docView&&(s=z.create(n.state.doc,f.posBefore))}}let l=(s||n.state.selection).content(),{dom:a,text:u,slice:c}=hm(n,l);(!t.dataTransfer.files.length||!mn||cm>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Qi?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",Qi||t.dataTransfer.setData("text/plain",u),n.dragging=new nk(c,!t[Nm],s)};mt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};qe.dragover=qe.dragenter=(n,e)=>e.preventDefault();qe.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Nl(t));if(!i)return;let o=n.state.doc.resolve(i.pos),s=r&&r.slice;s?n.someProp("transformPasted",h=>{s=h(s,n)}):s=mm(n,Em(t.dataTransfer),Qi?null:t.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!t[Nm]);if(n.someProp("handleDrop",h=>h(n,t,s||k.empty,l))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?ww(n.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let u=n.state.tr;if(l){let{node:h}=r;h?h.replace(u):u.deleteSelection()}let c=u.mapping.map(a),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=u.doc;if(f?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(d))return;let p=u.doc.resolve(c);if(f&&z.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new z(p));else{let h=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((g,v,m,y)=>h=y),u.setSelection(dm(n,p,u.doc.resolve(h)))}n.focus(),n.dispatch(u.setMeta("uiEvent","drop"))};mt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Rc(n)},20))};mt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};mt.beforeinput=(n,e)=>{if(mn&&Co&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,lm(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in qe)mt[n]=qe[n];function qi(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class js{constructor(e,t){this.toDOM=e,this.spec=t||bn,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:s}=e.mapResult(t.from+i,this.side<0?-1:1);return s?null:new Ie(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof js&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&qi(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Zt{constructor(e,t){this.attrs=e,this.spec=t||bn}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Ie(o,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Zt&&qi(this.attrs,e.attrs)&&qi(this.spec,e.spec)}static is(e){return e.type instanceof Zt}destroy(){}}class Ac{constructor(e,t){this.attrs=e,this.spec=t||bn}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let s=e.mapResult(t.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Ie(o.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof Ac&&qi(this.attrs,e.attrs)&&qi(this.spec,e.spec)}destroy(){}}class Ie{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Ie(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Ie(e,e,new js(t,r))}static inline(e,t,r,i){return new Ie(e,t,new Zt(r,i))}static node(e,t,r,i){return new Ie(e,t,new Ac(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Zt}get widget(){return this.type instanceof js}}const lr=[],bn={};class j{constructor(e,t){this.local=e.length?e:lr,this.children=t.length?t:lr}static create(e,t){return t.length?Qs(t,e,0,bn):Ce}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=t&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,r,i+l,o)}}map(e,t,r){return this==Ce||e.maps.length==0?this:this.mapInner(e,t,0,0,r||bn)}mapInner(e,t,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(t,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?rk(this.children,s||[],e,t,r,i,o):s?new j(s.sort(Bn),lr):Ce}add(e,t){return t.length?this==Ce?j.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((l,a)=>{let u=a+r,c;if(c=Rm(t,l,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,c,u+1):i.splice(o,0,a,a+l.nodeSize,Qs(c,l,u+1,bn)),o+=3}});let s=Mm(o?Om(t):t,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new j(s.length?this.local.concat(s).sort(Bn):this.local,i||this.children)}remove(e){return e.length==0||this==Ce?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+t,a=r[o+1]+t;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>l&&f.to<a&&(e[c]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,l+1);u!=Ce?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,t)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new j(i,r):Ce}forChild(e,t){if(this==Ce)return this;if(t.isLeaf)return j.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+t.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof Zt){let u=Math.max(o,a.from)-o,c=Math.min(s,a.to)-o;u<c&&(i||(i=[])).push(a.copy(u,c))}}if(i){let l=new j(i.sort(Bn),lr);return r?new Dn([l,r]):l}return r||Ce}eq(e){if(this==e)return!0;if(!(e instanceof j)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Dc(this.localsInner(e))}localsInner(e){if(this==Ce)return lr;if(e.inlineContent||!this.local.some(Zt.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Zt||t.push(this.local[r]);return t}forEachSet(e){e(this)}}j.empty=new j([],[]);j.removeOverlap=Dc;const Ce=j.empty;class Dn{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,bn));return Dn.from(r)}forChild(e,t){if(t.isLeaf)return j.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=Ce&&(o instanceof Dn?r=r.concat(o.members):r.push(o))}return Dn.from(r)}eq(e){if(!(e instanceof Dn)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let s=0;s<o.length;s++)t.push(o[s])}}return t?Dc(r?t:t.sort(Bn)):lr}static from(e){switch(e.length){case 0:return Ce;case 1:return e[0];default:return new Dn(e.every(t=>t instanceof j)?e:e.reduce((t,r)=>t.concat(r instanceof j?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function rk(n,e,t,r,i,o,s){let l=n.slice();for(let u=0,c=o;u<t.maps.length;u++){let f=0;t.maps[u].forEach((d,p,h,g)=>{let v=g-h-(p-d);for(let m=0;m<l.length;m+=3){let y=l[m+1];if(y<0||d>y+c-f)continue;let w=l[m]+c-f;p>=w?l[m+1]=d<=w?-2:-1:d>=c&&v&&(l[m]+=v,l[m+1]+=v)}f+=v}),c=t.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=t.map(n[u]+o),f=c-i;if(f<0||f>=r.content.size){a=!0;continue}let d=t.map(n[u+1]+o,-1),p=d-i,{index:h,offset:g}=r.content.findIndex(f),v=r.maybeChild(h);if(v&&g==f&&g+v.nodeSize==p){let m=l[u+2].mapInner(t,v,c+1,n[u]+o+1,s);m!=Ce?(l[u]=f,l[u+1]=p,l[u+2]=m):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=ik(l,n,e,t,i,o,s),c=Qs(u,r,0,s);e=c.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let p=c.children[f];for(;d<l.length&&l[d]<p;)d+=3;l.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new j(e.sort(Bn),l)}function Mm(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Ie(i.from+e,i.to+e,i.type))}return t}function ik(n,e,t,r,i,o,s){function l(a,u){for(let c=0;c<a.local.length;c++){let f=a.local[c].map(r,i,u);f?t.push(f):s.onRemove&&s.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<n.length;a+=3)n[a+1]==-1&&l(n[a+2],e[a]+o+1);return t}function Rm(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,s;o<n.length;o++)(s=n[o])&&s.from>t&&s.to<r&&((i||(i=[])).push(s),n[o]=null);return i}function Om(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Qs(n,e,t,r){let i=[],o=!1;e.forEach((l,a)=>{let u=Rm(n,l,a+t);if(u){o=!0;let c=Qs(u,l,t+a+1,r);c!=Ce&&i.push(a,a+l.nodeSize,c)}});let s=Mm(o?Om(n):n,-t).sort(Bn);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new j(s,i):Ce}function Bn(n,e){return n.from-e.from||n.to-e.to}function Dc(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),vd(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),vd(e,i,r.copy(o.from,r.to)));break}}}return e}function vd(n,e,t){for(;e<n.length&&Bn(t,n[e])>0;)e++;n.splice(e,0,t)}class ee extends P{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return ee.valid(r)?new ee(r):P.near(r)}content(){return k.empty}eq(e){return e instanceof ee&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ee(e.resolve(t.pos))}getBookmark(){return new zc(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!ok(e)||!sk(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&ee.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(t>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=t;let a=e.doc.resolve(i);if(ee.valid(a))return a}for(;;){let s=t>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!z.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue e}break}o=s,i+=t;let l=e.doc.resolve(i);if(ee.valid(l))return l}return null}}}ee.prototype.visible=!1;ee.findFrom=ee.findGapCursorFrom;P.jsonID("gapcursor",ee);class zc{constructor(e){this.pos=e}map(e){return new zc(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return ee.valid(t)?new ee(t):P.near(t)}}function ok(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function sk(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function lk(){return new pn({props:{decorations:fk,createSelectionBetween(n,e,t){return e.pos==t.pos&&ee.valid(t)?new ee(t):null},handleClick:uk,handleKeyDown:ak,handleDOMEvents:{beforeinput:ck}}})}const ak=pw({ArrowLeft:bo("horiz",-1),ArrowRight:bo("horiz",1),ArrowUp:bo("vert",-1),ArrowDown:bo("vert",1)});function bo(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof B){if(!o.endOfTextblock(t)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=ee.findGapCursorFrom(l,e,a);return u?(i&&i(r.tr.setSelection(new ee(u))),!0):!1}}function uk(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!ee.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&z.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new ee(r))),!0)}function ck(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof ee))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=S.empty;for(let s=r.length-1;s>=0;s--)i=S.from(r[s].createAndFill(null,i));let o=n.state.tr.replace(t.pos,t.pos,new k(i,0,0));return o.setSelection(B.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function fk(n){if(!(n.selection instanceof ee))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",j.create(n.doc,[Ie.widget(n.selection.head,e,{key:"gapcursor"})])}const Tm=65535,Am=Math.pow(2,16);function dk(n,e){return n+e*Am}function Sd(n){return n&Tm}function pk(n){return(n-(n&Tm))/Am}const Dm=1,zm=2,vs=4,Im=8;let xd=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Im)>0}get deletedBefore(){return(this.delInfo&(Dm|vs))>0}get deletedAfter(){return(this.delInfo&(zm|vs))>0}get deletedAcross(){return(this.delInfo&vs)>0}},Fr=class ar{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ar.empty)return ar.empty}recover(e){let t=0,r=Sd(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+pk(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:t:t,p=a+i+(d<0?0:c);if(r)return p;let h=e==(t<0?a:f)?null:dk(l/3,e-a),g=e==a?zm:e==f?Dm:vs;return(t<0?e!=a:e!=f)&&(g|=Im),new xd(p,g,h)}i+=c-u}return r?e+i:new xd(e+i,0,null)}touches(e,t){let r=0,i=Sd(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new ar(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ar.empty:new ar(e<0?[0,-e,0]:[0,0,e])}};Fr.empty=new Fr([]);const sa=Object.create(null);let _e=class{getMap(){return Fr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=sa[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in sa)throw new RangeError("Duplicate use of step JSON ID "+e);return sa[e]=t,t.prototype.jsonID=e,t}},Pe=class Si{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Si(e,null)}static fail(e){return new Si(null,e)}static fromReplace(e,t,r,i){try{return Si.ok(e.replace(t,r,i))}catch(o){if(o instanceof un)return Si.fail(o.message);throw o}}};function Ic(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(Ic(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return S.fromArray(r)}let Pm=class xi extends _e{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new k(Ic(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return Pe.fromReplace(e,this.from,this.to,o)}invert(){return new Fm(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new xi(t.pos,r.pos,this.mark)}merge(e){return e instanceof xi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new xi(t.from,t.to,e.markFromJSON(t.mark))}};_e.jsonID("addMark",Pm);let Fm=class Ci extends _e{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new k(Ic(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Pe.fromReplace(e,this.from,this.to,r)}invert(){return new Pm(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ci(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ci&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ci(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ci(t.from,t.to,e.markFromJSON(t.mark))}};_e.jsonID("removeMark",Fm);let Lm=class Ei extends _e{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Pe.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Pe.fromReplace(e,this.pos,this.pos+1,new k(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Ei(this.pos,t.marks[i]);return new Ei(this.pos,this.mark)}}return new $m(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ei(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ei(t.pos,e.markFromJSON(t.mark))}};_e.jsonID("addNodeMark",Lm);let $m=class ru extends _e{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Pe.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Pe.fromReplace(e,this.pos,this.pos+1,new k(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Lm(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ru(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ru(t.pos,e.markFromJSON(t.mark))}};_e.jsonID("removeNodeMark",$m);let hk=class Rn extends _e{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&iu(e,this.from,this.to)?Pe.fail("Structure replace would overwrite content"):Pe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Fr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Rn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Rn(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Rn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Rn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Rn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Rn(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}};_e.jsonID("replace",hk);let mk=class Ss extends _e{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(iu(e,this.from,this.gapFrom)||iu(e,this.gapTo,this.to)))return Pe.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Pe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Pe.fromReplace(e,this.from,this.to,r):Pe.fail("Content does not fit in gap")}getMap(){return new Fr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Ss(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new Ss(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ss(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}};_e.jsonID("replaceAround",mk);function iu(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function gk(n,e,t=null,r=n){let i=yk(n,e),o=i&&wk(r,e);return o?i.map(Cd).concat({type:e,attrs:t}).concat(o.map(Cd)):null}function Cd(n){return{type:n,attrs:null}}function yk(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return t.canReplaceWith(r,i,s)?o:null}function wk(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(t.child(u).type);return!a||!a.validEnd?null:s}function kk(n,e){let t=n.resolve(e),r=t.index();return vk(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function vk(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}let Sk=class xs extends _e{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Pe.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Pe.fromReplace(e,this.pos,this.pos+1,new k(S.from(i),0,t.isLeaf?0:1))}getMap(){return Fr.empty}invert(e){return new xs(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new xs(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new xs(t.pos,t.attr,t.value)}};_e.jsonID("attr",Sk);let Yi=class extends Error{};Yi=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Yi.prototype=Object.create(Error.prototype);Yi.prototype.constructor=Yi;Yi.prototype.name="TransformError";class Xn{constructor(e,t,r={}){this.match=e,this.match=e,this.handler=typeof t=="string"?xk(t):t,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1}}function xk(n){return function(e,t,r,i){let o=n;if(t[1]){let s=t[0].lastIndexOf(t[1]);o+=t[0].slice(s+t[1].length),r+=s;let l=r-i;l>0&&(o=t[0].slice(s-l,s)+o,r=i)}return e.tr.insertText(o,r,i)}}const Ck=500;function Ek({rules:n}){let e=new pn({state:{init(){return null},apply(t,r){let i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,i,o){return Ed(t,r,i,o,n,e)},handleDOMEvents:{compositionend:t=>{setTimeout(()=>{let{$cursor:r}=t.state.selection;r&&Ed(t,r.pos,r.pos,"",n,e)})}}},isInputRules:!0});return e}function Ed(n,e,t,r,i,o){if(n.composing)return!1;let s=n.state,l=s.doc.resolve(e),a=l.parent.textBetween(Math.max(0,l.parentOffset-Ck),l.parentOffset,null,"￼")+r;for(let u=0;u<i.length;u++){let c=i[u];if(l.parent.type.spec.code){if(!c.inCode)continue}else if(c.inCode==="only")continue;let f=c.match.exec(a),d=f&&c.handler(s,f,e-(f[0].length-r.length),t);if(d)return c.undoable&&d.setMeta(o,{transform:d,from:e,to:t,text:r}),n.dispatch(d),!0}return!1}new Xn(/--$/,"—");new Xn(/\.\.\.$/,"…");new Xn(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“");new Xn(/"$/,"”");new Xn(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘");new Xn(/'$/,"’");function Nk(n,e,t=null,r){return new Xn(n,(i,o,s,l)=>{let a=t instanceof Function?t(o):t,u=i.tr.delete(s,l),c=u.doc.resolve(s),f=c.blockRange(),d=f&&gk(f,e,a);if(!d)return null;u.wrap(f,d);let p=u.doc.resolve(s-1).nodeBefore;return p&&p.type==e&&kk(u.doc,s-1)&&!r&&u.join(s-1),u})}const Mk=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Rk(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Mk?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function Ok(n){let e=Object.create(null);for(let t in n)e[Rk(t)]=n[t];return e}function la(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Tk(n){return new pn({props:{handleKeyDown:Ak(n)}})}function Ak(n){let e=Ok(n);return function(t,r){let i=xc(r),o,s=e[la(i,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[la(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Et[r.keyCode])&&o!=i){let l=e[la(o,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const Dk=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function zk(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Dk?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function Ik(n){let e=Object.create(null);for(let t in n)e[zk(t)]=n[t];return e}function aa(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Pk(n){let e=Ik(n);return function(t,r){let i=xc(r),o,s=e[aa(i,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[aa(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Et[r.keyCode])&&o!=i){let l=e[aa(o,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const bm=65535,Bm=Math.pow(2,16);function Fk(n,e){return n+e*Bm}function Nd(n){return n&bm}function Lk(n){return(n-(n&bm))/Bm}const Jm=1,Vm=2,Cs=4,_m=8;class ou{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&_m)>0}get deletedBefore(){return(this.delInfo&(Jm|Cs))>0}get deletedAfter(){return(this.delInfo&(Vm|Cs))>0}get deletedAcross(){return(this.delInfo&Cs)>0}}class He{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&He.empty)return He.empty}recover(e){let t=0,r=Nd(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Lk(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],f=a+u;if(e<=f){let d=u?e==a?-1:e==f?1:t:t,p=a+i+(d<0?0:c);if(r)return p;let h=e==(t<0?a:f)?null:Fk(l/3,e-a),g=e==a?Vm:e==f?Jm:Cs;return(t<0?e!=a:e!=f)&&(g|=_m),new ou(p,g,h)}i+=c-u}return r?e+i:new ou(e+i,0,null)}touches(e,t){let r=0,i=Nd(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new He(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?He.empty:new He(e<0?[0,-e,0]:[0,0,e])}}He.empty=new He([]);class Pi{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new Pi(this.maps,this.mirror,e,t)}copy(){return new Pi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Pi;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],l=s.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new ou(e,i,null)}}const ua=Object.create(null);class xe{getMap(){return He.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ua[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ua)throw new RangeError("Duplicate use of step JSON ID "+e);return ua[e]=t,t.prototype.jsonID=e,t}}class oe{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new oe(e,null)}static fail(e){return new oe(null,e)}static fromReplace(e,t,r,i){try{return oe.ok(e.replace(t,r,i))}catch(o){if(o instanceof un)return oe.fail(o.message);throw o}}}function Pc(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(Pc(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return S.fromArray(r)}class qt extends xe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new k(Pc(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return oe.fromReplace(e,this.from,this.to,o)}invert(){return new kt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new qt(t.pos,r.pos,this.mark)}merge(e){return e instanceof qt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new qt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new qt(t.from,t.to,e.markFromJSON(t.mark))}}xe.jsonID("addMark",qt);class kt extends xe{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new k(Pc(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return oe.fromReplace(e,this.from,this.to,r)}invert(){return new qt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new kt(t.pos,r.pos,this.mark)}merge(e){return e instanceof kt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new kt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new kt(t.from,t.to,e.markFromJSON(t.mark))}}xe.jsonID("removeMark",kt);class Yt extends xe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return oe.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return oe.fromReplace(e,this.pos,this.pos+1,new k(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Yt(this.pos,t.marks[i]);return new Yt(this.pos,this.mark)}}return new Lr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Yt(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Yt(t.pos,e.markFromJSON(t.mark))}}xe.jsonID("addNodeMark",Yt);class Lr extends xe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return oe.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return oe.fromReplace(e,this.pos,this.pos+1,new k(S.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Yt(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Lr(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Lr(t.pos,e.markFromJSON(t.mark))}}xe.jsonID("removeNodeMark",Lr);class Ne extends xe{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&su(e,this.from,this.to)?oe.fail("Structure replace would overwrite content"):oe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new He([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ne(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Ne(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ne)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ne(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ne(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ne(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}}xe.jsonID("replace",Ne);class St extends xe{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(su(e,this.from,this.gapFrom)||su(e,this.gapTo,this.to)))return oe.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return oe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?oe.fromReplace(e,this.from,this.to,r):oe.fail("Content does not fit in gap")}getMap(){return new He([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new St(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new St(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new St(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}}xe.jsonID("replaceAround",St);function su(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function $k(n,e,t,r){let i=[],o=[],s,l;n.doc.nodesBetween(e,t,(a,u,c)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),p=Math.min(u+a.nodeSize,t),h=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(h)||(s&&s.to==d&&s.mark.eq(f[g])?s.to=p:i.push(s=new kt(d,p,f[g])));l&&l.to==d?l.to=p:o.push(l=new qt(d,p,r))}}),i.forEach(a=>n.step(a)),o.forEach(a=>n.step(a))}function bk(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof vo){let u=s.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,t);for(let c=0;c<a.length;c++){let f=a[c],d;for(let p=0;p<i.length;p++){let h=i[p];h.step==o-1&&f.eq(i[p].style)&&(d=h)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(l,e),to:u,step:o})}}}),i.forEach(s=>n.step(new kt(s.from,s.to,s.style)))}function Bk(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),o=[],s=e+1;for(let l=0;l<i.childCount;l++){let a=i.child(l),u=s+a.nodeSize,c=r.matchType(a.type);if(!c)o.push(new Ne(s,u,k.empty));else{r=c;for(let f=0;f<a.marks.length;f++)t.allowsMarkType(a.marks[f].type)||n.step(new kt(s,u,a.marks[f]));if(a.isText&&!t.spec.code){let f,d=/\r?\n|\r/g,p;for(;f=d.exec(a.text);)p||(p=new k(S.from(t.schema.text(" ",t.allowedMarks(a.marks))),0,0)),o.push(new Ne(s+f.index,s+f.index+f[0].length,p))}}s=u}if(!r.validEnd){let l=r.fillBefore(S.empty,!0);n.replace(s,s,new k(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function Jk(n,e,t){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,u=l,c=S.empty,f=0;for(let h=o,g=!1;h>t;h--)g||r.index(h)>0?(g=!0,c=S.from(r.node(h).copy(c)),f++):a--;let d=S.empty,p=0;for(let h=o,g=!1;h>t;h--)g||i.after(h+1)<i.end(h)?(g=!0,d=S.from(i.node(h).copy(d)),p++):u++;n.step(new St(a,u,s,l,new k(c.append(d),f,p),c.size-f,!0))}function Vk(n,e,t){let r=S.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let l=t[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=S.from(t[s].type.create(t[s].attrs,r))}let i=e.start,o=e.end;n.step(new St(i,o,i,o,new k(r,0,0),t.length,!0))}function _k(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(s,l)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&Wk(n.doc,n.mapping.slice(o).map(l),r)){n.clearIncompatible(n.mapping.slice(o).map(l,1),r);let a=n.mapping.slice(o),u=a.map(l,1),c=a.map(l+s.nodeSize,1);return n.step(new St(u,c,u+1,c-1,new k(S.from(r.create(i,null,s.marks)),0,0),1,!0)),!1}})}function Wk(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function Uk(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let s=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new St(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new k(S.from(s),0,0),1,!0))}function Hk(n,e,t=1,r){let i=n.doc.resolve(e),o=S.empty,s=S.empty;for(let l=i.depth,a=i.depth-t,u=t-1;l>a;l--,u--){o=S.from(i.node(l).copy(o));let c=r&&r[u];s=S.from(c?c.type.create(c.attrs,s):i.node(l).copy(s))}n.step(new Ne(e,e,new k(o.append(s),t,t),!0))}function Kk(n,e,t){let r=new Ne(e-t,e+t,k.empty,!0);n.step(r)}function jk(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Qk(n,e,t=e,r=k.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return Wm(i,o,r)?new Ne(e,t,r):new qk(i,o,r).fit()}function Wm(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class qk{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=S.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=S.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new k(o,s,l);return e>-1?new St(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new Ne(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=ca(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,f=null;if(t==1&&(s?u.matchType(s.type)||(f=u.fillBefore(S.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:f};if(t==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ca(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new k(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ca(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new k(Ni(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new k(Ni(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[t];if(i){for(let g=0;g<i.childCount;g++)c.push(i.child(g));f=f.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let g=l.child(u),v=f.matchType(g.type);if(!v)break;u++,(u>1||a==0||g.content.size)&&(f=v,c.push(Um(g.mark(d.allowedMarks(g.marks)),u==1?a:0,u==l.childCount?p:-1)))}let h=u==l.childCount;h||(p=-1),this.placed=Mi(this.placed,t,S.from(c)),this.frontier[t].match=f,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=l;g<p;g++){let m=v.lastChild;this.frontier.push({type:m.type,match:m.contentMatchAt(m.childCount)}),v=m.content}this.unplaced=h?e==0?k.empty:new k(Ni(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new k(Ni(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!fa(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=fa(e,t,i,r,o);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=fa(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Mi(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Mi(this.placed,this.depth,S.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(S.empty,!0);t.childCount&&(this.placed=Mi(this.placed,this.frontier.length,t))}}function Ni(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Ni(n.firstChild.content,e-1,t)))}function Mi(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Mi(n.lastChild.content,e-1,t)))}function ca(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Um(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Um(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(S.empty,!0)))),n.copy(r)}function fa(n,e,t,r,i){let o=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!Yk(t,o.content,s)?l:null}function Yk(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function Xk(n){return n.spec.defining||n.spec.definingForContent}function Gk(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(Wm(i,o,r))return n.step(new Ne(e,t,r));let s=Km(i,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let d=i.depth,p=i.pos-1;d>0;d--,p--){let h=i.node(d).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(d)>-1?l=d:i.before(d)==p&&s.splice(1,0,-d)}let a=s.indexOf(l),u=[],c=r.openStart;for(let d=r.content,p=0;;p++){let h=d.firstChild;if(u.push(h),p==r.openStart)break;d=h.content}for(let d=c-1;d>=0;d--){let p=u[d],h=Xk(p.type);if(h&&!p.sameMarkup(i.node(Math.abs(l)-1)))c=d;else if(h||!p.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let p=(d+c+1)%(r.openStart+1),h=u[p];if(h)for(let g=0;g<s.length;g++){let v=s[(g+a)%s.length],m=!0;v<0&&(m=!1,v=-v);let y=i.node(v-1),w=i.index(v-1);if(y.canReplaceWith(w,w,h.type,h.marks))return n.replace(i.before(v),m?o.after(v):t,new k(Hm(r.content,0,r.openStart,p),p,r.openEnd))}}let f=n.steps.length;for(let d=s.length-1;d>=0&&(n.replace(e,t,r),!(n.steps.length>f));d--){let p=s[d];p<0||(e=i.before(p),t=o.after(p))}}function Hm(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(Hm(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(n).append(n);n=s.append(o.matchFragment(s).fillBefore(S.empty,!0))}return n}function Zk(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=jk(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new k(S.from(r),0,0))}function ev(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=Km(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return n.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&i.end(s)-t!=i.depth-s)return n.delete(r.before(s),t);n.delete(e,t)}function Km(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class Cr extends xe{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return oe.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return oe.fromReplace(e,this.pos,this.pos+1,new k(S.from(i),0,t.isLeaf?0:1))}getMap(){return He.empty}invert(e){return new Cr(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Cr(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Cr(t.pos,t.attr,t.value)}}xe.jsonID("attr",Cr);class Xi extends xe{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return oe.ok(r)}getMap(){return He.empty}invert(e){return new Xi(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Xi(t.attr,t.value)}}xe.jsonID("docAttr",Xi);let $r=class extends Error{};$r=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};$r.prototype=Object.create(Error.prototype);$r.prototype.constructor=$r;$r.prototype.name="TransformError";class tv{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Pi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new $r(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=k.empty){let i=Qk(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new k(S.from(r),0,0))}delete(e,t){return this.replace(e,t,k.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Gk(this,e,t,r),this}replaceRangeWith(e,t,r){return Zk(this,e,t,r),this}deleteRange(e,t){return ev(this,e,t),this}lift(e,t){return Jk(this,e,t),this}join(e,t=1){return Kk(this,e,t),this}wrap(e,t){return Vk(this,e,t),this}setBlockType(e,t=e,r,i=null){return _k(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return Uk(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Cr(e,t,r)),this}setDocAttribute(e,t){return this.step(new Xi(e,t)),this}addNodeMark(e,t){return this.step(new Yt(e,t)),this}removeNodeMark(e,t){if(!(t instanceof V)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Lr(e,t)),this}split(e,t=1,r){return Hk(this,e,t,r),this}addMark(e,t,r){return $k(this,e,t,r),this}removeMark(e,t,r){return bk(this,e,t,r),this}clearIncompatible(e,t,r){return Bk(this,e,t,r),this}}var lu,au;if(typeof WeakMap<"u"){let n=new WeakMap;lu=e=>n.get(e),au=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;lu=r=>{for(let i=0;i<n.length;i+=2)if(n[i]==r)return n[i+1]},au=(r,i)=>(t==10&&(t=0),n[t++]=r,n[t++]=i)}var re=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,s=i+1;for(let l=1;o<this.width&&this.map[e+l]==t;l++)o++;for(let l=1;s<this.height&&this.map[e+this.width*l]==t;l++)s++;return{left:r,top:i,right:o,bottom:s}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:i,top:o,bottom:s}=this.findCell(n);return e=="horiz"?(t<0?r==0:i==this.width)?null:this.map[o*this.width+(t<0?r-1:i)]:(t<0?o==0:s==this.height)?null:this.map[r+this.width*(t<0?o-1:s)]}rectBetween(n,e){const{left:t,right:r,top:i,bottom:o}=this.findCell(n),{left:s,right:l,top:a,bottom:u}=this.findCell(e);return{left:Math.min(t,s),top:Math.min(i,a),right:Math.max(r,l),bottom:Math.max(o,u)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let i=n.left;i<n.right;i++){const o=r*this.width+i,s=this.map[o];t[s]||(t[s]=!0,!(i==n.left&&i&&this.map[o-1]==s||r==n.top&&r&&this.map[o-this.width]==s)&&e.push(s))}return e}positionAt(n,e,t){for(let r=0,i=0;;r++){const o=i+t.child(r).nodeSize;if(r==n){let s=e+n*this.width;const l=(n+1)*this.width;for(;s<l&&this.map[s]<i;)s++;return s==l?o-1:this.map[s]}i=o}}static get(n){return lu(n)||au(n,nv(n))}};function nv(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=rv(n),t=n.childCount,r=[];let i=0,o=null;const s=[];for(let u=0,c=e*t;u<c;u++)r[u]=0;for(let u=0,c=0;u<t;u++){const f=n.child(u);c++;for(let h=0;;h++){for(;i<r.length&&r[i]!=0;)i++;if(h==f.childCount)break;const g=f.child(h),{colspan:v,rowspan:m,colwidth:y}=g.attrs;for(let w=0;w<m;w++){if(w+u>=t){(o||(o=[])).push({type:"overlong_rowspan",pos:c,n:m-w});break}const x=i+w*e;for(let N=0;N<v;N++){r[x+N]==0?r[x+N]=c:(o||(o=[])).push({type:"collision",row:u,pos:c,n:v-N});const M=y&&y[N];if(M){const R=(x+N)%e*2,O=s[R];O==null||O!=M&&s[R+1]==1?(s[R]=M,s[R+1]=1):O==M&&s[R+1]++}}}i+=v,c+=g.nodeSize}const d=(u+1)*e;let p=0;for(;i<d;)r[i++]==0&&p++;p&&(o||(o=[])).push({type:"missing",row:u,n:p}),c++}const l=new re(e,t,r,o);let a=!1;for(let u=0;!a&&u<s.length;u+=2)s[u]!=null&&s[u+1]<t&&(a=!0);return a&&iv(l,s,n),l}function rv(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const i=n.child(r);let o=0;if(t)for(let s=0;s<r;s++){const l=n.child(s);for(let a=0;a<l.childCount;a++){const u=l.child(a);s+u.attrs.rowspan>r&&(o+=u.attrs.colspan)}}for(let s=0;s<i.childCount;s++){const l=i.child(s);o+=l.attrs.colspan,l.attrs.rowspan>1&&(t=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function iv(n,e,t){n.problems||(n.problems=[]);const r={};for(let i=0;i<n.map.length;i++){const o=n.map[i];if(r[o])continue;r[o]=!0;const s=t.nodeAt(o);if(!s)throw new RangeError(`No cell with offset ${o} found`);let l=null;const a=s.attrs;for(let u=0;u<a.colspan;u++){const c=(i+u)%n.width,f=e[c*2];f!=null&&(!a.colwidth||a.colwidth[u]!=f)&&((l||(l=ov(a)))[u]=f)}l&&n.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:l})}}function ov(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Md(n,e){if(typeof n=="string")return{};const t=n.getAttribute("data-colwidth"),r=t&&/^\d+(,\d+)*$/.test(t)?t.split(",").map(s=>Number(s)):null,i=Number(n.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(n.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(const s in e){const l=e[s].getFromDOM,a=l&&l(n);a!=null&&(o[s]=a)}return o}function Rd(n,e){const t={};n.attrs.colspan!=1&&(t.colspan=n.attrs.colspan),n.attrs.rowspan!=1&&(t.rowspan=n.attrs.rowspan),n.attrs.colwidth&&(t["data-colwidth"]=n.attrs.colwidth.join(","));for(const r in e){const i=e[r].setDOMAttr;i&&i(n.attrs[r],t)}return t}function sv(n){const e=n.cellAttributes||{},t={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in e)t[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:n.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:n.cellContent,attrs:t,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>Md(r,e)}],toDOM(r){return["td",Rd(r,e),0]}},table_header:{content:n.cellContent,attrs:t,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>Md(r,e)}],toDOM(r){return["th",Rd(r,e),0]}}}}function Mt(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Ht=new Cl("selectingCells");function Eo(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function Fc(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function jm(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=Eo(e.$head)||lv(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function lv(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function uu(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function Lc(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function Qm(n,e,t){const r=n.node(-1),i=re.get(r),o=n.start(-1),s=i.nextCell(n.pos-o,e,t);return s==null?null:n.node(0).resolve(o+s)}function br(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}var ce=class Ot extends P{constructor(e,t=e){const r=e.node(-1),i=re.get(r),o=e.start(-1),s=i.rectBetween(e.pos-o,t.pos-o),l=e.node(0),a=i.cellsInRect(s).filter(c=>c!=t.pos-o);a.unshift(t.pos-o);const u=a.map(c=>{const f=r.nodeAt(c);if(!f)throw RangeError(`No cell with offset ${c} found`);const d=o+c+1;return new Vh(l.resolve(d),l.resolve(d+f.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if(uu(r)&&uu(i)&&Lc(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Ot.rowSelection(r,i):o&&this.isColSelection()?Ot.colSelection(r,i):new Ot(r,i)}return B.between(r,i)}content(){const e=this.$anchorCell.node(-1),t=re.get(e),r=this.$anchorCell.start(-1),i=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},s=[];for(let a=i.top;a<i.bottom;a++){const u=[];for(let c=a*t.width+i.left,f=i.left;f<i.right;f++,c++){const d=t.map[c];if(o[d])continue;o[d]=!0;const p=t.findCell(d);let h=e.nodeAt(d);if(!h)throw RangeError(`No cell with offset ${d} found`);const g=i.left-p.left,v=p.right-i.right;if(g>0||v>0){let m=h.attrs;if(g>0&&(m=br(m,0,g)),v>0&&(m=br(m,m.colspan-v,v)),p.left<i.left){if(h=h.type.createAndFill(m),!h)throw RangeError(`Could not create cell with attrs ${JSON.stringify(m)}`)}else h=h.type.create(m,h.content)}if(p.top<i.top||p.bottom>i.bottom){const m={...h.attrs,rowspan:Math.min(p.bottom,i.bottom)-Math.max(p.top,i.top)};p.top<i.top?h=h.type.createAndFill(m):h=h.type.create(m,h.content)}u.push(h)}s.push(e.child(a).copy(S.from(u)))}const l=this.isColSelection()&&this.isRowSelection()?e:s;return new k(S.from(l),1,1)}replace(e,t=k.empty){const r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){const{$from:l,$to:a}=i[s],u=e.mapping.slice(r);e.replace(u.map(l.pos),u.map(a.pos),s?k.empty:t)}const o=P.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new k(S.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=re.get(t),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let s=0;s<o.length;s++)e(t.nodeAt(o[s]),i+o[s])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),i=re.get(r),o=e.start(-1),s=i.findCell(e.pos-o),l=i.findCell(t.pos-o),a=e.node(0);return s.top<=l.top?(s.top>0&&(e=a.resolve(o+i.map[s.left])),l.bottom<i.height&&(t=a.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))):(l.top>0&&(t=a.resolve(o+i.map[l.left])),s.bottom<i.height&&(e=a.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))),new Ot(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=re.get(e),r=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-r),o=t.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const s=i+this.$anchorCell.nodeAfter.attrs.colspan,l=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,l)==t.width}eq(e){return e instanceof Ot&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),i=re.get(r),o=e.start(-1),s=i.findCell(e.pos-o),l=i.findCell(t.pos-o),a=e.node(0);return s.left<=l.left?(s.left>0&&(e=a.resolve(o+i.map[s.top*i.width])),l.right<i.width&&(t=a.resolve(o+i.map[i.width*(l.top+1)-1]))):(l.left>0&&(t=a.resolve(o+i.map[l.top*i.width])),s.right<i.width&&(e=a.resolve(o+i.map[i.width*(s.top+1)-1]))),new Ot(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Ot(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new Ot(e.resolve(t),e.resolve(r))}getBookmark(){return new av(this.$anchorCell.pos,this.$headCell.pos)}};ce.prototype.visible=!1;P.jsonID("cell",ce);var av=class qm{constructor(e,t){this.anchor=e,this.head=t}map(e){return new qm(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&Lc(t,r)?new ce(t,r):P.near(r,1)}};function uv(n){if(!(n.selection instanceof ce))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(Ie.node(r,r+t.nodeSize,{class:"selectedCell"}))}),j.create(n.doc,e)}function cv({$from:n,$to:e}){if(n.pos==e.pos||n.pos<n.pos-6)return!1;let t=n.pos,r=e.pos,i=n.depth;for(;i>=0&&!(n.after(i+1)<n.end(i));i--,t++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return t==r&&/row|table/.test(n.node(i).type.spec.tableRole)}function fv({$from:n,$to:e}){let t,r;for(let i=n.depth;i>0;i--){const o=n.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){t=o;break}}for(let i=e.depth;i>0;i--){const o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return t!==r&&e.parentOffset===0}function dv(n,e,t){const r=(e||n).selection,i=(e||n).doc;let o,s;if(r instanceof z&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")o=ce.create(i,r.from);else if(s=="row"){const l=i.resolve(r.from+1);o=ce.rowSelection(l,l)}else if(!t){const l=re.get(r.node),a=r.from+1,u=a+l.map[l.width*l.height-1];o=ce.create(i,a+1,u)}}else r instanceof B&&cv(r)?o=B.create(i,r.from):r instanceof B&&fv(r)&&(o=B.create(i,r.$from.start(),r.$from.end()));return o&&(e||(e=n.tr)).setSelection(o),e}var pv=new Cl("fix-tables");function Ym(n,e,t,r){const i=n.childCount,o=e.childCount;e:for(let s=0,l=0;s<o;s++){const a=e.child(s);for(let u=l,c=Math.min(i,s+3);u<c;u++)if(n.child(u)==a){l=u+1,t+=a.nodeSize;continue e}r(a,t),l<i&&n.child(l).sameMarkup(a)?Ym(n.child(l),a,t+1,r):a.nodesBetween(0,a.content.size,r,t+1),t+=a.nodeSize}}function hv(n,e){let t;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(t=mv(n,i,o,t))};return e?e.doc!=n.doc&&Ym(e.doc,n.doc,0,r):n.doc.descendants(r),t}function mv(n,e,t,r){const i=re.get(e);if(!i.problems)return r;r||(r=n.tr);const o=[];for(let a=0;a<i.height;a++)o.push(0);for(let a=0;a<i.problems.length;a++){const u=i.problems[a];if(u.type=="collision"){const c=e.nodeAt(u.pos);if(!c)continue;const f=c.attrs;for(let d=0;d<f.rowspan;d++)o[u.row+d]+=u.n;r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,br(f,f.colspan-u.n,u.n))}else if(u.type=="missing")o[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const c=e.nodeAt(u.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,{...c.attrs,rowspan:c.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const c=e.nodeAt(u.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,{...c.attrs,colwidth:u.colwidth})}}let s,l;for(let a=0;a<o.length;a++)o[a]&&(s==null&&(s=a),l=a);for(let a=0,u=t+1;a<i.height;a++){const c=e.child(a),f=u+c.nodeSize,d=o[a];if(d>0){let p="cell";c.firstChild&&(p=c.firstChild.type.spec.tableRole);const h=[];for(let v=0;v<d;v++){const m=Mt(n.schema)[p].createAndFill();m&&h.push(m)}const g=(a==0||s==a-1)&&l==a?u+1:f-1;r.insert(r.mapping.map(g),h)}u=f}return r.setMeta(pv,{fixTables:!0})}function gv(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const i=e.child(0),o=i.type.spec.tableRole,s=i.type.schema,l=[];if(o=="row")for(let a=0;a<e.childCount;a++){let u=e.child(a).content;const c=a?0:Math.max(0,t-1),f=a<e.childCount-1?0:Math.max(0,r-1);(c||f)&&(u=cu(Mt(s).row,new k(u,c,f)).content),l.push(u)}else if(o=="cell"||o=="header_cell")l.push(t||r?cu(Mt(s).row,new k(e,t,r)).content:e);else return null;return yv(s,l)}function yv(n,e){const t=[];for(let i=0;i<e.length;i++){const o=e[i];for(let s=o.childCount-1;s>=0;s--){const{rowspan:l,colspan:a}=o.child(s).attrs;for(let u=i;u<i+l;u++)t[u]=(t[u]||0)+a}}let r=0;for(let i=0;i<t.length;i++)r=Math.max(r,t[i]);for(let i=0;i<t.length;i++)if(i>=e.length&&e.push(S.empty),t[i]<r){const o=Mt(n).cell.createAndFill(),s=[];for(let l=t[i];l<r;l++)s.push(o);e[i]=e[i].append(S.from(s))}return{height:e.length,width:r,rows:e}}function cu(n,e){const t=n.createAndFill();return new tv(t).replace(0,t.content.size,e).doc}function wv({width:n,height:e,rows:t},r,i){if(n!=r){const o=[],s=[];for(let l=0;l<t.length;l++){const a=t[l],u=[];for(let c=o[l]||0,f=0;c<r;f++){let d=a.child(f%a.childCount);c+d.attrs.colspan>r&&(d=d.type.createChecked(br(d.attrs,d.attrs.colspan,c+d.attrs.colspan-r),d.content)),u.push(d),c+=d.attrs.colspan;for(let p=1;p<d.attrs.rowspan;p++)o[l+p]=(o[l+p]||0)+d.attrs.colspan}s.push(S.from(u))}t=s,n=r}if(e!=i){const o=[];for(let s=0,l=0;s<i;s++,l++){const a=[],u=t[l%e];for(let c=0;c<u.childCount;c++){let f=u.child(c);s+f.attrs.rowspan>i&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,i-f.attrs.rowspan)},f.content)),a.push(f)}o.push(S.from(a))}t=o,e=i}return{width:n,height:e,rows:t}}function kv(n,e,t,r,i,o,s){const l=n.doc.type.schema,a=Mt(l);let u,c;if(i>e.width)for(let f=0,d=0;f<e.height;f++){const p=t.child(f);d+=p.nodeSize;const h=[];let g;p.lastChild==null||p.lastChild.type==a.cell?g=u||(u=a.cell.createAndFill()):g=c||(c=a.header_cell.createAndFill());for(let v=e.width;v<i;v++)h.push(g);n.insert(n.mapping.slice(s).map(d-1+r),h)}if(o>e.height){const f=[];for(let h=0,g=(e.height-1)*e.width;h<Math.max(e.width,i);h++){const v=h>=e.width?!1:t.nodeAt(e.map[g+h]).type==a.header_cell;f.push(v?c||(c=a.header_cell.createAndFill()):u||(u=a.cell.createAndFill()))}const d=a.row.create(null,S.from(f)),p=[];for(let h=e.height;h<o;h++)p.push(d);n.insert(n.mapping.slice(s).map(r+t.nodeSize-2),p)}return!!(u||c)}function Od(n,e,t,r,i,o,s,l){if(s==0||s==e.height)return!1;let a=!1;for(let u=i;u<o;u++){const c=s*e.width+u,f=e.map[c];if(e.map[c-e.width]==f){a=!0;const d=t.nodeAt(f),{top:p,left:h}=e.findCell(f);n.setNodeMarkup(n.mapping.slice(l).map(f+r),null,{...d.attrs,rowspan:s-p}),n.insert(n.mapping.slice(l).map(e.positionAt(s,h,t)),d.type.createAndFill({...d.attrs,rowspan:p+d.attrs.rowspan-s})),u+=d.attrs.colspan-1}}return a}function Td(n,e,t,r,i,o,s,l){if(s==0||s==e.width)return!1;let a=!1;for(let u=i;u<o;u++){const c=u*e.width+s,f=e.map[c];if(e.map[c-1]==f){a=!0;const d=t.nodeAt(f),p=e.colCount(f),h=n.mapping.slice(l).map(f+r);n.setNodeMarkup(h,null,br(d.attrs,s-p,d.attrs.colspan-(s-p))),n.insert(h+d.nodeSize,d.type.createAndFill(br(d.attrs,0,s-p))),u+=d.attrs.rowspan-1}}return a}function Ad(n,e,t,r,i){let o=t?n.doc.nodeAt(t-1):n.doc;if(!o)throw new Error("No table found");let s=re.get(o);const{top:l,left:a}=r,u=a+i.width,c=l+i.height,f=n.tr;let d=0;function p(){if(o=t?f.doc.nodeAt(t-1):f.doc,!o)throw new Error("No table found");s=re.get(o),d=f.mapping.maps.length}kv(f,s,o,t,u,c,d)&&p(),Od(f,s,o,t,a,u,l,d)&&p(),Od(f,s,o,t,a,u,c,d)&&p(),Td(f,s,o,t,l,c,a,d)&&p(),Td(f,s,o,t,l,c,u,d)&&p();for(let h=l;h<c;h++){const g=s.positionAt(h,a,o),v=s.positionAt(h,u,o);f.replace(f.mapping.slice(d).map(g+t),f.mapping.slice(d).map(v+t),new k(i.rows[h-l],0,0))}p(),f.setSelection(new ce(f.doc.resolve(t+s.positionAt(l,a,o)),f.doc.resolve(t+s.positionAt(c-1,u-1,o)))),e(f)}var vv=Pk({ArrowLeft:Bo("horiz",-1),ArrowRight:Bo("horiz",1),ArrowUp:Bo("vert",-1),ArrowDown:Bo("vert",1),"Shift-ArrowLeft":Jo("horiz",-1),"Shift-ArrowRight":Jo("horiz",1),"Shift-ArrowUp":Jo("vert",-1),"Shift-ArrowDown":Jo("vert",1),Backspace:Vo,"Mod-Backspace":Vo,Delete:Vo,"Mod-Delete":Vo});function Es(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Bo(n,e){return(t,r,i)=>{if(!i)return!1;const o=t.selection;if(o instanceof ce)return Es(t,r,P.near(o.$headCell,e));if(n!="horiz"&&!o.empty)return!1;const s=Xm(i,n,e);if(s==null)return!1;if(n=="horiz")return Es(t,r,P.near(t.doc.resolve(o.head+e),e));{const l=t.doc.resolve(s),a=Qm(l,n,e);let u;return a?u=P.near(a,1):e<0?u=P.near(t.doc.resolve(l.before(-1)),-1):u=P.near(t.doc.resolve(l.after(-1)),1),Es(t,r,u)}}}function Jo(n,e){return(t,r,i)=>{if(!i)return!1;const o=t.selection;let s;if(o instanceof ce)s=o;else{const a=Xm(i,n,e);if(a==null)return!1;s=new ce(t.doc.resolve(a))}const l=Qm(s.$headCell,n,e);return l?Es(t,r,new ce(s.$anchorCell,l)):!1}}function Vo(n,e){const t=n.selection;if(!(t instanceof ce))return!1;if(e){const r=n.tr,i=Mt(n.schema).cell.createAndFill().content;t.forEachCell((o,s)=>{o.content.eq(i)||r.replace(r.mapping.map(s+1),r.mapping.map(s+o.nodeSize-1),new k(i,0,0))}),r.docChanged&&e(r)}return!0}function Sv(n,e){const t=n.state.doc,r=Eo(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new ce(r))),!0):!1}function xv(n,e,t){if(!Fc(n.state))return!1;let r=gv(t);const i=n.state.selection;if(i instanceof ce){r||(r={width:1,height:1,rows:[S.from(cu(Mt(n.state.schema).cell,t))]});const o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),l=re.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=wv(r,l.right-l.left,l.bottom-l.top),Ad(n.state,n.dispatch,s,l,r),!0}else if(r){const o=jm(n.state),s=o.start(-1);return Ad(n.state,n.dispatch,s,re.get(o.node(-1)).findCell(o.pos-s),r),!0}else return!1}function Cv(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=Dd(n,e.target);let i;if(e.shiftKey&&n.state.selection instanceof ce)o(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Eo(n.state.selection.$anchor))!=null&&((t=da(n,e))==null?void 0:t.pos)!=i.pos)o(i,e),e.preventDefault();else if(!r)return;function o(a,u){let c=da(n,u);const f=Ht.getState(n.state)==null;if(!c||!Lc(a,c))if(f)c=a;else return;const d=new ce(a,c);if(f||!n.state.selection.eq(d)){const p=n.state.tr.setSelection(d);f&&p.setMeta(Ht,a.pos),n.dispatch(p)}}function s(){n.root.removeEventListener("mouseup",s),n.root.removeEventListener("dragstart",s),n.root.removeEventListener("mousemove",l),Ht.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(Ht,-1))}function l(a){const u=a,c=Ht.getState(n.state);let f;if(c!=null)f=n.state.doc.resolve(c);else if(Dd(n,u.target)!=r&&(f=da(n,e),!f))return s();f&&o(f,u)}n.root.addEventListener("mouseup",s),n.root.addEventListener("dragstart",s),n.root.addEventListener("mousemove",l)}function Xm(n,e,t){if(!(n.state.selection instanceof B))return null;const{$head:r}=n.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((t<0?r.index(i):r.indexAfter(i))!=(t<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const l=r.before(i),a=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(a)?l:null}}return null}function Dd(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function da(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?Eo(n.state.doc.resolve(t.pos)):null}var Ev=class{constructor(n,e){this.node=n,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),fu(n,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,fu(n,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};function fu(n,e,t,r,i,o){var s;let l=0,a=!0,u=e.firstChild;const c=n.firstChild;if(c){for(let f=0,d=0;f<c.childCount;f++){const{colspan:p,colwidth:h}=c.child(f).attrs;for(let g=0;g<p;g++,d++){const v=i==d?o:h&&h[g],m=v?v+"px":"";l+=v||r,v||(a=!1),u?(u.style.width!=m&&(u.style.width=m),u=u.nextSibling):e.appendChild(document.createElement("col")).style.width=m}}for(;u;){const f=u.nextSibling;(s=u.parentNode)==null||s.removeChild(u),u=f}a?(t.style.width=l+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=l+"px")}}var nt=new Cl("tableColumnResizing");function Nv({handleWidth:n=5,cellMinWidth:e=25,View:t=Ev,lastColumnResizable:r=!0}={}){const i=new pn({key:nt,state:{init(o,s){return i.spec.props.nodeViews[Mt(s.schema).table.name]=(l,a)=>new t(l,e,a),new Mv(-1,!1)},apply(o,s){return s.apply(o)}},props:{attributes:o=>{const s=nt.getState(o);return s&&s.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,s)=>{Rv(o,s,n,e,r)},mouseleave:o=>{Ov(o)},mousedown:(o,s)=>{Tv(o,s,e)}},decorations:o=>{const s=nt.getState(o);if(s&&s.activeHandle>-1)return Fv(o,s.activeHandle)},nodeViews:{}}});return i}var Mv=class Ns{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(nt);if(r&&r.setHandle!=null)return new Ns(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Ns(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let i=e.mapping.map(t.activeHandle,-1);return uu(e.doc.resolve(i))||(i=-1),new Ns(i,t.dragging)}return t}};function Rv(n,e,t,r,i){const o=nt.getState(n.state);if(o&&!o.dragging){const s=Dv(e.target);let l=-1;if(s){const{left:a,right:u}=s.getBoundingClientRect();e.clientX-a<=t?l=zd(n,e,"left",t):u-e.clientX<=t&&(l=zd(n,e,"right",t))}if(l!=o.activeHandle){if(!i&&l!==-1){const a=n.state.doc.resolve(l),u=a.node(-1),c=re.get(u),f=a.start(-1);if(c.colCount(a.pos-f)+a.nodeAfter.attrs.colspan-1==c.width-1)return}Gm(n,l)}}}function Ov(n){const e=nt.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&Gm(n,-1)}function Tv(n,e,t){var r;const i=(r=n.dom.ownerDocument.defaultView)!=null?r:window,o=nt.getState(n.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const s=n.state.doc.nodeAt(o.activeHandle),l=Av(n,o.activeHandle,s.attrs);n.dispatch(n.state.tr.setMeta(nt,{setDragging:{startX:e.clientX,startWidth:l}}));function a(c){i.removeEventListener("mouseup",a),i.removeEventListener("mousemove",u);const f=nt.getState(n.state);f!=null&&f.dragging&&(zv(n,f.activeHandle,Id(f.dragging,c,t)),n.dispatch(n.state.tr.setMeta(nt,{setDragging:null})))}function u(c){if(!c.which)return a(c);const f=nt.getState(n.state);if(f&&f.dragging){const d=Id(f.dragging,c,t);Iv(n,f.activeHandle,d,t)}}return i.addEventListener("mouseup",a),i.addEventListener("mousemove",u),e.preventDefault(),!0}function Av(n,e,{colspan:t,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=n.domAtPos(e);let l=o.node.childNodes[o.offset].offsetWidth,a=t;if(r)for(let u=0;u<t;u++)r[u]&&(l-=r[u],a--);return l/a}function Dv(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function zd(n,e,t,r){const i=t=="right"?-r:r,o=n.posAtCoords({left:e.clientX+i,top:e.clientY});if(!o)return-1;const{pos:s}=o,l=Eo(n.state.doc.resolve(s));if(!l)return-1;if(t=="right")return l.pos;const a=re.get(l.node(-1)),u=l.start(-1),c=a.map.indexOf(l.pos-u);return c%a.width==0?-1:u+a.map[c-1]}function Id(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function Gm(n,e){n.dispatch(n.state.tr.setMeta(nt,{setHandle:e}))}function zv(n,e,t){const r=n.state.doc.resolve(e),i=r.node(-1),o=re.get(i),s=r.start(-1),l=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,a=n.state.tr;for(let u=0;u<o.height;u++){const c=u*o.width+l;if(u&&o.map[c]==o.map[c-o.width])continue;const f=o.map[c],d=i.nodeAt(f).attrs,p=d.colspan==1?0:l-o.colCount(f);if(d.colwidth&&d.colwidth[p]==t)continue;const h=d.colwidth?d.colwidth.slice():Pv(d.colspan);h[p]=t,a.setNodeMarkup(s+f,null,{...d,colwidth:h})}a.docChanged&&n.dispatch(a)}function Iv(n,e,t,r){const i=n.state.doc.resolve(e),o=i.node(-1),s=i.start(-1),l=re.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;let a=n.domAtPos(i.start(-1)).node;for(;a&&a.nodeName!="TABLE";)a=a.parentNode;a&&fu(o,a.firstChild,a,r,l,t)}function Pv(n){return Array(n).fill(0)}function Fv(n,e){const t=[],r=n.doc.resolve(e),i=r.node(-1);if(!i)return j.empty;const o=re.get(i),s=r.start(-1),l=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan;for(let a=0;a<o.height;a++){const u=l+a*o.width-1;if((l==o.width||o.map[u]!=o.map[u+1])&&(a==0||o.map[u]!=o.map[u-o.width])){const c=o.map[u],f=s+c+i.nodeAt(c).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",t.push(Ie.widget(f,d))}}return j.create(n.doc,t)}function Zm(n){const e=n.selection,t=jm(n),r=t.node(-1),i=t.start(-1),o=re.get(r);return{...e instanceof ce?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(t.pos-i),tableStart:i,map:o,table:r}}function Lv(n){return function(e,t){if(!Fc(e))return!1;if(t){const r=Mt(e.schema),i=Zm(e),o=e.tr,s=i.map.cellsInRect(n=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:n=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),l=s.map(a=>i.table.nodeAt(a));for(let a=0;a<s.length;a++)l[a].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[a],r.cell,l[a].attrs);if(o.steps.length==0)for(let a=0;a<s.length;a++)o.setNodeMarkup(i.tableStart+s[a],r.header_cell,l[a].attrs);t(o)}return!0}}function Pd(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==t.header_cell)return!1}return!0}function $c(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?Lv(n):function(t,r){if(!Fc(t))return!1;if(r){const i=Mt(t.schema),o=Zm(t),s=t.tr,l=Pd("row",o,i),a=Pd("column",o,i),c=(n==="column"?l:n==="row"?a:!1)?1:0,f=n=="column"?{left:0,top:c,right:1,bottom:o.map.height}:n=="row"?{left:c,top:0,right:o.map.width,bottom:1}:o,d=n=="column"?a?i.cell:i.header_cell:n=="row"?l?i.cell:i.header_cell:i.cell;o.map.cellsInRect(f).forEach(p=>{const h=p+o.tableStart,g=s.doc.nodeAt(h);g&&s.setNodeMarkup(h,d,g.attrs)}),r(s)}return!0}}$c("row",{useDeprecatedLogic:!0});$c("column",{useDeprecatedLogic:!0});$c("cell",{useDeprecatedLogic:!0});function $v({allowTableNodeSelection:n=!1}={}){return new pn({key:Ht,state:{init(){return null},apply(e,t){const r=e.getMeta(Ht);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:i,pos:o}=e.mapping.mapResult(t);return i?null:o}},props:{decorations:uv,handleDOMEvents:{mousedown:Cv},createSelectionBetween(e){return Ht.getState(e.state)!=null?e.state.selection:null},handleTripleClick:Sv,handleKeyDown:vv,handlePaste:xv},appendTransaction(e,t,r){return dv(r,hv(r,t),n)}})}const No=C.createContext(null);C.createContext(null);const bv=C.createContext(null);j.empty;var eg={exports:{}},Xe={},tg={exports:{}},ng={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(T,I){var L=T.length;T.push(I);e:for(;0<L;){var te=L-1>>>1,ae=T[te];if(0<i(ae,I))T[te]=I,T[L]=ae,L=te;else break e}}function t(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var I=T[0],L=T.pop();if(L!==I){T[0]=L;e:for(var te=0,ae=T.length,zo=ae>>>1;te<zo;){var xn=2*(te+1)-1,_l=T[xn],Cn=xn+1,Io=T[Cn];if(0>i(_l,L))Cn<ae&&0>i(Io,_l)?(T[te]=Io,T[Cn]=L,te=Cn):(T[te]=_l,T[xn]=L,te=xn);else if(Cn<ae&&0>i(Io,L))T[te]=Io,T[Cn]=L,te=Cn;else break e}}return I}function i(T,I){var L=T.sortIndex-I.sortIndex;return L!==0?L:T.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var a=[],u=[],c=1,f=null,d=3,p=!1,h=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var I=t(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=T)r(u),I.sortIndex=I.expirationTime,e(a,I);else break;I=t(u)}}function x(T){if(g=!1,w(T),!h)if(t(a)!==null)h=!0,de(N);else{var I=t(u);I!==null&&Sn(x,I.startTime-T)}}function N(T,I){h=!1,g&&(g=!1,m(O),O=-1),p=!0;var L=d;try{for(w(I),f=t(a);f!==null&&(!(f.expirationTime>I)||T&&!We());){var te=f.callback;if(typeof te=="function"){f.callback=null,d=f.priorityLevel;var ae=te(f.expirationTime<=I);I=n.unstable_now(),typeof ae=="function"?f.callback=ae:f===t(a)&&r(a),w(I)}else r(a);f=t(a)}if(f!==null)var zo=!0;else{var xn=t(u);xn!==null&&Sn(x,xn.startTime-I),zo=!1}return zo}finally{f=null,d=L,p=!1}}var M=!1,R=null,O=-1,W=5,F=-1;function We(){return!(n.unstable_now()-F<W)}function Jt(){if(R!==null){var T=n.unstable_now();F=T;var I=!0;try{I=R(!0,T)}finally{I?vn():(M=!1,R=null)}}else M=!1}var vn;if(typeof y=="function")vn=function(){y(Jt)};else if(typeof MessageChannel<"u"){var Do=new MessageChannel,H=Do.port2;Do.port1.onmessage=Jt,vn=function(){H.postMessage(null)}}else vn=function(){v(Jt,0)};function de(T){R=T,M||(M=!0,vn())}function Sn(T,I){O=v(function(){T(n.unstable_now())},I)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(T){T.callback=null},n.unstable_continueExecution=function(){h||p||(h=!0,de(N))},n.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<T?Math.floor(1e3/T):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(a)},n.unstable_next=function(T){switch(d){case 1:case 2:case 3:var I=3;break;default:I=d}var L=d;d=I;try{return T()}finally{d=L}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=d;d=T;try{return I()}finally{d=L}},n.unstable_scheduleCallback=function(T,I,L){var te=n.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?te+L:te):L=te,T){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=L+ae,T={id:c++,callback:I,priorityLevel:T,startTime:L,expirationTime:ae,sortIndex:-1},L>te?(T.sortIndex=L,e(u,T),t(a)===null&&T===t(u)&&(g?(m(O),O=-1):g=!0,Sn(x,L-te))):(T.sortIndex=ae,e(a,T),h||p||(h=!0,de(N))),T},n.unstable_shouldYield=We,n.unstable_wrapCallback=function(T){var I=d;return function(){var L=d;d=I;try{return T.apply(this,arguments)}finally{d=L}}}})(ng);tg.exports=ng;var Bv=tg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg=C,Ye=Bv;function E(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ig=new Set,Gi={};function Gn(n,e){Br(n,e),Br(n+"Capture",e)}function Br(n,e){for(Gi[n]=e,n=0;n<e.length;n++)ig.add(e[n])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),du=Object.prototype.hasOwnProperty,Jv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fd={},Ld={};function Vv(n){return du.call(Ld,n)?!0:du.call(Fd,n)?!1:Jv.test(n)?Ld[n]=!0:(Fd[n]=!0,!1)}function _v(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Wv(n,e,t,r){if(e===null||typeof e>"u"||_v(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Oe(n,e,t,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ye[n]=new Oe(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ye[e]=new Oe(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ye[n]=new Oe(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ye[n]=new Oe(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ye[n]=new Oe(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ye[n]=new Oe(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ye[n]=new Oe(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ye[n]=new Oe(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ye[n]=new Oe(n,5,!1,n.toLowerCase(),null,!1,!1)});var bc=/[\-:]([a-z])/g;function Bc(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(bc,Bc);ye[e]=new Oe(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(bc,Bc);ye[e]=new Oe(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(bc,Bc);ye[e]=new Oe(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ye[n]=new Oe(n,1,!1,n.toLowerCase(),null,!1,!1)});ye.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ye[n]=new Oe(n,1,!1,n.toLowerCase(),null,!0,!0)});function Jc(n,e,t,r){var i=ye.hasOwnProperty(e)?ye[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Wv(e,t,i,r)&&(t=null),r||i===null?Vv(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Bt=rg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_o=Symbol.for("react.element"),ur=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),Vc=Symbol.for("react.strict_mode"),pu=Symbol.for("react.profiler"),og=Symbol.for("react.provider"),sg=Symbol.for("react.context"),_c=Symbol.for("react.forward_ref"),hu=Symbol.for("react.suspense"),mu=Symbol.for("react.suspense_list"),Wc=Symbol.for("react.memo"),Wt=Symbol.for("react.lazy"),lg=Symbol.for("react.offscreen"),$d=Symbol.iterator;function Yr(n){return n===null||typeof n!="object"?null:(n=$d&&n[$d]||n["@@iterator"],typeof n=="function"?n:null)}var G=Object.assign,pa;function Ri(n){if(pa===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);pa=e&&e[1]||""}return`
`+pa+n}var ha=!1;function ma(n,e){if(!n||ha)return"";ha=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return n.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",n.displayName)),a}while(1<=s&&0<=l);break}}}finally{ha=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ri(n):""}function Uv(n){switch(n.tag){case 5:return Ri(n.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 2:case 15:return n=ma(n.type,!1),n;case 11:return n=ma(n.type.render,!1),n;case 1:return n=ma(n.type,!0),n;default:return""}}function gu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case cr:return"Fragment";case ur:return"Portal";case pu:return"Profiler";case Vc:return"StrictMode";case hu:return"Suspense";case mu:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case sg:return(n.displayName||"Context")+".Consumer";case og:return(n._context.displayName||"Context")+".Provider";case _c:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Wc:return e=n.displayName||null,e!==null?e:gu(n.type)||"Memo";case Wt:e=n._payload,n=n._init;try{return gu(n(e))}catch{}}return null}function Hv(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gu(e);case 8:return e===Vc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cn(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ag(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Kv(n){var e=ag(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Wo(n){n._valueTracker||(n._valueTracker=Kv(n))}function ug(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=ag(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function qs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function yu(n,e){var t=e.checked;return G({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function bd(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=cn(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cg(n,e){e=e.checked,e!=null&&Jc(n,"checked",e,!1)}function wu(n,e){cg(n,e);var t=cn(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ku(n,e.type,t):e.hasOwnProperty("defaultValue")&&ku(n,e.type,cn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Bd(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function ku(n,e,t){(e!=="number"||qs(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Oi=Array.isArray;function Er(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+cn(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function vu(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return G({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Jd(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(E(92));if(Oi(t)){if(1<t.length)throw Error(E(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:cn(t)}}function fg(n,e){var t=cn(e.value),r=cn(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Vd(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function dg(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Su(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?dg(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Uo,pg=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Uo=Uo||document.createElement("div"),Uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uo.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Zi(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jv=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(n){jv.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Fi[e]=Fi[n]})});function hg(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Fi.hasOwnProperty(n)&&Fi[n]?(""+e).trim():e+"px"}function mg(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=hg(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Qv=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xu(n,e){if(e){if(Qv[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Cu(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eu=null;function Uc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Nu=null,Nr=null,Mr=null;function _d(n){if(n=Oo(n)){if(typeof Nu!="function")throw Error(E(280));var e=n.stateNode;e&&(e=Al(e),Nu(n.stateNode,n.type,e))}}function gg(n){Nr?Mr?Mr.push(n):Mr=[n]:Nr=n}function yg(){if(Nr){var n=Nr,e=Mr;if(Mr=Nr=null,_d(n),e)for(n=0;n<e.length;n++)_d(e[n])}}function wg(n,e){return n(e)}function kg(){}var ga=!1;function vg(n,e,t){if(ga)return n(e,t);ga=!0;try{return wg(n,e,t)}finally{ga=!1,(Nr!==null||Mr!==null)&&(kg(),yg())}}function eo(n,e){var t=n.stateNode;if(t===null)return null;var r=Al(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(E(231,e,typeof t));return t}var Mu=!1;if(Ft)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Mu=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Mu=!1}function qv(n,e,t,r,i,o,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Li=!1,Ys=null,Xs=!1,Ru=null,Yv={onError:function(n){Li=!0,Ys=n}};function Xv(n,e,t,r,i,o,s,l,a){Li=!1,Ys=null,qv.apply(Yv,arguments)}function Gv(n,e,t,r,i,o,s,l,a){if(Xv.apply(this,arguments),Li){if(Li){var u=Ys;Li=!1,Ys=null}else throw Error(E(198));Xs||(Xs=!0,Ru=u)}}function Zn(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Sg(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Wd(n){if(Zn(n)!==n)throw Error(E(188))}function Zv(n){var e=n.alternate;if(!e){if(e=Zn(n),e===null)throw Error(E(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return Wd(i),n;if(o===r)return Wd(i),e;o=o.sibling}throw Error(E(188))}if(t.return!==r.return)t=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===t){s=!0,t=i,r=o;break}if(l===r){s=!0,r=i,t=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===t){s=!0,t=o,r=i;break}if(l===r){s=!0,r=o,t=i;break}l=l.sibling}if(!s)throw Error(E(189))}}if(t.alternate!==r)throw Error(E(190))}if(t.tag!==3)throw Error(E(188));return t.stateNode.current===t?n:e}function xg(n){return n=Zv(n),n!==null?Cg(n):null}function Cg(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Cg(n);if(e!==null)return e;n=n.sibling}return null}var Eg=Ye.unstable_scheduleCallback,Ud=Ye.unstable_cancelCallback,eS=Ye.unstable_shouldYield,tS=Ye.unstable_requestPaint,ne=Ye.unstable_now,nS=Ye.unstable_getCurrentPriorityLevel,Hc=Ye.unstable_ImmediatePriority,Ng=Ye.unstable_UserBlockingPriority,Gs=Ye.unstable_NormalPriority,rS=Ye.unstable_LowPriority,Mg=Ye.unstable_IdlePriority,Ml=null,xt=null;function iS(n){if(xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Ml,n,void 0,(n.current.flags&128)===128)}catch{}}var dt=Math.clz32?Math.clz32:lS,oS=Math.log,sS=Math.LN2;function lS(n){return n>>>=0,n===0?32:31-(oS(n)/sS|0)|0}var Ho=64,Ko=4194304;function Ti(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Zs(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,o=n.pingedLanes,s=t&268435455;if(s!==0){var l=s&~i;l!==0?r=Ti(l):(o&=s,o!==0&&(r=Ti(o)))}else s=t&~i,s!==0?r=Ti(s):o!==0&&(r=Ti(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-dt(e),i=1<<t,r|=n[t],e&=~i;return r}function aS(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uS(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,o=n.pendingLanes;0<o;){var s=31-dt(o),l=1<<s,a=i[s];a===-1?(!(l&t)||l&r)&&(i[s]=aS(l,e)):a<=e&&(n.expiredLanes|=l),o&=~l}}function Ou(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Rg(){var n=Ho;return Ho<<=1,!(Ho&4194240)&&(Ho=64),n}function ya(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Mo(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-dt(e),n[e]=t}function cS(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-dt(t),o=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~o}}function Kc(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-dt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var _=0;function Og(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Tg,jc,Ag,Dg,zg,Tu=!1,jo=[],en=null,tn=null,nn=null,to=new Map,no=new Map,Kt=[],fS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hd(n,e){switch(n){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":to.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":no.delete(e.pointerId)}}function Gr(n,e,t,r,i,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Oo(e),e!==null&&jc(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function dS(n,e,t,r,i){switch(e){case"focusin":return en=Gr(en,n,e,t,r,i),!0;case"dragenter":return tn=Gr(tn,n,e,t,r,i),!0;case"mouseover":return nn=Gr(nn,n,e,t,r,i),!0;case"pointerover":var o=i.pointerId;return to.set(o,Gr(to.get(o)||null,n,e,t,r,i)),!0;case"gotpointercapture":return o=i.pointerId,no.set(o,Gr(no.get(o)||null,n,e,t,r,i)),!0}return!1}function Ig(n){var e=In(n.target);if(e!==null){var t=Zn(e);if(t!==null){if(e=t.tag,e===13){if(e=Sg(t),e!==null){n.blockedOn=e,zg(n.priority,function(){Ag(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ms(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Au(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Eu=r,t.target.dispatchEvent(r),Eu=null}else return e=Oo(t),e!==null&&jc(e),n.blockedOn=t,!1;e.shift()}return!0}function Kd(n,e,t){Ms(n)&&t.delete(e)}function pS(){Tu=!1,en!==null&&Ms(en)&&(en=null),tn!==null&&Ms(tn)&&(tn=null),nn!==null&&Ms(nn)&&(nn=null),to.forEach(Kd),no.forEach(Kd)}function Zr(n,e){n.blockedOn===e&&(n.blockedOn=null,Tu||(Tu=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,pS)))}function ro(n){function e(i){return Zr(i,n)}if(0<jo.length){Zr(jo[0],n);for(var t=1;t<jo.length;t++){var r=jo[t];r.blockedOn===n&&(r.blockedOn=null)}}for(en!==null&&Zr(en,n),tn!==null&&Zr(tn,n),nn!==null&&Zr(nn,n),to.forEach(e),no.forEach(e),t=0;t<Kt.length;t++)r=Kt[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Kt.length&&(t=Kt[0],t.blockedOn===null);)Ig(t),t.blockedOn===null&&Kt.shift()}var Rr=Bt.ReactCurrentBatchConfig,el=!0;function hS(n,e,t,r){var i=_,o=Rr.transition;Rr.transition=null;try{_=1,Qc(n,e,t,r)}finally{_=i,Rr.transition=o}}function mS(n,e,t,r){var i=_,o=Rr.transition;Rr.transition=null;try{_=4,Qc(n,e,t,r)}finally{_=i,Rr.transition=o}}function Qc(n,e,t,r){if(el){var i=Au(n,e,t,r);if(i===null)Ra(n,e,r,tl,t),Hd(n,r);else if(dS(i,n,e,t,r))r.stopPropagation();else if(Hd(n,r),e&4&&-1<fS.indexOf(n)){for(;i!==null;){var o=Oo(i);if(o!==null&&Tg(o),o=Au(n,e,t,r),o===null&&Ra(n,e,r,tl,t),o===i)break;i=o}i!==null&&r.stopPropagation()}else Ra(n,e,r,null,t)}}var tl=null;function Au(n,e,t,r){if(tl=null,n=Uc(r),n=In(n),n!==null)if(e=Zn(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Sg(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return tl=n,null}function Pg(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nS()){case Hc:return 1;case Ng:return 4;case Gs:case rS:return 16;case Mg:return 536870912;default:return 16}default:return 16}}var Xt=null,qc=null,Rs=null;function Fg(){if(Rs)return Rs;var n,e=qc,t=e.length,r,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(n=0;n<t&&e[n]===i[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===i[o-r];r++);return Rs=i.slice(n,1<r?1-r:void 0)}function Os(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Qo(){return!0}function jd(){return!1}function Ge(n){function e(t,r,i,o,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Qo:jd,this.isPropagationStopped=jd,this}return G(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),e}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yc=Ge(Qr),Ro=G({},Qr,{view:0,detail:0}),gS=Ge(Ro),wa,ka,ei,Rl=G({},Ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ei&&(ei&&n.type==="mousemove"?(wa=n.screenX-ei.screenX,ka=n.screenY-ei.screenY):ka=wa=0,ei=n),wa)},movementY:function(n){return"movementY"in n?n.movementY:ka}}),Qd=Ge(Rl),yS=G({},Rl,{dataTransfer:0}),wS=Ge(yS),kS=G({},Ro,{relatedTarget:0}),va=Ge(kS),vS=G({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),SS=Ge(vS),xS=G({},Qr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),CS=Ge(xS),ES=G({},Qr,{data:0}),qd=Ge(ES),NS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OS(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=RS[n])?!!e[n]:!1}function Xc(){return OS}var TS=G({},Ro,{key:function(n){if(n.key){var e=NS[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Os(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?MS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(n){return n.type==="keypress"?Os(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Os(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),AS=Ge(TS),DS=G({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yd=Ge(DS),zS=G({},Ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),IS=Ge(zS),PS=G({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),FS=Ge(PS),LS=G({},Rl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$S=Ge(LS),bS=[9,13,27,32],Gc=Ft&&"CompositionEvent"in window,$i=null;Ft&&"documentMode"in document&&($i=document.documentMode);var BS=Ft&&"TextEvent"in window&&!$i,Lg=Ft&&(!Gc||$i&&8<$i&&11>=$i),Xd=" ",Gd=!1;function $g(n,e){switch(n){case"keyup":return bS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bg(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fr=!1;function JS(n,e){switch(n){case"compositionend":return bg(e);case"keypress":return e.which!==32?null:(Gd=!0,Xd);case"textInput":return n=e.data,n===Xd&&Gd?null:n;default:return null}}function VS(n,e){if(fr)return n==="compositionend"||!Gc&&$g(n,e)?(n=Fg(),Rs=qc=Xt=null,fr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lg&&e.locale!=="ko"?null:e.data;default:return null}}var _S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zd(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!_S[n.type]:e==="textarea"}function Bg(n,e,t,r){gg(r),e=nl(e,"onChange"),0<e.length&&(t=new Yc("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var bi=null,io=null;function WS(n){Yg(n,0)}function Ol(n){var e=hr(n);if(ug(e))return n}function US(n,e){if(n==="change")return e}var Jg=!1;if(Ft){var Sa;if(Ft){var xa="oninput"in document;if(!xa){var ep=document.createElement("div");ep.setAttribute("oninput","return;"),xa=typeof ep.oninput=="function"}Sa=xa}else Sa=!1;Jg=Sa&&(!document.documentMode||9<document.documentMode)}function tp(){bi&&(bi.detachEvent("onpropertychange",Vg),io=bi=null)}function Vg(n){if(n.propertyName==="value"&&Ol(io)){var e=[];Bg(e,io,n,Uc(n)),vg(WS,e)}}function HS(n,e,t){n==="focusin"?(tp(),bi=e,io=t,bi.attachEvent("onpropertychange",Vg)):n==="focusout"&&tp()}function KS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ol(io)}function jS(n,e){if(n==="click")return Ol(e)}function QS(n,e){if(n==="input"||n==="change")return Ol(e)}function qS(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ht=typeof Object.is=="function"?Object.is:qS;function oo(n,e){if(ht(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!du.call(e,i)||!ht(n[i],e[i]))return!1}return!0}function np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rp(n,e){var t=np(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=np(t)}}function _g(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?_g(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Wg(){for(var n=window,e=qs();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=qs(n.document)}return e}function Zc(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function YS(n){var e=Wg(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&_g(t.ownerDocument.documentElement,t)){if(r!==null&&Zc(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!n.extend&&o>r&&(i=r,r=o,o=i),i=rp(t,o);var s=rp(t,r);i&&s&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var XS=Ft&&"documentMode"in document&&11>=document.documentMode,dr=null,Du=null,Bi=null,zu=!1;function ip(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;zu||dr==null||dr!==qs(r)||(r=dr,"selectionStart"in r&&Zc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bi&&oo(Bi,r)||(Bi=r,r=nl(Du,"onSelect"),0<r.length&&(e=new Yc("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=dr)))}function qo(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var pr={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionend:qo("Transition","TransitionEnd")},Ca={},Ug={};Ft&&(Ug=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function Tl(n){if(Ca[n])return Ca[n];if(!pr[n])return n;var e=pr[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Ug)return Ca[n]=e[t];return n}var Hg=Tl("animationend"),Kg=Tl("animationiteration"),jg=Tl("animationstart"),Qg=Tl("transitionend"),qg=new Map,op="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gn(n,e){qg.set(n,e),Gn(e,[n])}for(var Ea=0;Ea<op.length;Ea++){var Na=op[Ea],GS=Na.toLowerCase(),ZS=Na[0].toUpperCase()+Na.slice(1);gn(GS,"on"+ZS)}gn(Hg,"onAnimationEnd");gn(Kg,"onAnimationIteration");gn(jg,"onAnimationStart");gn("dblclick","onDoubleClick");gn("focusin","onFocus");gn("focusout","onBlur");gn(Qg,"onTransitionEnd");Br("onMouseEnter",["mouseout","mouseover"]);Br("onMouseLeave",["mouseout","mouseover"]);Br("onPointerEnter",["pointerout","pointerover"]);Br("onPointerLeave",["pointerout","pointerover"]);Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ex=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ai));function sp(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Gv(r,e,void 0,n),n.currentTarget=null}function Yg(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;sp(i,l,u),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;sp(i,l,u),o=a}}}if(Xs)throw n=Ru,Xs=!1,Ru=null,n}function K(n,e){var t=e[$u];t===void 0&&(t=e[$u]=new Set);var r=n+"__bubble";t.has(r)||(Xg(e,n,2,!1),t.add(r))}function Ma(n,e,t){var r=0;e&&(r|=4),Xg(t,n,r,e)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function so(n){if(!n[Yo]){n[Yo]=!0,ig.forEach(function(t){t!=="selectionchange"&&(ex.has(t)||Ma(t,!1,n),Ma(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Yo]||(e[Yo]=!0,Ma("selectionchange",!1,e))}}function Xg(n,e,t,r){switch(Pg(e)){case 1:var i=hS;break;case 4:i=mS;break;default:i=Qc}t=i.bind(null,e,t,n),i=void 0,!Mu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Ra(n,e,t,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=In(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}vg(function(){var u=o,c=Uc(t),f=[];e:{var d=qg.get(n);if(d!==void 0){var p=Yc,h=n;switch(n){case"keypress":if(Os(t)===0)break e;case"keydown":case"keyup":p=AS;break;case"focusin":h="focus",p=va;break;case"focusout":h="blur",p=va;break;case"beforeblur":case"afterblur":p=va;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Qd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=wS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=IS;break;case Hg:case Kg:case jg:p=SS;break;case Qg:p=FS;break;case"scroll":p=gS;break;case"wheel":p=$S;break;case"copy":case"cut":case"paste":p=CS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Yd}var g=(e&4)!==0,v=!g&&n==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var y=u,w;y!==null;){w=y;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,m!==null&&(x=eo(y,m),x!=null&&g.push(lo(y,x,w)))),v)break;y=y.return}0<g.length&&(d=new p(d,h,null,t,c),f.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",d&&t!==Eu&&(h=t.relatedTarget||t.fromElement)&&(In(h)||h[Lt]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(h=t.relatedTarget||t.toElement,p=u,h=h?In(h):null,h!==null&&(v=Zn(h),h!==v||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=u),p!==h)){if(g=Qd,x="onMouseLeave",m="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(g=Yd,x="onPointerLeave",m="onPointerEnter",y="pointer"),v=p==null?d:hr(p),w=h==null?d:hr(h),d=new g(x,y+"leave",p,t,c),d.target=v,d.relatedTarget=w,x=null,In(c)===u&&(g=new g(m,y+"enter",h,t,c),g.target=w,g.relatedTarget=v,x=g),v=x,p&&h)t:{for(g=p,m=h,y=0,w=g;w;w=nr(w))y++;for(w=0,x=m;x;x=nr(x))w++;for(;0<y-w;)g=nr(g),y--;for(;0<w-y;)m=nr(m),w--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=nr(g),m=nr(m)}g=null}else g=null;p!==null&&lp(f,d,p,g,!1),h!==null&&v!==null&&lp(f,v,h,g,!0)}}e:{if(d=u?hr(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var N=US;else if(Zd(d))if(Jg)N=QS;else{N=KS;var M=HS}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(N=jS);if(N&&(N=N(n,u))){Bg(f,N,t,c);break e}M&&M(n,d,u),n==="focusout"&&(M=d._wrapperState)&&M.controlled&&d.type==="number"&&ku(d,"number",d.value)}switch(M=u?hr(u):window,n){case"focusin":(Zd(M)||M.contentEditable==="true")&&(dr=M,Du=u,Bi=null);break;case"focusout":Bi=Du=dr=null;break;case"mousedown":zu=!0;break;case"contextmenu":case"mouseup":case"dragend":zu=!1,ip(f,t,c);break;case"selectionchange":if(XS)break;case"keydown":case"keyup":ip(f,t,c)}var R;if(Gc)e:{switch(n){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else fr?$g(n,t)&&(O="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(O="onCompositionStart");O&&(Lg&&t.locale!=="ko"&&(fr||O!=="onCompositionStart"?O==="onCompositionEnd"&&fr&&(R=Fg()):(Xt=c,qc="value"in Xt?Xt.value:Xt.textContent,fr=!0)),M=nl(u,O),0<M.length&&(O=new qd(O,n,null,t,c),f.push({event:O,listeners:M}),R?O.data=R:(R=bg(t),R!==null&&(O.data=R)))),(R=BS?JS(n,t):VS(n,t))&&(u=nl(u,"onBeforeInput"),0<u.length&&(c=new qd("onBeforeInput","beforeinput",null,t,c),f.push({event:c,listeners:u}),c.data=R))}Yg(f,e)})}function lo(n,e,t){return{instance:n,listener:e,currentTarget:t}}function nl(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=eo(n,t),o!=null&&r.unshift(lo(n,o,i)),o=eo(n,e),o!=null&&r.push(lo(n,o,i))),n=n.return}return r}function nr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function lp(n,e,t,r,i){for(var o=e._reactName,s=[];t!==null&&t!==r;){var l=t,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=eo(t,o),a!=null&&s.unshift(lo(t,a,l))):i||(a=eo(t,o),a!=null&&s.push(lo(t,a,l)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var tx=/\r\n?/g,nx=/\u0000|\uFFFD/g;function ap(n){return(typeof n=="string"?n:""+n).replace(tx,`
`).replace(nx,"")}function Xo(n,e,t){if(e=ap(e),ap(n)!==e&&t)throw Error(E(425))}function rl(){}var Iu=null,Pu=null;function Fu(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lu=typeof setTimeout=="function"?setTimeout:void 0,rx=typeof clearTimeout=="function"?clearTimeout:void 0,up=typeof Promise=="function"?Promise:void 0,ix=typeof queueMicrotask=="function"?queueMicrotask:typeof up<"u"?function(n){return up.resolve(null).then(n).catch(ox)}:Lu;function ox(n){setTimeout(function(){throw n})}function Oa(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),ro(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);ro(e)}function rn(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function cp(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var qr=Math.random().toString(36).slice(2),wt="__reactFiber$"+qr,ao="__reactProps$"+qr,Lt="__reactContainer$"+qr,$u="__reactEvents$"+qr,sx="__reactListeners$"+qr,lx="__reactHandles$"+qr;function In(n){var e=n[wt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Lt]||t[wt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=cp(n);n!==null;){if(t=n[wt])return t;n=cp(n)}return e}n=t,t=n.parentNode}return null}function Oo(n){return n=n[wt]||n[Lt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function hr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(E(33))}function Al(n){return n[ao]||null}var bu=[],mr=-1;function yn(n){return{current:n}}function Q(n){0>mr||(n.current=bu[mr],bu[mr]=null,mr--)}function U(n,e){mr++,bu[mr]=n.current,n.current=e}var fn={},Se=yn(fn),Le=yn(!1),Wn=fn;function Jr(n,e){var t=n.type.contextTypes;if(!t)return fn;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function $e(n){return n=n.childContextTypes,n!=null}function il(){Q(Le),Q(Se)}function fp(n,e,t){if(Se.current!==fn)throw Error(E(168));U(Se,e),U(Le,t)}function Gg(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,Hv(n)||"Unknown",i));return G({},t,r)}function ol(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fn,Wn=Se.current,U(Se,n),U(Le,Le.current),!0}function dp(n,e,t){var r=n.stateNode;if(!r)throw Error(E(169));t?(n=Gg(n,e,Wn),r.__reactInternalMemoizedMergedChildContext=n,Q(Le),Q(Se),U(Se,n)):Q(Le),U(Le,t)}var Dt=null,Dl=!1,Ta=!1;function Zg(n){Dt===null?Dt=[n]:Dt.push(n)}function ax(n){Dl=!0,Zg(n)}function wn(){if(!Ta&&Dt!==null){Ta=!0;var n=0,e=_;try{var t=Dt;for(_=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Dt=null,Dl=!1}catch(i){throw Dt!==null&&(Dt=Dt.slice(n+1)),Eg(Hc,wn),i}finally{_=e,Ta=!1}}return null}var gr=[],yr=0,sl=null,ll=0,et=[],tt=0,Un=null,zt=1,It="";function On(n,e){gr[yr++]=ll,gr[yr++]=sl,sl=n,ll=e}function ey(n,e,t){et[tt++]=zt,et[tt++]=It,et[tt++]=Un,Un=n;var r=zt;n=It;var i=32-dt(r)-1;r&=~(1<<i),t+=1;var o=32-dt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,zt=1<<32-dt(e)+i|t<<i|r,It=o+n}else zt=1<<o|t<<i|r,It=n}function ef(n){n.return!==null&&(On(n,1),ey(n,1,0))}function tf(n){for(;n===sl;)sl=gr[--yr],gr[yr]=null,ll=gr[--yr],gr[yr]=null;for(;n===Un;)Un=et[--tt],et[tt]=null,It=et[--tt],et[tt]=null,zt=et[--tt],et[tt]=null}var Qe=null,Ke=null,q=!1,ft=null;function ty(n,e){var t=rt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function pp(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Qe=n,Ke=rn(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Qe=n,Ke=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Un!==null?{id:zt,overflow:It}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=rt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Qe=n,Ke=null,!0):!1;default:return!1}}function Bu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ju(n){if(q){var e=Ke;if(e){var t=e;if(!pp(n,e)){if(Bu(n))throw Error(E(418));e=rn(t.nextSibling);var r=Qe;e&&pp(n,e)?ty(r,t):(n.flags=n.flags&-4097|2,q=!1,Qe=n)}}else{if(Bu(n))throw Error(E(418));n.flags=n.flags&-4097|2,q=!1,Qe=n}}}function hp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Qe=n}function Go(n){if(n!==Qe)return!1;if(!q)return hp(n),q=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Fu(n.type,n.memoizedProps)),e&&(e=Ke)){if(Bu(n))throw ny(),Error(E(418));for(;e;)ty(n,e),e=rn(e.nextSibling)}if(hp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(E(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ke=rn(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ke=null}}else Ke=Qe?rn(n.stateNode.nextSibling):null;return!0}function ny(){for(var n=Ke;n;)n=rn(n.nextSibling)}function Vr(){Ke=Qe=null,q=!1}function nf(n){ft===null?ft=[n]:ft.push(n)}var ux=Bt.ReactCurrentBatchConfig;function ut(n,e){if(n&&n.defaultProps){e=G({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var al=yn(null),ul=null,wr=null,rf=null;function of(){rf=wr=ul=null}function sf(n){var e=al.current;Q(al),n._currentValue=e}function Vu(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Or(n,e){ul=n,rf=wr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Fe=!0),n.firstContext=null)}function ot(n){var e=n._currentValue;if(rf!==n)if(n={context:n,memoizedValue:e,next:null},wr===null){if(ul===null)throw Error(E(308));wr=n,ul.dependencies={lanes:0,firstContext:n}}else wr=wr.next=n;return e}var Pn=null;function lf(n){Pn===null?Pn=[n]:Pn.push(n)}function ry(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,lf(e)):(t.next=i.next,i.next=t),e.interleaved=t,$t(n,r)}function $t(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ut=!1;function af(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iy(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pt(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function on(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,b&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$t(n,t)}return i=r.interleaved,i===null?(e.next=e,lf(r)):(e.next=i.next,i.next=e),r.interleaved=e,$t(n,t)}function Ts(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Kc(n,t)}}function mp(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=s:o=o.next=s,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function cl(n,e,t,r){var i=n.updateQueue;Ut=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?o=u:s.next=u,s=a;var c=n.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==s&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(o!==null){var f=i.baseState;s=0,c=u=a=null,l=o;do{var d=l.lane,p=l.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=n,g=l;switch(d=e,p=t,g.tag){case 1:if(h=g.payload,typeof h=="function"){f=h.call(p,f,d);break e}f=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,d=typeof h=="function"?h.call(p,f,d):h,d==null)break e;f=G({},f,d);break e;case 2:Ut=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else p={eventTime:p,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=p,a=f):c=c.next=p,s|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Kn|=s,n.lanes=s,n.memoizedState=f}}function gp(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var oy=new rg.Component().refs;function _u(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:G({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var zl={isMounted:function(n){return(n=n._reactInternals)?Zn(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Me(),i=ln(n),o=Pt(r,i);o.payload=e,t!=null&&(o.callback=t),e=on(n,o,i),e!==null&&(pt(e,n,i,r),Ts(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Me(),i=ln(n),o=Pt(r,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=on(n,o,i),e!==null&&(pt(e,n,i,r),Ts(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Me(),r=ln(n),i=Pt(t,r);i.tag=2,e!=null&&(i.callback=e),e=on(n,i,r),e!==null&&(pt(e,n,r,t),Ts(e,n,r))}};function yp(n,e,t,r,i,o,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!oo(t,r)||!oo(i,o):!0}function sy(n,e,t){var r=!1,i=fn,o=e.contextType;return typeof o=="object"&&o!==null?o=ot(o):(i=$e(e)?Wn:Se.current,r=e.contextTypes,o=(r=r!=null)?Jr(n,i):fn),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zl,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=o),e}function wp(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&zl.enqueueReplaceState(e,e.state,null)}function Wu(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=oy,af(n);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ot(o):(o=$e(e)?Wn:Se.current,i.context=Jr(n,o)),i.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(_u(n,e,o,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zl.enqueueReplaceState(i,i.state,null),cl(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function ti(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(E(309));var r=t.stateNode}if(!r)throw Error(E(147,n));var i=r,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;l===oy&&(l=i.refs={}),s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof n!="string")throw Error(E(284));if(!t._owner)throw Error(E(290,n))}return n}function Zo(n,e){throw n=Object.prototype.toString.call(e),Error(E(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function kp(n){var e=n._init;return e(n._payload)}function ly(n){function e(m,y){if(n){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function t(m,y){if(!n)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=an(m,y),m.index=0,m.sibling=null,m}function o(m,y,w){return m.index=w,n?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function s(m){return n&&m.alternate===null&&(m.flags|=2),m}function l(m,y,w,x){return y===null||y.tag!==6?(y=La(w,m.mode,x),y.return=m,y):(y=i(y,w),y.return=m,y)}function a(m,y,w,x){var N=w.type;return N===cr?c(m,y,w.props.children,x,w.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Wt&&kp(N)===y.type)?(x=i(y,w.props),x.ref=ti(m,y,w),x.return=m,x):(x=Fs(w.type,w.key,w.props,null,m.mode,x),x.ref=ti(m,y,w),x.return=m,x)}function u(m,y,w,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=$a(w,m.mode,x),y.return=m,y):(y=i(y,w.children||[]),y.return=m,y)}function c(m,y,w,x,N){return y===null||y.tag!==7?(y=Vn(w,m.mode,x,N),y.return=m,y):(y=i(y,w),y.return=m,y)}function f(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=La(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case _o:return w=Fs(y.type,y.key,y.props,null,m.mode,w),w.ref=ti(m,null,y),w.return=m,w;case ur:return y=$a(y,m.mode,w),y.return=m,y;case Wt:var x=y._init;return f(m,x(y._payload),w)}if(Oi(y)||Yr(y))return y=Vn(y,m.mode,w,null),y.return=m,y;Zo(m,y)}return null}function d(m,y,w,x){var N=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(m,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _o:return w.key===N?a(m,y,w,x):null;case ur:return w.key===N?u(m,y,w,x):null;case Wt:return N=w._init,d(m,y,N(w._payload),x)}if(Oi(w)||Yr(w))return N!==null?null:c(m,y,w,x,null);Zo(m,w)}return null}function p(m,y,w,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(w)||null,l(y,m,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _o:return m=m.get(x.key===null?w:x.key)||null,a(y,m,x,N);case ur:return m=m.get(x.key===null?w:x.key)||null,u(y,m,x,N);case Wt:var M=x._init;return p(m,y,w,M(x._payload),N)}if(Oi(x)||Yr(x))return m=m.get(w)||null,c(y,m,x,N,null);Zo(y,x)}return null}function h(m,y,w,x){for(var N=null,M=null,R=y,O=y=0,W=null;R!==null&&O<w.length;O++){R.index>O?(W=R,R=null):W=R.sibling;var F=d(m,R,w[O],x);if(F===null){R===null&&(R=W);break}n&&R&&F.alternate===null&&e(m,R),y=o(F,y,O),M===null?N=F:M.sibling=F,M=F,R=W}if(O===w.length)return t(m,R),q&&On(m,O),N;if(R===null){for(;O<w.length;O++)R=f(m,w[O],x),R!==null&&(y=o(R,y,O),M===null?N=R:M.sibling=R,M=R);return q&&On(m,O),N}for(R=r(m,R);O<w.length;O++)W=p(R,m,O,w[O],x),W!==null&&(n&&W.alternate!==null&&R.delete(W.key===null?O:W.key),y=o(W,y,O),M===null?N=W:M.sibling=W,M=W);return n&&R.forEach(function(We){return e(m,We)}),q&&On(m,O),N}function g(m,y,w,x){var N=Yr(w);if(typeof N!="function")throw Error(E(150));if(w=N.call(w),w==null)throw Error(E(151));for(var M=N=null,R=y,O=y=0,W=null,F=w.next();R!==null&&!F.done;O++,F=w.next()){R.index>O?(W=R,R=null):W=R.sibling;var We=d(m,R,F.value,x);if(We===null){R===null&&(R=W);break}n&&R&&We.alternate===null&&e(m,R),y=o(We,y,O),M===null?N=We:M.sibling=We,M=We,R=W}if(F.done)return t(m,R),q&&On(m,O),N;if(R===null){for(;!F.done;O++,F=w.next())F=f(m,F.value,x),F!==null&&(y=o(F,y,O),M===null?N=F:M.sibling=F,M=F);return q&&On(m,O),N}for(R=r(m,R);!F.done;O++,F=w.next())F=p(R,m,O,F.value,x),F!==null&&(n&&F.alternate!==null&&R.delete(F.key===null?O:F.key),y=o(F,y,O),M===null?N=F:M.sibling=F,M=F);return n&&R.forEach(function(Jt){return e(m,Jt)}),q&&On(m,O),N}function v(m,y,w,x){if(typeof w=="object"&&w!==null&&w.type===cr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case _o:e:{for(var N=w.key,M=y;M!==null;){if(M.key===N){if(N=w.type,N===cr){if(M.tag===7){t(m,M.sibling),y=i(M,w.props.children),y.return=m,m=y;break e}}else if(M.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Wt&&kp(N)===M.type){t(m,M.sibling),y=i(M,w.props),y.ref=ti(m,M,w),y.return=m,m=y;break e}t(m,M);break}else e(m,M);M=M.sibling}w.type===cr?(y=Vn(w.props.children,m.mode,x,w.key),y.return=m,m=y):(x=Fs(w.type,w.key,w.props,null,m.mode,x),x.ref=ti(m,y,w),x.return=m,m=x)}return s(m);case ur:e:{for(M=w.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){t(m,y.sibling),y=i(y,w.children||[]),y.return=m,m=y;break e}else{t(m,y);break}else e(m,y);y=y.sibling}y=$a(w,m.mode,x),y.return=m,m=y}return s(m);case Wt:return M=w._init,v(m,y,M(w._payload),x)}if(Oi(w))return h(m,y,w,x);if(Yr(w))return g(m,y,w,x);Zo(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(t(m,y.sibling),y=i(y,w),y.return=m,m=y):(t(m,y),y=La(w,m.mode,x),y.return=m,m=y),s(m)):t(m,y)}return v}var _r=ly(!0),ay=ly(!1),To={},Ct=yn(To),uo=yn(To),co=yn(To);function Fn(n){if(n===To)throw Error(E(174));return n}function uf(n,e){switch(U(co,e),U(uo,n),U(Ct,To),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Su(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Su(e,n)}Q(Ct),U(Ct,e)}function Wr(){Q(Ct),Q(uo),Q(co)}function uy(n){Fn(co.current);var e=Fn(Ct.current),t=Su(e,n.type);e!==t&&(U(uo,n),U(Ct,t))}function cf(n){uo.current===n&&(Q(Ct),Q(uo))}var Y=yn(0);function fl(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Aa=[];function ff(){for(var n=0;n<Aa.length;n++)Aa[n]._workInProgressVersionPrimary=null;Aa.length=0}var As=Bt.ReactCurrentDispatcher,Da=Bt.ReactCurrentBatchConfig,Hn=0,X=null,se=null,ue=null,dl=!1,Ji=!1,fo=0,cx=0;function we(){throw Error(E(321))}function df(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ht(n[t],e[t]))return!1;return!0}function pf(n,e,t,r,i,o){if(Hn=o,X=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,As.current=n===null||n.memoizedState===null?hx:mx,n=t(r,i),Ji){o=0;do{if(Ji=!1,fo=0,25<=o)throw Error(E(301));o+=1,ue=se=null,e.updateQueue=null,As.current=gx,n=t(r,i)}while(Ji)}if(As.current=pl,e=se!==null&&se.next!==null,Hn=0,ue=se=X=null,dl=!1,e)throw Error(E(300));return n}function hf(){var n=fo!==0;return fo=0,n}function yt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?X.memoizedState=ue=n:ue=ue.next=n,ue}function st(){if(se===null){var n=X.alternate;n=n!==null?n.memoizedState:null}else n=se.next;var e=ue===null?X.memoizedState:ue.next;if(e!==null)ue=e,se=n;else{if(n===null)throw Error(E(310));se=n,n={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},ue===null?X.memoizedState=ue=n:ue=ue.next=n}return ue}function po(n,e){return typeof e=="function"?e(n):e}function za(n){var e=st(),t=e.queue;if(t===null)throw Error(E(311));t.lastRenderedReducer=n;var r=se,i=r.baseQueue,o=t.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,t.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,u=o;do{var c=u.lane;if((Hn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,s=r):a=a.next=f,X.lanes|=c,Kn|=c}u=u.next}while(u!==null&&u!==o);a===null?s=r:a.next=l,ht(r,e.memoizedState)||(Fe=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do o=i.lane,X.lanes|=o,Kn|=o,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ia(n){var e=st(),t=e.queue;if(t===null)throw Error(E(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do o=n(o,s.action),s=s.next;while(s!==i);ht(o,e.memoizedState)||(Fe=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,r]}function cy(){}function fy(n,e){var t=X,r=st(),i=e(),o=!ht(r.memoizedState,i);if(o&&(r.memoizedState=i,Fe=!0),r=r.queue,mf(hy.bind(null,t,r,n),[n]),r.getSnapshot!==e||o||ue!==null&&ue.memoizedState.tag&1){if(t.flags|=2048,ho(9,py.bind(null,t,r,i,e),void 0,null),fe===null)throw Error(E(349));Hn&30||dy(t,e,i)}return i}function dy(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function py(n,e,t,r){e.value=t,e.getSnapshot=r,my(e)&&gy(n)}function hy(n,e,t){return t(function(){my(e)&&gy(n)})}function my(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ht(n,t)}catch{return!0}}function gy(n){var e=$t(n,1);e!==null&&pt(e,n,1,-1)}function vp(n){var e=yt();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},e.queue=n,n=n.dispatch=px.bind(null,X,n),[e.memoizedState,n]}function ho(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function yy(){return st().memoizedState}function Ds(n,e,t,r){var i=yt();X.flags|=n,i.memoizedState=ho(1|e,t,void 0,r===void 0?null:r)}function Il(n,e,t,r){var i=st();r=r===void 0?null:r;var o=void 0;if(se!==null){var s=se.memoizedState;if(o=s.destroy,r!==null&&df(r,s.deps)){i.memoizedState=ho(e,t,o,r);return}}X.flags|=n,i.memoizedState=ho(1|e,t,o,r)}function Sp(n,e){return Ds(8390656,8,n,e)}function mf(n,e){return Il(2048,8,n,e)}function wy(n,e){return Il(4,2,n,e)}function ky(n,e){return Il(4,4,n,e)}function vy(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Sy(n,e,t){return t=t!=null?t.concat([n]):null,Il(4,4,vy.bind(null,e,n),t)}function gf(){}function xy(n,e){var t=st();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&df(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Cy(n,e){var t=st();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&df(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Ey(n,e,t){return Hn&21?(ht(t,e)||(t=Rg(),X.lanes|=t,Kn|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Fe=!0),n.memoizedState=t)}function fx(n,e){var t=_;_=t!==0&&4>t?t:4,n(!0);var r=Da.transition;Da.transition={};try{n(!1),e()}finally{_=t,Da.transition=r}}function Ny(){return st().memoizedState}function dx(n,e,t){var r=ln(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},My(n))Ry(e,t);else if(t=ry(n,e,t,r),t!==null){var i=Me();pt(t,n,r,i),Oy(t,e,r)}}function px(n,e,t){var r=ln(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(My(n))Ry(e,i);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,t);if(i.hasEagerState=!0,i.eagerState=l,ht(l,s)){var a=e.interleaved;a===null?(i.next=i,lf(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}t=ry(n,e,i,r),t!==null&&(i=Me(),pt(t,n,r,i),Oy(t,e,r))}}function My(n){var e=n.alternate;return n===X||e!==null&&e===X}function Ry(n,e){Ji=dl=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Oy(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Kc(n,t)}}var pl={readContext:ot,useCallback:we,useContext:we,useEffect:we,useImperativeHandle:we,useInsertionEffect:we,useLayoutEffect:we,useMemo:we,useReducer:we,useRef:we,useState:we,useDebugValue:we,useDeferredValue:we,useTransition:we,useMutableSource:we,useSyncExternalStore:we,useId:we,unstable_isNewReconciler:!1},hx={readContext:ot,useCallback:function(n,e){return yt().memoizedState=[n,e===void 0?null:e],n},useContext:ot,useEffect:Sp,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ds(4194308,4,vy.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ds(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ds(4,2,n,e)},useMemo:function(n,e){var t=yt();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=yt();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=dx.bind(null,X,n),[r.memoizedState,n]},useRef:function(n){var e=yt();return n={current:n},e.memoizedState=n},useState:vp,useDebugValue:gf,useDeferredValue:function(n){return yt().memoizedState=n},useTransition:function(){var n=vp(!1),e=n[0];return n=fx.bind(null,n[1]),yt().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=X,i=yt();if(q){if(t===void 0)throw Error(E(407));t=t()}else{if(t=e(),fe===null)throw Error(E(349));Hn&30||dy(r,e,t)}i.memoizedState=t;var o={value:t,getSnapshot:e};return i.queue=o,Sp(hy.bind(null,r,o,n),[n]),r.flags|=2048,ho(9,py.bind(null,r,o,t,e),void 0,null),t},useId:function(){var n=yt(),e=fe.identifierPrefix;if(q){var t=It,r=zt;t=(r&~(1<<32-dt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=fo++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=cx++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},mx={readContext:ot,useCallback:xy,useContext:ot,useEffect:mf,useImperativeHandle:Sy,useInsertionEffect:wy,useLayoutEffect:ky,useMemo:Cy,useReducer:za,useRef:yy,useState:function(){return za(po)},useDebugValue:gf,useDeferredValue:function(n){var e=st();return Ey(e,se.memoizedState,n)},useTransition:function(){var n=za(po)[0],e=st().memoizedState;return[n,e]},useMutableSource:cy,useSyncExternalStore:fy,useId:Ny,unstable_isNewReconciler:!1},gx={readContext:ot,useCallback:xy,useContext:ot,useEffect:mf,useImperativeHandle:Sy,useInsertionEffect:wy,useLayoutEffect:ky,useMemo:Cy,useReducer:Ia,useRef:yy,useState:function(){return Ia(po)},useDebugValue:gf,useDeferredValue:function(n){var e=st();return se===null?e.memoizedState=n:Ey(e,se.memoizedState,n)},useTransition:function(){var n=Ia(po)[0],e=st().memoizedState;return[n,e]},useMutableSource:cy,useSyncExternalStore:fy,useId:Ny,unstable_isNewReconciler:!1};function Ur(n,e){try{var t="",r=e;do t+=Uv(r),r=r.return;while(r);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:i,digest:null}}function Pa(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Uu(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var yx=typeof WeakMap=="function"?WeakMap:Map;function Ty(n,e,t){t=Pt(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){ml||(ml=!0,ec=r),Uu(n,e)},t}function Ay(n,e,t){t=Pt(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Uu(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){Uu(n,e),typeof r!="function"&&(sn===null?sn=new Set([this]):sn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function xp(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new yx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Dx.bind(null,n,e,t),e.then(n,n))}function Cp(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Ep(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Pt(-1,1),e.tag=2,on(t,e,1))),t.lanes|=1),n)}var wx=Bt.ReactCurrentOwner,Fe=!1;function Ee(n,e,t,r){e.child=n===null?ay(e,null,t,r):_r(e,n.child,t,r)}function Np(n,e,t,r,i){t=t.render;var o=e.ref;return Or(e,i),r=pf(n,e,t,r,o,i),t=hf(),n!==null&&!Fe?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,bt(n,e,i)):(q&&t&&ef(e),e.flags|=1,Ee(n,e,r,i),e.child)}function Mp(n,e,t,r,i){if(n===null){var o=t.type;return typeof o=="function"&&!Ef(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,Dy(n,e,o,r,i)):(n=Fs(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&i)){var s=o.memoizedProps;if(t=t.compare,t=t!==null?t:oo,t(s,r)&&n.ref===e.ref)return bt(n,e,i)}return e.flags|=1,n=an(o,r),n.ref=e.ref,n.return=e,e.child=n}function Dy(n,e,t,r,i){if(n!==null){var o=n.memoizedProps;if(oo(o,r)&&n.ref===e.ref)if(Fe=!1,e.pendingProps=r=o,(n.lanes&i)!==0)n.flags&131072&&(Fe=!0);else return e.lanes=n.lanes,bt(n,e,i)}return Hu(n,e,t,r,i)}function zy(n,e,t){var r=e.pendingProps,i=r.children,o=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},U(vr,Ue),Ue|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,U(vr,Ue),Ue|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,U(vr,Ue),Ue|=r}else o!==null?(r=o.baseLanes|t,e.memoizedState=null):r=t,U(vr,Ue),Ue|=r;return Ee(n,e,i,t),e.child}function Iy(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Hu(n,e,t,r,i){var o=$e(t)?Wn:Se.current;return o=Jr(e,o),Or(e,i),t=pf(n,e,t,r,o,i),r=hf(),n!==null&&!Fe?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,bt(n,e,i)):(q&&r&&ef(e),e.flags|=1,Ee(n,e,t,i),e.child)}function Rp(n,e,t,r,i){if($e(t)){var o=!0;ol(e)}else o=!1;if(Or(e,i),e.stateNode===null)zs(n,e),sy(e,t,r),Wu(e,t,r,i),r=!0;else if(n===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,u=t.contextType;typeof u=="object"&&u!==null?u=ot(u):(u=$e(t)?Wn:Se.current,u=Jr(e,u));var c=t.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==u)&&wp(e,s,r,u),Ut=!1;var d=e.memoizedState;s.state=d,cl(e,r,s,i),a=e.memoizedState,l!==r||d!==a||Le.current||Ut?(typeof c=="function"&&(_u(e,t,c,r),a=e.memoizedState),(l=Ut||yp(e,t,l,r,d,a,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,iy(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:ut(e.type,l),s.props=u,f=e.pendingProps,d=s.context,a=t.contextType,typeof a=="object"&&a!==null?a=ot(a):(a=$e(t)?Wn:Se.current,a=Jr(e,a));var p=t.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||d!==a)&&wp(e,s,r,a),Ut=!1,d=e.memoizedState,s.state=d,cl(e,r,s,i);var h=e.memoizedState;l!==f||d!==h||Le.current||Ut?(typeof p=="function"&&(_u(e,t,p,r),h=e.memoizedState),(u=Ut||yp(e,t,u,r,d,h,a)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,h,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,h,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),s.props=r,s.state=h,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||l===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return Ku(n,e,t,r,o,i)}function Ku(n,e,t,r,i,o){Iy(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&dp(e,t,!1),bt(n,e,o);r=e.stateNode,wx.current=e;var l=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=_r(e,n.child,null,o),e.child=_r(e,null,l,o)):Ee(n,e,l,o),e.memoizedState=r.state,i&&dp(e,t,!0),e.child}function Py(n){var e=n.stateNode;e.pendingContext?fp(n,e.pendingContext,e.pendingContext!==e.context):e.context&&fp(n,e.context,!1),uf(n,e.containerInfo)}function Op(n,e,t,r,i){return Vr(),nf(i),e.flags|=256,Ee(n,e,t,r),e.child}var ju={dehydrated:null,treeContext:null,retryLane:0};function Qu(n){return{baseLanes:n,cachePool:null,transitions:null}}function Fy(n,e,t){var r=e.pendingProps,i=Y.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=n!==null&&n.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),U(Y,i&1),n===null)return Ju(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ll(s,r,0,null),n=Vn(n,r,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Qu(t),e.memoizedState=ju,n):yf(e,s));if(i=n.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return kx(n,e,s,r,l,i,t);if(o){o=r.fallback,s=e.mode,i=n.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=an(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=an(l,o):(o=Vn(o,s,t,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=n.child.memoizedState,s=s===null?Qu(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=n.childLanes&~t,e.memoizedState=ju,r}return o=n.child,n=o.sibling,r=an(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function yf(n,e){return e=Ll({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function es(n,e,t,r){return r!==null&&nf(r),_r(e,n.child,null,t),n=yf(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function kx(n,e,t,r,i,o,s){if(t)return e.flags&256?(e.flags&=-257,r=Pa(Error(E(422))),es(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Ll({mode:"visible",children:r.children},i,0,null),o=Vn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&_r(e,n.child,null,s),e.child.memoizedState=Qu(s),e.memoizedState=ju,o);if(!(e.mode&1))return es(n,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(E(419)),r=Pa(o,r,void 0),es(n,e,s,r)}if(l=(s&n.childLanes)!==0,Fe||l){if(r=fe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,$t(n,i),pt(r,n,i,-1))}return Cf(),r=Pa(Error(E(421))),es(n,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=zx.bind(null,n),i._reactRetry=e,null):(n=o.treeContext,Ke=rn(i.nextSibling),Qe=e,q=!0,ft=null,n!==null&&(et[tt++]=zt,et[tt++]=It,et[tt++]=Un,zt=n.id,It=n.overflow,Un=e),e=yf(e,r.children),e.flags|=4096,e)}function Tp(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Vu(n.return,e,t)}function Fa(n,e,t,r,i){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i)}function Ly(n,e,t){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ee(n,e,r.children,t),r=Y.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Tp(n,t,e);else if(n.tag===19)Tp(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(U(Y,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&fl(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Fa(e,!1,i,t,o);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&fl(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Fa(e,!0,t,null,o);break;case"together":Fa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zs(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function bt(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Kn|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(E(153));if(e.child!==null){for(n=e.child,t=an(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=an(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function vx(n,e,t){switch(e.tag){case 3:Py(e),Vr();break;case 5:uy(e);break;case 1:$e(e.type)&&ol(e);break;case 4:uf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;U(al,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(U(Y,Y.current&1),e.flags|=128,null):t&e.child.childLanes?Fy(n,e,t):(U(Y,Y.current&1),n=bt(n,e,t),n!==null?n.sibling:null);U(Y,Y.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return Ly(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),U(Y,Y.current),r)break;return null;case 22:case 23:return e.lanes=0,zy(n,e,t)}return bt(n,e,t)}var $y,qu,by,By;$y=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};qu=function(){};by=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Fn(Ct.current);var o=null;switch(t){case"input":i=yu(n,i),r=yu(n,r),o=[];break;case"select":i=G({},i,{value:void 0}),r=G({},r,{value:void 0}),o=[];break;case"textarea":i=vu(n,i),r=vu(n,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=rl)}xu(t,r);var s;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gi.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(t||(t={}),t[s]=a[s])}else t||(o||(o=[]),o.push(u,t)),t=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Gi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&K("scroll",n),o||l===a||(o=[])):(o=o||[]).push(u,a))}t&&(o=o||[]).push("style",t);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};By=function(n,e,t,r){t!==r&&(e.flags|=4)};function ni(n,e){if(!q)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function ke(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Sx(n,e,t){var r=e.pendingProps;switch(tf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(e),null;case 1:return $e(e.type)&&il(),ke(e),null;case 3:return r=e.stateNode,Wr(),Q(Le),Q(Se),ff(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Go(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ft!==null&&(rc(ft),ft=null))),qu(n,e),ke(e),null;case 5:cf(e);var i=Fn(co.current);if(t=e.type,n!==null&&e.stateNode!=null)by(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return ke(e),null}if(n=Fn(Ct.current),Go(e)){r=e.stateNode,t=e.type;var o=e.memoizedProps;switch(r[wt]=e,r[ao]=o,n=(e.mode&1)!==0,t){case"dialog":K("cancel",r),K("close",r);break;case"iframe":case"object":case"embed":K("load",r);break;case"video":case"audio":for(i=0;i<Ai.length;i++)K(Ai[i],r);break;case"source":K("error",r);break;case"img":case"image":case"link":K("error",r),K("load",r);break;case"details":K("toggle",r);break;case"input":bd(r,o),K("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},K("invalid",r);break;case"textarea":Jd(r,o),K("invalid",r)}xu(t,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Xo(r.textContent,l,n),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Xo(r.textContent,l,n),i=["children",""+l]):Gi.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&K("scroll",r)}switch(t){case"input":Wo(r),Bd(r,o,!0);break;case"textarea":Wo(r),Vd(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=rl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=dg(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[wt]=e,n[ao]=r,$y(n,e,!1,!1),e.stateNode=n;e:{switch(s=Cu(t,r),t){case"dialog":K("cancel",n),K("close",n),i=r;break;case"iframe":case"object":case"embed":K("load",n),i=r;break;case"video":case"audio":for(i=0;i<Ai.length;i++)K(Ai[i],n);i=r;break;case"source":K("error",n),i=r;break;case"img":case"image":case"link":K("error",n),K("load",n),i=r;break;case"details":K("toggle",n),i=r;break;case"input":bd(n,r),i=yu(n,r),K("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=G({},r,{value:void 0}),K("invalid",n);break;case"textarea":Jd(n,r),i=vu(n,r),K("invalid",n);break;default:i=r}xu(t,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?mg(n,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&pg(n,a)):o==="children"?typeof a=="string"?(t!=="textarea"||a!=="")&&Zi(n,a):typeof a=="number"&&Zi(n,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Gi.hasOwnProperty(o)?a!=null&&o==="onScroll"&&K("scroll",n):a!=null&&Jc(n,o,a,s))}switch(t){case"input":Wo(n),Bd(n,r,!1);break;case"textarea":Wo(n),Vd(n);break;case"option":r.value!=null&&n.setAttribute("value",""+cn(r.value));break;case"select":n.multiple=!!r.multiple,o=r.value,o!=null?Er(n,!!r.multiple,o,!1):r.defaultValue!=null&&Er(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=rl)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ke(e),null;case 6:if(n&&e.stateNode!=null)By(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(t=Fn(co.current),Fn(Ct.current),Go(e)){if(r=e.stateNode,t=e.memoizedProps,r[wt]=e,(o=r.nodeValue!==t)&&(n=Qe,n!==null))switch(n.tag){case 3:Xo(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Xo(r.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[wt]=e,e.stateNode=r}return ke(e),null;case 13:if(Q(Y),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(q&&Ke!==null&&e.mode&1&&!(e.flags&128))ny(),Vr(),e.flags|=98560,o=!1;else if(o=Go(e),r!==null&&r.dehydrated!==null){if(n===null){if(!o)throw Error(E(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(E(317));o[wt]=e}else Vr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ke(e),o=!1}else ft!==null&&(rc(ft),ft=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Y.current&1?le===0&&(le=3):Cf())),e.updateQueue!==null&&(e.flags|=4),ke(e),null);case 4:return Wr(),qu(n,e),n===null&&so(e.stateNode.containerInfo),ke(e),null;case 10:return sf(e.type._context),ke(e),null;case 17:return $e(e.type)&&il(),ke(e),null;case 19:if(Q(Y),o=e.memoizedState,o===null)return ke(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ni(o,!1);else{if(le!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=fl(n),s!==null){for(e.flags|=128,ni(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)o=t,n=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,n=s.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return U(Y,Y.current&1|2),e.child}n=n.sibling}o.tail!==null&&ne()>Hr&&(e.flags|=128,r=!0,ni(o,!1),e.lanes=4194304)}else{if(!r)if(n=fl(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ni(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!q)return ke(e),null}else 2*ne()-o.renderingStartTime>Hr&&t!==1073741824&&(e.flags|=128,r=!0,ni(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(t=o.last,t!==null?t.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ne(),e.sibling=null,t=Y.current,U(Y,r?t&1|2:t&1),e):(ke(e),null);case 22:case 23:return xf(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ue&1073741824&&(ke(e),e.subtreeFlags&6&&(e.flags|=8192)):ke(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function xx(n,e){switch(tf(e),e.tag){case 1:return $e(e.type)&&il(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Wr(),Q(Le),Q(Se),ff(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return cf(e),null;case 13:if(Q(Y),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Vr()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Q(Y),null;case 4:return Wr(),null;case 10:return sf(e.type._context),null;case 22:case 23:return xf(),null;case 24:return null;default:return null}}var ts=!1,ve=!1,Cx=typeof WeakSet=="function"?WeakSet:Set,A=null;function kr(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Z(n,e,r)}else t.current=null}function Yu(n,e,t){try{t()}catch(r){Z(n,e,r)}}var Ap=!1;function Ex(n,e){if(Iu=el,n=Wg(),Zc(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var s=0,l=-1,a=-1,u=0,c=0,f=n,d=null;t:for(;;){for(var p;f!==t||i!==0&&f.nodeType!==3||(l=s+i),f!==o||r!==0&&f.nodeType!==3||(a=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===n)break t;if(d===t&&++u===i&&(l=s),d===o&&++c===r&&(a=s),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}t=l===-1||a===-1?null:{start:l,end:a}}else t=null}t=t||{start:0,end:0}}else t=null;for(Pu={focusedElem:n,selectionRange:t},el=!1,A=e;A!==null;)if(e=A,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,A=n;else for(;A!==null;){e=A;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var g=h.memoizedProps,v=h.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:ut(e.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(x){Z(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,A=n;break}A=e.return}return h=Ap,Ap=!1,h}function Vi(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var o=i.destroy;i.destroy=void 0,o!==void 0&&Yu(e,t,o)}i=i.next}while(i!==r)}}function Pl(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Xu(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Jy(n){var e=n.alternate;e!==null&&(n.alternate=null,Jy(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[wt],delete e[ao],delete e[$u],delete e[sx],delete e[lx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Vy(n){return n.tag===5||n.tag===3||n.tag===4}function Dp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Vy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Gu(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=rl));else if(r!==4&&(n=n.child,n!==null))for(Gu(n,e,t),n=n.sibling;n!==null;)Gu(n,e,t),n=n.sibling}function Zu(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Zu(n,e,t),n=n.sibling;n!==null;)Zu(n,e,t),n=n.sibling}var he=null,ct=!1;function Vt(n,e,t){for(t=t.child;t!==null;)_y(n,e,t),t=t.sibling}function _y(n,e,t){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Ml,t)}catch{}switch(t.tag){case 5:ve||kr(t,e);case 6:var r=he,i=ct;he=null,Vt(n,e,t),he=r,ct=i,he!==null&&(ct?(n=he,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):he.removeChild(t.stateNode));break;case 18:he!==null&&(ct?(n=he,t=t.stateNode,n.nodeType===8?Oa(n.parentNode,t):n.nodeType===1&&Oa(n,t),ro(n)):Oa(he,t.stateNode));break;case 4:r=he,i=ct,he=t.stateNode.containerInfo,ct=!0,Vt(n,e,t),he=r,ct=i;break;case 0:case 11:case 14:case 15:if(!ve&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Yu(t,e,s),i=i.next}while(i!==r)}Vt(n,e,t);break;case 1:if(!ve&&(kr(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(l){Z(t,e,l)}Vt(n,e,t);break;case 21:Vt(n,e,t);break;case 22:t.mode&1?(ve=(r=ve)||t.memoizedState!==null,Vt(n,e,t),ve=r):Vt(n,e,t);break;default:Vt(n,e,t)}}function zp(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Cx),e.forEach(function(r){var i=Ix.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function at(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var o=n,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:he=l.stateNode,ct=!1;break e;case 3:he=l.stateNode.containerInfo,ct=!0;break e;case 4:he=l.stateNode.containerInfo,ct=!0;break e}l=l.return}if(he===null)throw Error(E(160));_y(o,s,i),he=null,ct=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){Z(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wy(e,n),e=e.sibling}function Wy(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(at(e,n),gt(n),r&4){try{Vi(3,n,n.return),Pl(3,n)}catch(g){Z(n,n.return,g)}try{Vi(5,n,n.return)}catch(g){Z(n,n.return,g)}}break;case 1:at(e,n),gt(n),r&512&&t!==null&&kr(t,t.return);break;case 5:if(at(e,n),gt(n),r&512&&t!==null&&kr(t,t.return),n.flags&32){var i=n.stateNode;try{Zi(i,"")}catch(g){Z(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var o=n.memoizedProps,s=t!==null?t.memoizedProps:o,l=n.type,a=n.updateQueue;if(n.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&cg(i,o),Cu(l,s);var u=Cu(l,o);for(s=0;s<a.length;s+=2){var c=a[s],f=a[s+1];c==="style"?mg(i,f):c==="dangerouslySetInnerHTML"?pg(i,f):c==="children"?Zi(i,f):Jc(i,c,f,u)}switch(l){case"input":wu(i,o);break;case"textarea":fg(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Er(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?Er(i,!!o.multiple,o.defaultValue,!0):Er(i,!!o.multiple,o.multiple?[]:"",!1))}i[ao]=o}catch(g){Z(n,n.return,g)}}break;case 6:if(at(e,n),gt(n),r&4){if(n.stateNode===null)throw Error(E(162));i=n.stateNode,o=n.memoizedProps;try{i.nodeValue=o}catch(g){Z(n,n.return,g)}}break;case 3:if(at(e,n),gt(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{ro(e.containerInfo)}catch(g){Z(n,n.return,g)}break;case 4:at(e,n),gt(n);break;case 13:at(e,n),gt(n),i=n.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(vf=ne())),r&4&&zp(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(ve=(u=ve)||c,at(e,n),ve=u):at(e,n),gt(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(A=n,c=n.child;c!==null;){for(f=A=c;A!==null;){switch(d=A,p=d.child,d.tag){case 0:case 11:case 14:case 15:Vi(4,d,d.return);break;case 1:kr(d,d.return);var h=d.stateNode;if(typeof h.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(g){Z(r,t,g)}}break;case 5:kr(d,d.return);break;case 22:if(d.memoizedState!==null){Pp(f);continue}}p!==null?(p.return=d,A=p):Pp(f)}c=c.sibling}e:for(c=null,f=n;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,a=f.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=hg("display",s))}catch(g){Z(n,n.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Z(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:at(e,n),gt(n),r&4&&zp(n);break;case 21:break;default:at(e,n),gt(n)}}function gt(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Vy(t)){var r=t;break e}t=t.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zi(i,""),r.flags&=-33);var o=Dp(n);Zu(n,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Dp(n);Gu(n,l,s);break;default:throw Error(E(161))}}catch(a){Z(n,n.return,a)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Nx(n,e,t){A=n,Uy(n)}function Uy(n,e,t){for(var r=(n.mode&1)!==0;A!==null;){var i=A,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||ts;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||ve;l=ts;var u=ve;if(ts=s,(ve=a)&&!u)for(A=i;A!==null;)s=A,a=s.child,s.tag===22&&s.memoizedState!==null?Fp(i):a!==null?(a.return=s,A=a):Fp(i);for(;o!==null;)A=o,Uy(o),o=o.sibling;A=i,ts=l,ve=u}Ip(n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,A=o):Ip(n)}}function Ip(n){for(;A!==null;){var e=A;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ve||Pl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ve)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:ut(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gp(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}gp(e,s,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&t.focus();break;case"img":a.src&&(t.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&ro(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}ve||e.flags&512&&Xu(e)}catch(d){Z(e,e.return,d)}}if(e===n){A=null;break}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}}function Pp(n){for(;A!==null;){var e=A;if(e===n){A=null;break}var t=e.sibling;if(t!==null){t.return=e.return,A=t;break}A=e.return}}function Fp(n){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Pl(4,e)}catch(a){Z(e,t,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Z(e,i,a)}}var o=e.return;try{Xu(e)}catch(a){Z(e,o,a)}break;case 5:var s=e.return;try{Xu(e)}catch(a){Z(e,s,a)}}}catch(a){Z(e,e.return,a)}if(e===n){A=null;break}var l=e.sibling;if(l!==null){l.return=e.return,A=l;break}A=e.return}}var Mx=Math.ceil,hl=Bt.ReactCurrentDispatcher,wf=Bt.ReactCurrentOwner,it=Bt.ReactCurrentBatchConfig,b=0,fe=null,ie=null,ge=0,Ue=0,vr=yn(0),le=0,mo=null,Kn=0,Fl=0,kf=0,_i=null,Te=null,vf=0,Hr=1/0,Tt=null,ml=!1,ec=null,sn=null,ns=!1,Gt=null,gl=0,Wi=0,tc=null,Is=-1,Ps=0;function Me(){return b&6?ne():Is!==-1?Is:Is=ne()}function ln(n){return n.mode&1?b&2&&ge!==0?ge&-ge:ux.transition!==null?(Ps===0&&(Ps=Rg()),Ps):(n=_,n!==0||(n=window.event,n=n===void 0?16:Pg(n.type)),n):1}function pt(n,e,t,r){if(50<Wi)throw Wi=0,tc=null,Error(E(185));Mo(n,t,r),(!(b&2)||n!==fe)&&(n===fe&&(!(b&2)&&(Fl|=t),le===4&&jt(n,ge)),be(n,r),t===1&&b===0&&!(e.mode&1)&&(Hr=ne()+500,Dl&&wn()))}function be(n,e){var t=n.callbackNode;uS(n,e);var r=Zs(n,n===fe?ge:0);if(r===0)t!==null&&Ud(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Ud(t),e===1)n.tag===0?ax(Lp.bind(null,n)):Zg(Lp.bind(null,n)),ix(function(){!(b&6)&&wn()}),t=null;else{switch(Og(r)){case 1:t=Hc;break;case 4:t=Ng;break;case 16:t=Gs;break;case 536870912:t=Mg;break;default:t=Gs}t=Gy(t,Hy.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Hy(n,e){if(Is=-1,Ps=0,b&6)throw Error(E(327));var t=n.callbackNode;if(Tr()&&n.callbackNode!==t)return null;var r=Zs(n,n===fe?ge:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=yl(n,r);else{e=r;var i=b;b|=2;var o=jy();(fe!==n||ge!==e)&&(Tt=null,Hr=ne()+500,Jn(n,e));do try{Tx();break}catch(l){Ky(n,l)}while(!0);of(),hl.current=o,b=i,ie!==null?e=0:(fe=null,ge=0,e=le)}if(e!==0){if(e===2&&(i=Ou(n),i!==0&&(r=i,e=nc(n,i))),e===1)throw t=mo,Jn(n,0),jt(n,r),be(n,ne()),t;if(e===6)jt(n,r);else{if(i=n.current.alternate,!(r&30)&&!Rx(i)&&(e=yl(n,r),e===2&&(o=Ou(n),o!==0&&(r=o,e=nc(n,o))),e===1))throw t=mo,Jn(n,0),jt(n,r),be(n,ne()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:Tn(n,Te,Tt);break;case 3:if(jt(n,r),(r&130023424)===r&&(e=vf+500-ne(),10<e)){if(Zs(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Me(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Lu(Tn.bind(null,n,Te,Tt),e);break}Tn(n,Te,Tt);break;case 4:if(jt(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var s=31-dt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mx(r/1960))-r,10<r){n.timeoutHandle=Lu(Tn.bind(null,n,Te,Tt),r);break}Tn(n,Te,Tt);break;case 5:Tn(n,Te,Tt);break;default:throw Error(E(329))}}}return be(n,ne()),n.callbackNode===t?Hy.bind(null,n):null}function nc(n,e){var t=_i;return n.current.memoizedState.isDehydrated&&(Jn(n,e).flags|=256),n=yl(n,e),n!==2&&(e=Te,Te=t,e!==null&&rc(e)),n}function rc(n){Te===null?Te=n:Te.push.apply(Te,n)}function Rx(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],o=i.getSnapshot;i=i.value;try{if(!ht(o(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jt(n,e){for(e&=~kf,e&=~Fl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-dt(e),r=1<<t;n[t]=-1,e&=~r}}function Lp(n){if(b&6)throw Error(E(327));Tr();var e=Zs(n,0);if(!(e&1))return be(n,ne()),null;var t=yl(n,e);if(n.tag!==0&&t===2){var r=Ou(n);r!==0&&(e=r,t=nc(n,r))}if(t===1)throw t=mo,Jn(n,0),jt(n,e),be(n,ne()),t;if(t===6)throw Error(E(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Tn(n,Te,Tt),be(n,ne()),null}function Sf(n,e){var t=b;b|=1;try{return n(e)}finally{b=t,b===0&&(Hr=ne()+500,Dl&&wn())}}function jn(n){Gt!==null&&Gt.tag===0&&!(b&6)&&Tr();var e=b;b|=1;var t=it.transition,r=_;try{if(it.transition=null,_=1,n)return n()}finally{_=r,it.transition=t,b=e,!(b&6)&&wn()}}function xf(){Ue=vr.current,Q(vr)}function Jn(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,rx(t)),ie!==null)for(t=ie.return;t!==null;){var r=t;switch(tf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&il();break;case 3:Wr(),Q(Le),Q(Se),ff();break;case 5:cf(r);break;case 4:Wr();break;case 13:Q(Y);break;case 19:Q(Y);break;case 10:sf(r.type._context);break;case 22:case 23:xf()}t=t.return}if(fe=n,ie=n=an(n.current,null),ge=Ue=e,le=0,mo=null,kf=Fl=Kn=0,Te=_i=null,Pn!==null){for(e=0;e<Pn.length;e++)if(t=Pn[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,o=t.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}t.pending=r}Pn=null}return n}function Ky(n,e){do{var t=ie;try{if(of(),As.current=pl,dl){for(var r=X.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}dl=!1}if(Hn=0,ue=se=X=null,Ji=!1,fo=0,wf.current=null,t===null||t.return===null){le=1,mo=e,ie=null;break}e:{var o=n,s=t.return,l=t,a=e;if(e=ge,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Cp(s);if(p!==null){p.flags&=-257,Ep(p,s,l,o,e),p.mode&1&&xp(o,u,e),e=p,a=u;var h=e.updateQueue;if(h===null){var g=new Set;g.add(a),e.updateQueue=g}else h.add(a);break e}else{if(!(e&1)){xp(o,u,e),Cf();break e}a=Error(E(426))}}else if(q&&l.mode&1){var v=Cp(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Ep(v,s,l,o,e),nf(Ur(a,l));break e}}o=a=Ur(a,l),le!==4&&(le=2),_i===null?_i=[o]:_i.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var m=Ty(o,a,e);mp(o,m);break e;case 1:l=a;var y=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(sn===null||!sn.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var x=Ay(o,l,e);mp(o,x);break e}}o=o.return}while(o!==null)}qy(t)}catch(N){e=N,ie===t&&t!==null&&(ie=t=t.return);continue}break}while(!0)}function jy(){var n=hl.current;return hl.current=pl,n===null?pl:n}function Cf(){(le===0||le===3||le===2)&&(le=4),fe===null||!(Kn&268435455)&&!(Fl&268435455)||jt(fe,ge)}function yl(n,e){var t=b;b|=2;var r=jy();(fe!==n||ge!==e)&&(Tt=null,Jn(n,e));do try{Ox();break}catch(i){Ky(n,i)}while(!0);if(of(),b=t,hl.current=r,ie!==null)throw Error(E(261));return fe=null,ge=0,le}function Ox(){for(;ie!==null;)Qy(ie)}function Tx(){for(;ie!==null&&!eS();)Qy(ie)}function Qy(n){var e=Xy(n.alternate,n,Ue);n.memoizedProps=n.pendingProps,e===null?qy(n):ie=e,wf.current=null}function qy(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=xx(t,e),t!==null){t.flags&=32767,ie=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{le=6,ie=null;return}}else if(t=Sx(t,e,Ue),t!==null){ie=t;return}if(e=e.sibling,e!==null){ie=e;return}ie=e=n}while(e!==null);le===0&&(le=5)}function Tn(n,e,t){var r=_,i=it.transition;try{it.transition=null,_=1,Ax(n,e,t,r)}finally{it.transition=i,_=r}return null}function Ax(n,e,t,r){do Tr();while(Gt!==null);if(b&6)throw Error(E(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(E(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(cS(n,o),n===fe&&(ie=fe=null,ge=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ns||(ns=!0,Gy(Gs,function(){return Tr(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=it.transition,it.transition=null;var s=_;_=1;var l=b;b|=4,wf.current=null,Ex(n,t),Wy(t,n),YS(Pu),el=!!Iu,Pu=Iu=null,n.current=t,Nx(t),tS(),b=l,_=s,it.transition=o}else n.current=t;if(ns&&(ns=!1,Gt=n,gl=i),o=n.pendingLanes,o===0&&(sn=null),iS(t.stateNode),be(n,ne()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(ml)throw ml=!1,n=ec,ec=null,n;return gl&1&&n.tag!==0&&Tr(),o=n.pendingLanes,o&1?n===tc?Wi++:(Wi=0,tc=n):Wi=0,wn(),null}function Tr(){if(Gt!==null){var n=Og(gl),e=it.transition,t=_;try{if(it.transition=null,_=16>n?16:n,Gt===null)var r=!1;else{if(n=Gt,Gt=null,gl=0,b&6)throw Error(E(331));var i=b;for(b|=4,A=n.current;A!==null;){var o=A,s=o.child;if(A.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(A=u;A!==null;){var c=A;switch(c.tag){case 0:case 11:case 15:Vi(8,c,o)}var f=c.child;if(f!==null)f.return=c,A=f;else for(;A!==null;){c=A;var d=c.sibling,p=c.return;if(Jy(c),c===u){A=null;break}if(d!==null){d.return=p,A=d;break}A=p}}}var h=o.alternate;if(h!==null){var g=h.child;if(g!==null){h.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}A=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,A=s;else e:for(;A!==null;){if(o=A,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Vi(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,A=m;break e}A=o.return}}var y=n.current;for(A=y;A!==null;){s=A;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,A=w;else e:for(s=y;A!==null;){if(l=A,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pl(9,l)}}catch(N){Z(l,l.return,N)}if(l===s){A=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,A=x;break e}A=l.return}}if(b=i,wn(),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Ml,n)}catch{}r=!0}return r}finally{_=t,it.transition=e}}return!1}function $p(n,e,t){e=Ur(t,e),e=Ty(n,e,1),n=on(n,e,1),e=Me(),n!==null&&(Mo(n,1,e),be(n,e))}function Z(n,e,t){if(n.tag===3)$p(n,n,t);else for(;e!==null;){if(e.tag===3){$p(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sn===null||!sn.has(r))){n=Ur(t,n),n=Ay(e,n,1),e=on(e,n,1),n=Me(),e!==null&&(Mo(e,1,n),be(e,n));break}}e=e.return}}function Dx(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Me(),n.pingedLanes|=n.suspendedLanes&t,fe===n&&(ge&t)===t&&(le===4||le===3&&(ge&130023424)===ge&&500>ne()-vf?Jn(n,0):kf|=t),be(n,e)}function Yy(n,e){e===0&&(n.mode&1?(e=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):e=1);var t=Me();n=$t(n,e),n!==null&&(Mo(n,e,t),be(n,t))}function zx(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Yy(n,t)}function Ix(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),Yy(n,t)}var Xy;Xy=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Le.current)Fe=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Fe=!1,vx(n,e,t);Fe=!!(n.flags&131072)}else Fe=!1,q&&e.flags&1048576&&ey(e,ll,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zs(n,e),n=e.pendingProps;var i=Jr(e,Se.current);Or(e,t),i=pf(null,e,r,n,i,t);var o=hf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$e(r)?(o=!0,ol(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,af(e),i.updater=zl,e.stateNode=i,i._reactInternals=e,Wu(e,r,n,t),e=Ku(null,e,r,!0,o,t)):(e.tag=0,q&&o&&ef(e),Ee(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(zs(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Fx(r),n=ut(r,n),i){case 0:e=Hu(null,e,r,n,t);break e;case 1:e=Rp(null,e,r,n,t);break e;case 11:e=Np(null,e,r,n,t);break e;case 14:e=Mp(null,e,r,ut(r.type,n),t);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ut(r,i),Hu(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ut(r,i),Rp(n,e,r,i,t);case 3:e:{if(Py(e),n===null)throw Error(E(387));r=e.pendingProps,o=e.memoizedState,i=o.element,iy(n,e),cl(e,r,null,t);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ur(Error(E(423)),e),e=Op(n,e,r,t,i);break e}else if(r!==i){i=Ur(Error(E(424)),e),e=Op(n,e,r,t,i);break e}else for(Ke=rn(e.stateNode.containerInfo.firstChild),Qe=e,q=!0,ft=null,t=ay(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Vr(),r===i){e=bt(n,e,t);break e}Ee(n,e,r,t)}e=e.child}return e;case 5:return uy(e),n===null&&Ju(e),r=e.type,i=e.pendingProps,o=n!==null?n.memoizedProps:null,s=i.children,Fu(r,i)?s=null:o!==null&&Fu(r,o)&&(e.flags|=32),Iy(n,e),Ee(n,e,s,t),e.child;case 6:return n===null&&Ju(e),null;case 13:return Fy(n,e,t);case 4:return uf(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=_r(e,null,r,t):Ee(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ut(r,i),Np(n,e,r,i,t);case 7:return Ee(n,e,e.pendingProps,t),e.child;case 8:return Ee(n,e,e.pendingProps.children,t),e.child;case 12:return Ee(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,U(al,r._currentValue),r._currentValue=s,o!==null)if(ht(o.value,s)){if(o.children===i.children&&!Le.current){e=bt(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Pt(-1,t&-t),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Vu(o.return,t,e),l.lanes|=t;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(E(341));s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Vu(s,t,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ee(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Or(e,t),i=ot(i),r=r(i),e.flags|=1,Ee(n,e,r,t),e.child;case 14:return r=e.type,i=ut(r,e.pendingProps),i=ut(r.type,i),Mp(n,e,r,i,t);case 15:return Dy(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ut(r,i),zs(n,e),e.tag=1,$e(r)?(n=!0,ol(e)):n=!1,Or(e,t),sy(e,r,i),Wu(e,r,i,t),Ku(null,e,r,!0,n,t);case 19:return Ly(n,e,t);case 22:return zy(n,e,t)}throw Error(E(156,e.tag))};function Gy(n,e){return Eg(n,e)}function Px(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rt(n,e,t,r){return new Px(n,e,t,r)}function Ef(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Fx(n){if(typeof n=="function")return Ef(n)?1:0;if(n!=null){if(n=n.$$typeof,n===_c)return 11;if(n===Wc)return 14}return 2}function an(n,e){var t=n.alternate;return t===null?(t=rt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Fs(n,e,t,r,i,o){var s=2;if(r=n,typeof n=="function")Ef(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case cr:return Vn(t.children,i,o,e);case Vc:s=8,i|=8;break;case pu:return n=rt(12,t,e,i|2),n.elementType=pu,n.lanes=o,n;case hu:return n=rt(13,t,e,i),n.elementType=hu,n.lanes=o,n;case mu:return n=rt(19,t,e,i),n.elementType=mu,n.lanes=o,n;case lg:return Ll(t,i,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case og:s=10;break e;case sg:s=9;break e;case _c:s=11;break e;case Wc:s=14;break e;case Wt:s=16,r=null;break e}throw Error(E(130,n==null?n:typeof n,""))}return e=rt(s,t,e,i),e.elementType=n,e.type=r,e.lanes=o,e}function Vn(n,e,t,r){return n=rt(7,n,r,e),n.lanes=t,n}function Ll(n,e,t,r){return n=rt(22,n,r,e),n.elementType=lg,n.lanes=t,n.stateNode={isHidden:!1},n}function La(n,e,t){return n=rt(6,n,null,e),n.lanes=t,n}function $a(n,e,t){return e=rt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Lx(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ya(0),this.expirationTimes=ya(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ya(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nf(n,e,t,r,i,o,s,l,a){return n=new Lx(n,e,t,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=rt(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},af(o),n}function $x(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ur,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Zy(n){if(!n)return fn;n=n._reactInternals;e:{if(Zn(n)!==n||n.tag!==1)throw Error(E(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($e(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(n.tag===1){var t=n.type;if($e(t))return Gg(n,t,e)}return e}function e0(n,e,t,r,i,o,s,l,a){return n=Nf(t,r,!0,n,i,o,s,l,a),n.context=Zy(null),t=n.current,r=Me(),i=ln(t),o=Pt(r,i),o.callback=e??null,on(t,o,i),n.current.lanes=i,Mo(n,i,r),be(n,r),n}function $l(n,e,t,r){var i=e.current,o=Me(),s=ln(i);return t=Zy(t),e.context===null?e.context=t:e.pendingContext=t,e=Pt(o,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=on(i,e,s),n!==null&&(pt(n,i,s,o),Ts(n,i,s)),s}function wl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bp(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Mf(n,e){bp(n,e),(n=n.alternate)&&bp(n,e)}function bx(){return null}var t0=typeof reportError=="function"?reportError:function(n){console.error(n)};function Rf(n){this._internalRoot=n}bl.prototype.render=Rf.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(E(409));$l(n,e,null,null)};bl.prototype.unmount=Rf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;jn(function(){$l(null,n,null,null)}),e[Lt]=null}};function bl(n){this._internalRoot=n}bl.prototype.unstable_scheduleHydration=function(n){if(n){var e=Dg();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Kt.length&&e!==0&&e<Kt[t].priority;t++);Kt.splice(t,0,n),t===0&&Ig(n)}};function Of(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Bp(){}function Bx(n,e,t,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=wl(s);o.call(u)}}var s=e0(e,r,n,0,null,!1,!1,"",Bp);return n._reactRootContainer=s,n[Lt]=s.current,so(n.nodeType===8?n.parentNode:n),jn(),s}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=wl(a);l.call(u)}}var a=Nf(n,0,!1,null,null,!1,!1,"",Bp);return n._reactRootContainer=a,n[Lt]=a.current,so(n.nodeType===8?n.parentNode:n),jn(function(){$l(e,a,t,r)}),a}function Jl(n,e,t,r,i){var o=t._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=wl(s);l.call(a)}}$l(e,s,n,i)}else s=Bx(t,e,n,i,r);return wl(s)}Tg=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Ti(e.pendingLanes);t!==0&&(Kc(e,t|1),be(e,ne()),!(b&6)&&(Hr=ne()+500,wn()))}break;case 13:jn(function(){var r=$t(n,1);if(r!==null){var i=Me();pt(r,n,1,i)}}),Mf(n,1)}};jc=function(n){if(n.tag===13){var e=$t(n,134217728);if(e!==null){var t=Me();pt(e,n,134217728,t)}Mf(n,134217728)}};Ag=function(n){if(n.tag===13){var e=ln(n),t=$t(n,e);if(t!==null){var r=Me();pt(t,n,e,r)}Mf(n,e)}};Dg=function(){return _};zg=function(n,e){var t=_;try{return _=n,e()}finally{_=t}};Nu=function(n,e,t){switch(e){case"input":if(wu(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Al(r);if(!i)throw Error(E(90));ug(r),wu(r,i)}}}break;case"textarea":fg(n,t);break;case"select":e=t.value,e!=null&&Er(n,!!t.multiple,e,!1)}};wg=Sf;kg=jn;var Jx={usingClientEntryPoint:!1,Events:[Oo,hr,Al,gg,yg,Sf]},ri={findFiberByHostInstance:In,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Vx={bundleType:ri.bundleType,version:ri.version,rendererPackageName:ri.rendererPackageName,rendererConfig:ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=xg(n),n===null?null:n.stateNode},findFiberByHostInstance:ri.findFiberByHostInstance||bx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rs.isDisabled&&rs.supportsFiber)try{Ml=rs.inject(Vx),xt=rs}catch{}}Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jx;Xe.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Of(e))throw Error(E(200));return $x(n,e,null,t)};Xe.createRoot=function(n,e){if(!Of(n))throw Error(E(299));var t=!1,r="",i=t0;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nf(n,1,!1,null,null,t,!1,r,i),n[Lt]=e.current,so(n.nodeType===8?n.parentNode:n),new Rf(e)};Xe.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(E(188)):(n=Object.keys(n).join(","),Error(E(268,n)));return n=xg(e),n=n===null?null:n.stateNode,n};Xe.flushSync=function(n){return jn(n)};Xe.hydrate=function(n,e,t){if(!Bl(e))throw Error(E(200));return Jl(null,n,e,!0,t)};Xe.hydrateRoot=function(n,e,t){if(!Of(n))throw Error(E(405));var r=t!=null&&t.hydratedSources||null,i=!1,o="",s=t0;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=e0(e,null,n,1,t??null,i,!1,o,s),n[Lt]=e.current,so(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new bl(e)};Xe.render=function(n,e,t){if(!Bl(e))throw Error(E(200));return Jl(null,n,e,!1,t)};Xe.unmountComponentAtNode=function(n){if(!Bl(n))throw Error(E(40));return n._reactRootContainer?(jn(function(){Jl(null,null,n,!1,function(){n._reactRootContainer=null,n[Lt]=null})}),!0):!1};Xe.unstable_batchedUpdates=Sf;Xe.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Bl(t))throw Error(E(200));if(n==null||n._reactInternals===void 0)throw Error(E(38));return Jl(n,e,t,!1,r)};Xe.version="18.2.0-next-9e3b772b8-20220608";function n0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n0)}catch(n){console.error(n)}}n0(),eg.exports=Xe;var r0=eg.exports;const _x=function(n){for(let e=0;;e++)if(n=n.previousSibling,!n)return e},Wx=C.createContext(null);function Ux(n,e){const t=C.useContext(Wx);C.useLayoutEffect(()=>t(n),e)}function i0(n,e){const{view:t}=C.useContext(No);Ux(()=>{if(t)return n(t)},e&&[t,...e])}C.forwardRef(function({widget:e,getPos:t,...r},i){const[o,s]=C.useState(!0),l=C.useRef(null);return C.useImperativeHandle(i,()=>l.current,[]),i0(a=>{if(!a||!l.current)return;a.domObserver.disconnectSelection();const u=a.domSelection(),c=document.createRange(),f=l.current;f.nodeName=="IMG"&&f.parentNode?c.setEnd(f.parentNode,_x(f)+1):c.setEnd(f,0),c.collapse(!1),u.removeAllRanges(),u.addRange(c),s(!1),a.domObserver.connectSelection()},[]),o?D.jsx("img",{ref:l,className:"ProseMirror-separator","mark-placeholder":"true",alt:"",...r}):null});function Hx(n,e){if(n==e)return!0;for(const t in n)if(n[t]!==e[t])return!1;for(const t in e)if(!(t in n))return!1;return!0}const Kx={side:0};class go{constructor(e,t){this.Component=e,this.spec=t??Kx,this.side=this.spec.side??0}map(e,t,r,i){const{pos:o,deleted:s}=e.mapResult(t.from+i,this.side<0?-1:1);return s?null:new Ie(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof go&&(this.spec.key&&this.spec.key==e.spec.key||this.Component==e.Component&&Hx(this.spec,e.spec))}destroy(){}}function jx(n,e,t){return new Ie(n,n,new go(e,t))}function ba(){return Math.floor(Math.random()*0xffffffffffff).toString(16)}const ic=new Cl("@nytimes/react-prosemirror/reactKeys");function Qx(){let n=!1;return new pn({key:ic,state:{init(e,t){const r={posToKey:new Map,keyToPos:new Map};return t.doc.descendants((i,o)=>{const s=ba();return r.posToKey.set(o,s),r.keyToPos.set(s,o),!0}),r},apply(e,t,r,i){if(!e.docChanged||n)return t;const o=e.getMeta(ic),s=(o==null?void 0:o.type)==="bustKey"&&o.payload.key,l={posToKey:new Map,keyToPos:new Map},a=Array.from(t.posToKey.entries()).sort(([u],[c])=>u-c);for(const[u,c]of a){const{pos:f,deleted:d}=e.mapping.mapResult(u);if(d)continue;let p=c;s===c&&(p=ba()),l.posToKey.set(f,p),l.keyToPos.set(p,f)}return i.doc.descendants((u,c)=>{if(l.posToKey.has(c))return!0;const f=ba();return l.posToKey.set(c,f),l.keyToPos.set(f,c),!0}),l}},props:{handleDOMEvents:{compositionstart:()=>{n=!0},compositionend:()=>{n=!1}}}})}const Rt=typeof navigator<"u"?navigator:null,Jp=typeof document<"u"?document:null,kn=Rt&&Rt.userAgent||"",oc=/Edge\/(\d+)/.exec(kn),o0=/MSIE \d/.exec(kn),sc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(kn),Vl=!!(o0||sc||oc),qx=o0?document.documentMode:sc?+sc[1]:oc?+oc[1]:0,s0=!Vl&&/gecko\/(\d+)/i.test(kn),Yx=s0&&+(/Firefox\/(\d+)/.exec(kn)||[0,0])[1],lc=!Vl&&/Chrome\/(\d+)/.exec(kn),Xx=!!lc,Gx=lc?+lc[1]:0,l0=!Vl&&!!Rt&&/Apple Computer/.test(Rt.vendor),a0=l0&&(/Mobile\/\w+/.test(kn)||!!Rt&&Rt.maxTouchPoints>2),Zx=a0||(Rt?/Mac/.test(Rt.platform):!1),eC=Rt?/Win/.test(Rt.platform):!1,tC=/Android \d/.test(kn),u0=!!Jp&&"webkitFontSmoothing"in Jp.documentElement.style,nC=u0?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,Sr={ie:Vl,ie_version:qx,gecko:s0,gecko_version:Yx,chrome:Xx,chrome_version:Gx,safari:l0,ios:a0,mac:Zx,windows:eC,android:tC,webkit:u0,webkit_version:nC},Vp=function(n,e,t,r){return t&&(_p(n,e,t,r,-1)||_p(n,e,t,r,1))};function rC(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const iC=/^(img|br|input|textarea|hr)$/i;function _p(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Wp(n))){const o=n.parentNode;if(!o||o.nodeType!=1||rC(n)||iC.test(n.nodeName)||n.contentEditable=="false")return!1;e=An(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Wp(n):0}else return!1}}const An=function(n){let e=n;for(let t=0;;t++)if(e=e.previousSibling,!e)return t};function Wp(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function er(n,e){return n instanceof wo?1:e instanceof wo?-1:n.getPos()-e.getPos()}const Kr=0,Up=1,is=2,yo=3;class Ao{constructor(e,t,r,i,o){this.parent=e,this.children=t,this.getPos=r,this.dom=i,this.contentDOM=o,this.dirty=Kr,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){const i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>An(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){const o=this.getDesc(i);let s;if(o&&(!t||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){const t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){const o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t];const o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){const s=this.children[r],l=o+s.size;if(l>e||s instanceof wo){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Tf&&o.side>=0;r--);if(t<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&t&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?An(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?An(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){const a=this.children[l],u=s+a.size;if(i==-1&&e<=u){const c=s+a.border;if(e>=c&&t<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=s;for(let f=l;f>0;f--){const d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=An(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(u>t||l==this.children.length-1)){t=u;for(let c=l+1;c<this.children.length;c++){const f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=An(f.dom);break}t+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;const t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){const{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){var d;const o=Math.min(e,t),s=Math.max(e,t);for(let p=0,h=0;p<this.children.length;p++){const g=this.children[p],v=h+g.size;if(o>h&&s<v)return g.setSelection(e-h-g.border,t-h-g.border,r,i);h=v}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1);const u=r.getSelection();let c=!1;if((Sr.gecko||Sr.safari)&&e==t){const{node:p,offset:h}=l;if(p.nodeType==3){if(c=!!(h&&((d=p.nodeValue)==null?void 0:d[h-1])==`
`),c&&h==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(l=a={node:v.parentNode,offset:An(v)+1});break}const m=g.pmViewDesc;if(m&&m.node&&m.node.isBlock)break}}else{const g=p.childNodes[h-1];c=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Sr.gecko&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){const p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||c&&Sr.safari)&&Vp(l.node,l.offset,u.anchorNode,u.anchorOffset)&&Vp(a.node,a.offset,u.focusNode,u.focusOffset))return;let f=!1;if((u.extend||e==t)&&!c){u.collapse(l.node,l.offset);try{e!=t&&u.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>t){const h=l;l=a,a=h}const p=document.createRange();p.setEnd(a.node,a.offset),p.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){const o=this.children[i],s=r+o.size;if(r==s?e<=s&&t>=r:e<s&&t>r){const l=r+o.border,a=s-o.border;if(e>=l&&t<=a){this.dirty=e==r||t==s?is:Up,e==l&&t==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=yo:o.markDirty(e-l,t-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?is:yo}r=s}this.dirty=is}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){const r=e==1?is:Up;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Tf extends Ao{constructor(e,t,r,i){super(e,[],t,i,null),this.widget=r,this.widget=r}matchesWidget(e){return this.dirty==Kr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){const t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}get domAtom(){return!0}get side(){return this.widget.type.side}}class kl extends Ao{constructor(e,t,r,i,o){super(e,[],t,r,null),this.textDOM=i,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class oC extends Ao{constructor(e,t,r,i,o,s){super(e,t,r,o,s),this.mark=i}parseRule(){return this.dirty&yo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=yo&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Kr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Kr}}}class c0 extends Ao{constructor(e,t,r,i,o,s,l,a,u,c,f,d){super(e,t,r,l,a),this.node=i,this.outerDeco=o,this.innerDeco=s,this.nodeDOM=u,this.stopEvent=c,this.selectNode=f,this.deselectNode=d}updateOuterDeco(){}parseRule(){if(this.node.type.spec.reparseInView)return null;const e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){const r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>S.empty)}return e}matchesNode(e,t,r){return this.dirty==Kr&&e.eq(this.node)&&lC(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}update(e,t,r,i){return!0}get domAtom(){return this.node.isAtom}}class sC extends c0{constructor(e,t,r,i,o,s,l,a){super(e,t,r,i,o,s,l,null,a,()=>!1,()=>{},()=>{})}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return!0}inParent(){const e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=yo)}get domAtom(){return!1}}class wo extends Ao{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Kr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}function lC(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}const aC=new gh({nodes:{doc:{content:"text*"},text:{inline:!0}}});zn.create({schema:aC});const lt=C.createContext({parentRef:{current:void 0},siblingsRef:{current:[]}});function f0(n,e,t,r,i,o,s,l){const{view:a}=C.useContext(No),[u,c]=C.useState(!0),f=C.useRef(s),d=C.useRef(()=>!1),p=C.useCallback(x=>{d.current=x},[]),h=C.useRef(()=>{!r.current||!n||(r.current.nodeType==1&&r.current.classList.add("ProseMirror-selectednode"),(l!=null&&l.current||!n.type.spec.draggable)&&(((t==null?void 0:t.current)??r.current).draggable=!0))}),g=C.useRef(()=>{!r.current||!n||r.current.nodeType==1&&(r.current.classList.remove("ProseMirror-selectednode"),(l!=null&&l.current||!n.type.spec.draggable)&&((t==null?void 0:t.current)??r.current).removeAttribute("draggable"))}),v=C.useCallback((x,N)=>{h.current=x,g.current=N},[]),{siblingsRef:m,parentRef:y}=C.useContext(lt),w=C.useRef([]);return C.useLayoutEffect(()=>{const x=m.current;return()=>{if(f.current&&x.includes(f.current)){const N=x.indexOf(f.current);x.splice(N,1)}}},[m]),C.useLayoutEffect(()=>{var N;if(!n||!r.current)return;const x=w.current[0];f.current?(f.current.parent=y.current,f.current.children=w.current,f.current.node=n,f.current.getPos=e,f.current.outerDeco=o,f.current.innerDeco=i,f.current.dom=(t==null?void 0:t.current)??r.current,f.current.dom.pmViewDesc=f.current,f.current.contentDOM=(l==null?void 0:l.current)??f.current.contentDOM??(x==null?void 0:x.dom.parentElement)??null,f.current.nodeDOM=r.current):f.current=new c0(y.current,w.current,e,n,o,i,(t==null?void 0:t.current)??r.current,(x==null?void 0:x.dom.parentElement)??null,r.current,M=>!!d.current(M),()=>h.current(),()=>g.current()),c(f.current.contentDOM!==null),m.current.includes(f.current)||m.current.push(f.current),m.current.sort(er);for(const M of w.current)if(M.parent=f.current,M instanceof kl){const R=(N=f.current.contentDOM)==null?void 0:N.firstChild;if(!R)throw new Error("Started a composition but couldn't find the text node it belongs to.");let O=R;for(;O.firstChild;)O=O.firstChild;if(!O||!(O instanceof Text))throw new Error("Started a composition but couldn't find the text node it belongs to.");M.dom=R,M.textDOM=O,M.text=O.data,M.textDOM.pmViewDesc=M,a==null||a.input.compositionNodes.push(M)}return()=>{var M,R,O,W;((M=f.current)==null?void 0:M.children[0])instanceof kl&&!(a!=null&&a.composing)&&((W=(R=f.current)==null?void 0:R.children[0].dom.parentNode)==null||W.removeChild((O=f.current)==null?void 0:O.children[0].dom))}}),{hasContentDOM:u,childDescriptors:w,nodeViewDescRef:f,setStopEvent:p,setSelectNode:v}}function uC(n,e){return n.type.side-e.type.side}function cC(n,e,t,r){const i=e.locals(n);let o=0;if(i.length==0){for(let u=0;u<n.childCount;u++){const c=n.child(u);r(c,i,e.forChild(o,c),o,u),o+=c.nodeSize}return}let s=0;const l=[];let a=null;for(let u=0;;){if(s<i.length&&i[s].to==o){const h=i[s++];let g;for(;s<i.length&&i[s].to==o;)(g||(g=[h])).push(i[s++]);if(g){g.sort(uC);for(let v=0;v<g.length;v++)t(g[v],!(g[v].type instanceof go),o,u+v,!!a)}else t(h,!(h.type instanceof go),o,u,!!a)}let c,f;if(a)f=-1,c=a,a=null;else if(u<n.childCount)f=u,c=n.child(u++);else break;for(let h=0;h<l.length;h++)l[h].to<=o&&l.splice(h--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let d=o+c.nodeSize;if(c.isText){let h=d;s<i.length&&i[s].from<h&&(h=i[s].from);for(let g=0;g<l.length;g++)l[g].to<h&&(h=l[g].to);h<d&&(a=c.cut(h-o),c=c.cut(0,h-o),d=h,f=-1)}const p=c.isInline&&!c.isLeaf?l.filter(h=>!h.inline):l.slice();r(c,p,e.forChild(o,c),o,f),o=d}}function fC(){const{view:n}=C.useContext(No);return n&&ic.getState(n.state)}var d0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var s=typeof o;if(s==="string"||s==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var l=t.apply(null,o);l&&r.push(l)}}else if(s==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var a in o)e.call(o,a)&&o[a]&&r.push(a)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(d0);var dC=d0.exports;const pC=y0(dC);function hC(n){return n.replaceAll(/-[a-z]/g,e=>{var t;return((t=e[1])==null?void 0:t.toUpperCase())??""})}function mC(n){const e=new CSSStyleSheet;e.insertRule(`* { ${n} }`);const r=e.cssRules[0].style,i={};for(let o=0;o<r.length;o++){const s=r.item(o),l=r.getPropertyValue(s),a=s.startsWith("--")?s:hC(s);i[a]=l}return i}function p0(n,e){return{...n,...e,className:pC(n.className,e.className),style:{...n.style,...e.style}}}function h0(n){const e={};for(const[t,r]of Object.entries(n))switch(t.toLowerCase()){case"class":{e.className=r;break}case"style":{e.style=mC(r);break}case"autocapitalize":{e.autoCapitalize=r;break}case"contenteditable":{if(r===""||r==="true"){e.contentEditable=!0;break}if(r==="false"){e.contentEditable=!1;break}if(r==="plaintext-only"){e.contentEditable="plaintext-only";break}e.contentEditable=null;break}case"draggable":{e.draggable=r!=null;break}case"enterkeyhint":{e.enterKeyHint=r;break}case"for":{e.htmlFor=r;break}case"hidden":{e.hidden=r;break}case"inputmode":{e.inputMode=r;break}case"itemprop":{e.itemProp=r;break}case"spellcheck":{if(r===""||r==="true"){e.spellCheck=!0;break}if(r==="false"){e.spellCheck=!1;break}e.spellCheck=null;break}case"tabindex":{const i=parseInt(r,10);Number.isNaN(i)||(e.tabIndex=i);break}case"autocomplete":{e.autoComplete=r;break}case"autofocus":{e.autoFocus=r!=null;break}case"formaction":{e.formAction=r;break}case"formenctype":{e.formEnctype=r;break}case"formmethod":{e.formMethod=r;break}case"formnovalidate":{e.formNoValidate=r;break}case"formtarget":{e.formTarget=r;break}case"maxlength":{const i=parseInt(r,10);Number.isNaN(i)||(e.maxLength=r);break}case"minlength":{const i=parseInt(r,10);Number.isNaN(i)||(e.minLength=r);break}case"max":{const i=parseInt(r,10);Number.isNaN(i)||(e.max=r);break}case"min":{const i=parseInt(r,10);Number.isNaN(i)||(e.min=r);break}case"multiple":{e.multiple=r!=null;break}case"readonly":{e.readOnly=r!=null;break}case"required":{e.required=r!=null;break}case"size":{const i=parseInt(r,10);Number.isNaN(i)||(e.size=r);break}case"step":{if(r==="any"){e.step=r;break}const i=parseInt(r,10);!Number.isNaN(i)&&i>0&&(e.step=r);break}case"disabled":{e.disabled=r!=null;break}case"rows":{const i=parseInt(r,10);Number.isNaN(i)||(e.rows=r);break}default:{e[t]=r;break}}return e}const Af=C.memo(C.forwardRef(function({outputSpec:e,children:t,...r},i){if(typeof e=="string")return D.jsx(D.Fragment,{children:e});if(!Array.isArray(e))throw new Error("@nytimes/react-prosemirror only supports strings and arrays in toDOM");const s=e[0].replace(" ",":"),l=e[1];let a={ref:i,...r},u=1;l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)&&(u=2,a=p0(h0(l),a));const c=[];for(let f=u;f<e.length;f++){const d=e[f];if(d===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return C.createElement(s,a,t)}c.push(D.jsx(Af,{outputSpec:d,children:t}))}return C.createElement(s,a,...c)})),m0=C.memo(C.forwardRef(function({mark:e,getPos:t,children:r},i){const{siblingsRef:o,parentRef:s}=C.useContext(lt),l=C.useRef(void 0),a=C.useRef([]),u=C.useRef(null);C.useImperativeHandle(i,()=>u.current,[]);const c=C.useMemo(()=>{var d,p;return(p=(d=e.type.spec).toDOM)==null?void 0:p.call(d,e,!0)},[e]);if(!c)throw new Error(`Mark spec for ${e.type.name} is missing toDOM`);C.useLayoutEffect(()=>{const d=o.current;return()=>{if(l.current&&d.includes(l.current)){const p=d.indexOf(l.current);d.splice(p,1)}}},[o]),C.useLayoutEffect(()=>{if(!u.current)return;const d=a.current[0];l.current?(l.current.parent=s.current,l.current.dom=u.current,l.current.contentDOM=(d==null?void 0:d.dom.parentElement)??u.current,l.current.mark=e,l.current.getPos=()=>t.current()):l.current=new oC(s.current,a.current,()=>t.current(),e,u.current,(d==null?void 0:d.dom.parentElement)??u.current),o.current.includes(l.current)||o.current.push(l.current),o.current.sort(er);for(const p of a.current)p.parent=l.current});const f=C.useMemo(()=>({parentRef:l,siblingsRef:a}),[a,l]);return D.jsx(Af,{ref:u,outputSpec:c,children:D.jsx(lt.Provider,{value:f,children:r})})}));function gC({widget:n,getPos:e}){const{siblingsRef:t,parentRef:r}=C.useContext(lt),i=C.useRef(null),o=C.useRef(null);return C.useLayoutEffect(()=>{const s=t.current;return()=>{if(i.current&&s.includes(i.current)){const l=s.indexOf(i.current);s.splice(l,1)}}},[t]),i0(s=>{if(!o.current)return;const l=n.type.toDOM;let a=typeof l=="function"?l(s,()=>e.current()):l;if(!n.type.spec.raw){if(a.nodeType!=1){const u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}o.current.firstElementChild!==a&&o.current.replaceChildren(a)}),C.useLayoutEffect(()=>{o.current&&(i.current?(i.current.parent=r.current,i.current.widget=n,i.current.getPos=()=>e.current(),i.current.dom=o.current):i.current=new Tf(r.current,()=>e.current(),n,o.current),t.current.includes(i.current)||t.current.push(i.current),t.current.sort(er))}),D.jsx("span",{ref:o})}const yC=C.createContext(null),wC=C.createContext(null),g0=C.memo(function({outerDeco:e,getPos:t,node:r,innerDeco:i,...o}){const s=C.useRef(null),l=C.useRef(null),a=C.useRef(null),u=C.useRef(()=>t.current()).current,c=C.useRef(r),f=C.useRef(e),d=C.useRef(i),p=C.useRef(null),h=C.useRef(null),{nodeViews:g}=C.useContext(bv),{view:v}=C.useContext(No);let m=null;const y=g[r.type.name],w=C.useMemo(()=>{var H,de;return(de=(H=r.type.spec).toDOM)==null?void 0:de.call(H,r)},[r]),x=v==null?void 0:v.someProp("nodeViews",H=>H==null?void 0:H[r.type.name]);C.useLayoutEffect(()=>{if(!h.current||!p.current)return;const{dom:H}=h.current;return l.current=p.current,p.current.appendChild(H),()=>{var de,Sn;(Sn=(de=h.current)==null?void 0:de.destroy)==null||Sn.call(de)}},[]),C.useLayoutEffect(()=>{if(!x||!h.current)return;const{destroy:H,update:de}=h.current;if(((de==null?void 0:de.call(h.current,r,e,i))??!0)||(H==null||H.call(h.current),!p.current))return;c.current=r,f.current=e,d.current=i,h.current=x(c.current,v,()=>t.current(),f.current,d.current);const{dom:T}=h.current;l.current=p.current,p.current.appendChild(T)},[x,v,i,r,e,t]);const{hasContentDOM:N,childDescriptors:M,setStopEvent:R,setSelectNode:O,nodeViewDescRef:W}=f0(r,()=>t.current(),s,l,i,e,void 0,a),F={...o,...!N&&{contentEditable:!1}},We=C.useMemo(()=>({node:r,getPos:u,decorations:e,innerDecorations:i}),[u,i,r,e]);if(y)m=D.jsx(y,{...F,ref:l,nodeProps:We,children:D.jsx(Ui,{getPos:t,node:r,innerDecorations:i})});else if(x){h.current||(h.current=x(c.current,v,()=>t.current(),f.current,d.current));const{contentDOM:H}=h.current;a.current=H??null,m=C.createElement(r.isInline?"span":"div",{ref:p,contentEditable:!!H,suppressContentEditableWarning:!0},H&&r0.createPortal(D.jsx(Ui,{getPos:t,node:r,innerDecorations:i}),H))}else w&&(m=D.jsx(Af,{...F,ref:l,outputSpec:w,children:D.jsx(Ui,{getPos:t,node:r,innerDecorations:i})}));if(!m)throw new Error(`Node spec for ${r.type.name} is missing toDOM`);const Jt=C.cloneElement(e.reduce(Df,m),e.some(H=>H.type.attrs.nodeName)?{ref:s}:void 0),vn=r.isInline?Jt:r.marks.reduce((H,de)=>D.jsx(m0,{getPos:t,mark:de,children:H}),Jt),Do=C.useMemo(()=>({parentRef:W,siblingsRef:M}),[M,W]);return D.jsx(yC.Provider,{value:O,children:D.jsx(wC.Provider,{value:R,children:D.jsx(lt.Provider,{value:Do,children:C.cloneElement(vn,r.marks.length&&!r.isInline||e.some(H=>H.type.attrs.nodeName)?{ref:s}:void 0)})})})});function kC({getPos:n}){const{siblingsRef:e,parentRef:t}=C.useContext(lt),r=C.useRef(null),i=C.useRef(null),[o,s]=C.useState(!1);return C.useLayoutEffect(()=>{const l=e.current;return()=>{if(r.current&&l.includes(r.current)){const a=l.indexOf(r.current);l.splice(a,1)}}},[e]),C.useLayoutEffect(()=>{var a;const l=e.current[e.current.length-1];if((Sr.safari||Sr.chrome)&&((a=l==null?void 0:l.dom)==null?void 0:a.contentEditable)=="false"){s(!0);return}i.current&&(r.current?(r.current.parent=t.current,r.current.dom=i.current,r.current.getPos=()=>n.current()):r.current=new wo(t.current,[],()=>n.current(),i.current,null),e.current.includes(r.current)||e.current.push(r.current),e.current.sort(er))}),o?D.jsx("img",{ref:i,className:"ProseMirror-separator"}):null}function vC(n,e){if(n===e)return!0;if(!n||!e)return!1;const t=Object.keys(n),r=Object.keys(e),i=t.length;if(r.length!==i)return!1;for(let o=0;o<i;o++){const s=t[o];if(n[s]!==e[s]||!Object.prototype.hasOwnProperty.call(e,s))return!1}return!0}class SC extends C.Component{constructor(){super(...arguments),this.viewDescRef=null,this.renderRef=null}updateEffect(){const{view:e,decorations:t,siblingsRef:r,parentRef:i,getPos:o,node:s}=this.props,l=r0.findDOMNode(this);if(!l){if(!(e!=null&&e.composing))return;this.viewDescRef=new kl(i.current,()=>o.current(),document.createElement("div"),document.createTextNode(s.text??""),s.text??"");return}let a=l;for(;a.firstChild;)a=a.firstChild;!this.viewDescRef||this.viewDescRef instanceof kl?this.viewDescRef=new sC(void 0,[],()=>o.current(),s,t,j.empty,l,a):(this.viewDescRef.parent=i.current,this.viewDescRef.children=[],this.viewDescRef.node=s,this.viewDescRef.getPos=()=>o.current(),this.viewDescRef.outerDeco=t,this.viewDescRef.innerDeco=j.empty,this.viewDescRef.dom=l,this.viewDescRef.dom.pmViewDesc=this.viewDescRef,this.viewDescRef.nodeDOM=a),r.current.includes(this.viewDescRef)||r.current.push(this.viewDescRef),r.current.sort(er)}shouldComponentUpdate(e){return!vC(this.props,e)}componentDidMount(){this.updateEffect()}componentDidUpdate(){this.updateEffect()}componentWillUnmount(){const{siblingsRef:e}=this.props;if(this.viewDescRef&&e.current.includes(this.viewDescRef)){const t=e.current.indexOf(this.viewDescRef);e.current.splice(t,1)}}render(){const{view:e,getPos:t,node:r,decorations:i}=this.props;return e!=null&&e.composing&&e.state.selection.from>=t.current()&&e.state.selection.from<=t.current()+r.nodeSize?this.renderRef:(this.renderRef=i.reduce(Df,r.text),this.renderRef)}}function xC({getPos:n}){const{siblingsRef:e,parentRef:t}=C.useContext(lt),r=C.useRef(null),i=C.useRef(null);return C.useLayoutEffect(()=>{const o=e.current;return()=>{if(r.current&&o.includes(r.current)){const s=o.indexOf(r.current);o.splice(s,1)}}},[e]),C.useLayoutEffect(()=>{i.current&&(r.current?(r.current.parent=t.current,r.current.dom=i.current,r.current.getPos=()=>n.current()):r.current=new wo(t.current,[],()=>n.current(),i.current,null),e.current.includes(r.current)||e.current.push(r.current),e.current.sort(er))}),D.jsx("br",{ref:i,className:"ProseMirror-trailingBreak"})}function CC({widget:n,getPos:e}){const{siblingsRef:t,parentRef:r}=C.useContext(lt),i=C.useRef(null),o=C.useRef(()=>e.current()).current,s=C.useRef(null);C.useLayoutEffect(()=>{const a=t.current;return()=>{if(i.current&&a.includes(i.current)){const u=a.indexOf(i.current);a.splice(u,1)}}},[t]),C.useLayoutEffect(()=>{s.current&&(i.current?(i.current.parent=r.current,i.current.widget=n,i.current.getPos=()=>e.current(),i.current.dom=s.current):i.current=new Tf(r.current,()=>e.current(),n,s.current),t.current.includes(i.current)||t.current.push(i.current),t.current.sort(er))});const{Component:l}=n.type;return l&&D.jsx(l,{ref:s,widget:n,getPos:o,contentEditable:!1})}function Df(n,e){const{nodeName:t,...r}=e.type.attrs,i=h0(r);return t||typeof n=="string"?C.createElement(t??"span",i,n):C.cloneElement(n,p0(n.props,i))}function Ba(n,e){var t,r,i;return n.type===e.type&&n.marks.every(o=>o.isInSet(e.marks))&&e.marks.every(o=>o.isInSet(n.marks))&&n.key===e.key&&(n.type==="node"?((t=n.outerDeco)==null?void 0:t.length)===((r=e.outerDeco)==null?void 0:r.length)&&((i=n.outerDeco)==null?void 0:i.every(o=>{var s;return(s=e.outerDeco)==null?void 0:s.some(l=>o.from===l.from&&o.to&&l.to&&o.type.eq(l.type))}))&&n.innerDeco.eq(e.innerDeco):!0)&&n.node===e.node&&n.widget===e.widget}const EC=C.memo(function({child:e,getInnerPos:t}){const{view:r}=C.useContext(No),i=C.useRef(()=>t.current()+e.offset);return i.current=()=>t.current()+e.offset,e.type==="widget"?D.jsx(CC,{widget:e.widget,getPos:i},e.key):e.type==="native-widget"?D.jsx(gC,{widget:e.widget,getPos:i},e.key):e.node.isText?D.jsx(lt.Consumer,{children:({siblingsRef:o,parentRef:s})=>D.jsx(SC,{view:r,node:e.node,getPos:i,siblingsRef:o,parentRef:s,decorations:e.outerDeco})},e.key):D.jsx(g0,{node:e.node,getPos:i,outerDeco:e.outerDeco,innerDeco:e.innerDeco},e.key)}),NC=C.memo(function({childViews:e,getInnerPos:t}){const r=e[0],i=C.useRef(()=>t.current()+r.offset);i.current=()=>t.current()+r.offset;const o=r.marks[0];return o?D.jsx(m0,{getPos:i,mark:o,children:D.jsx(zf,{getInnerPos:t,childViews:e.map(s=>({...s,marks:s.marks.slice(1)}))},r.key)},r.key):D.jsx(D.Fragment,{children:e.map(s=>D.jsx(EC,{child:s,getInnerPos:t},s.key))})}),zf=C.memo(function({getInnerPos:e,childViews:t}){const r=t.reduce((i,o)=>{var a;const s=i[i.length-1];if(!s)return[[o]];const l=s[s.length-1];return l?!o.marks.length&&!l.marks.length||o.marks.length&&l.marks.length&&((a=o.marks[0])!=null&&a.eq(l.marks[0]))?[...i.slice(0,i.length-1),[...s.slice(0,s.length),o]]:[...i,[o]]:[...i.slice(0,i.length),[o]]},[]);return D.jsx(D.Fragment,{children:r.map(i=>{const o=i[0];return o?D.jsx(NC,{childViews:i,getInnerPos:e},o.key):null})})});function Ja(n,e,t,r,i,o){const s=n+e,l=r==null?void 0:r.get(s);if(t==="widget"||t==="native-widget")return i.type.spec.key?i.type.spec.key:(console.warn(`Widget at position ${s} doesn't have a key specified. This may cause issues.`),`${l}-${o}`);if(l)return l;const a=n-1,u=r==null?void 0:r.get(a);return u?`${u}-${e}`:s}function MC(n,e){if(!e||e.widget.type.side>=0||!n||!n.node.isInline)return;const t=n.marks;e.marks=e.marks.reduce((r,i)=>i.addToSet(r),t)}function RC(n,e){if(!e.node.isInline)return;const t=e.marks;for(let r=n.length-1;r>=0;r--){const i=n[r];i.widget.type.side<0||(i.marks=i.marks.reduce((o,s)=>s.addToSet(o),t))}}const OC=C.memo(function({child:e,getInnerPos:t}){const r=C.useRef(()=>t.current()+e.offset);return r.current=()=>t.current()+e.offset,e.type==="node"?D.jsx(g0,{outerDeco:e.outerDeco,node:e.node,innerDeco:e.innerDeco,getPos:r},e.key):D.jsx(zf,{childViews:[e],getInnerPos:t},e.key)});function TC(n,e){return n.length?n.every(t=>t.type!=="node"||t.node.isInline)?[D.jsx(zf,{childViews:n,getInnerPos:e},n[0].key)]:n.map(t=>D.jsx(OC,{child:t,getInnerPos:e},t.key)):[]}const Ui=C.memo(function({getPos:e,node:t,innerDecorations:r}){const i=fC(),o=C.useRef(()=>e.current()+1),s=C.useRef(new Map).current;if(!t)return null;const l=new Set;let a=[],u=null;cC(t,r,(p,h,g,v)=>{const m=p.type.spec.marks??[];let y;if(h){y=Ja(o.current(),g,"native-widget",i==null?void 0:i.posToKey,p,v);const x={type:"native-widget",widget:p,marks:m,offset:g,index:v,key:y},N=s.get(y);N&&Ba(N,x)?N.offset=g:s.set(y,x),l.add(y)}else{y=Ja(o.current(),g,"widget",i==null?void 0:i.posToKey,p,v);const x={type:"widget",widget:p,marks:m,offset:g,index:v,key:y},N=s.get(y);N&&Ba(N,x)?N.offset=g:s.set(y,x),l.add(y)}const w=s.get(y);a.push(w),MC(u,s.get(y))},(p,h,g,v)=>{const m=Ja(o.current(),v,"node",i==null?void 0:i.posToKey),y={type:"node",node:p,marks:p.marks,innerDeco:g,outerDeco:h,offset:v,key:m},w=s.get(m);w&&Ba(w,y)?(w.offset=v,u=w):(s.set(m,y),u=y),l.add(m),RC(a,u),a=[]});for(const p of s.keys())l.has(p)||s.delete(p);const c=Array.from(s.values()).sort((p,h)=>p.offset-h.offset),f=TC(c,o),d=c[c.length-1];return(!d||d.type!=="node"||d.node.isInline&&!d.node.isText||/\n$/.test(d.node.text))&&f.push(D.jsx(kC,{getPos:o},"trailing-hack-img"),D.jsx(xC,{getPos:o},"trailing-hack-br")),D.jsx(D.Fragment,{children:f})}),Va={current(){return-1}},AC=C.memo(C.forwardRef(function({className:e,node:t,innerDeco:r,outerDeco:i,as:o,viewDesc:s,...l},a){const u=C.useRef(null);C.useImperativeHandle(a,()=>u.current,[]);const{childDescriptors:c,nodeViewDescRef:f}=f0(t,()=>Va.current(),u,u,r,i,s),d=C.useMemo(()=>({parentRef:f,siblingsRef:c}),[c,f]),p={...l,ref:u,className:e,suppressContentEditableWarning:!0},h=o?C.cloneElement(o,p,D.jsx(lt.Provider,{value:d,children:D.jsx(Ui,{getPos:Va,node:t,innerDecorations:r})})):C.createElement("div",p,D.jsx(lt.Provider,{value:d,children:D.jsx(Ui,{getPos:Va,node:t,innerDecorations:r})}));if(!t)return h;const g=i.filter(m=>!m.inline);return g.length?g.reduce(Df,h):h})),DC=C.createContext(null);function zC({as:n,...e},t){const r=C.useRef([]),i=C.useRef(null),{setMount:o,...s}=C.useContext(DC),l=C.useRef(void 0);C.useImperativeHandle(t,()=>i.current,[]);const a=C.useMemo(()=>({parentRef:l,siblingsRef:r}),[r,l]);return D.jsx(lt.Provider,{value:a,children:D.jsx(AC,{ref:u=>{i.current=u,o(u)},...e,...s,as:n})})}C.forwardRef(zC);const J=new gh({nodes:{doc:{content:"block+"},paragraph:{group:"block",content:"inline*",toDOM(){return["p",0]}},...sv({cellContent:"inline*",cellAttributes:{},tableGroup:"block"}),footnote:{group:"inline",content:"text*",inline:!0,atom:!0,attrs:{number:{default:0}}},list:{group:"block",content:"list_item+",toDOM(){return["ul",0]}},list_item:{content:"paragraph+",toDOM(){return["li",0]}},image:{group:"block",toDOM(){return["div",["img",{src:"https://smoores.gitlab.io/storyteller/img/Storyteller_Logo.png",height:150,width:150}]]}},text:{group:"inline"}},marks:{em:{toDOM(){return["em",0]}},strong:{toDOM(){return["strong",0]}}}});zn.create({schema:J,doc:J.nodes.doc.create({},[J.nodes.paragraph.create({},[J.text("This ",[J.marks.em.create()]),J.text("is",[J.marks.em.create(),J.marks.strong.create()]),J.text(" the first paragraph")]),J.nodes.paragraph.create({},[J.text("This is the second paragraph"),J.nodes.footnote.create({number:1},J.text("Footnote"))]),J.nodes.paragraph.create(),J.nodes.image.create(),J.nodes.image.create(),J.nodes.paragraph.create({},J.text("This is the third paragraph 🫵")),J.nodes.table.create({},[J.nodes.table_row.create({},[J.nodes.table_header.create({},J.text("h1")),J.nodes.table_header.create({},J.text("h2"))]),J.nodes.table_row.create({},[J.nodes.table_cell.create({},J.text("c1")),J.nodes.table_cell.create({},J.text("c2"))])])]),plugins:[Qx(),Ek({rules:[Nk(/^\s*([-+*])\s$/,J.nodes.list)]}),Nv(),$v()]});C.forwardRef(function({children:e,nodeProps:t,...r},i){return D.jsx("p",{ref:i,...r,children:e})});C.forwardRef(function({children:e,nodeProps:t,...r},i){return D.jsx("ul",{ref:i,...r,children:e})});C.forwardRef(function({children:e,nodeProps:t,...r},i){return D.jsx("li",{ref:i,...r,children:e})});C.forwardRef(function({nodeProps:e,...t},r){return D.jsx("span",{ref:r,...t,suppressContentEditableWarning:!0,contentEditable:"false",children:D.jsx("button",{children:e.node.attrs.number})})});const IC=C.forwardRef(function({widget:e,getPos:t,...r},i){return D.jsx("span",{...r,ref:i,style:{display:"block",backgroundColor:"blue",width:"4px",height:"4px",position:"absolute",transform:"translateX(-2px)"},children:"Widget"})}),PC=new pn({view(n){const e=n.coordsAtPos(n.state.selection.from),t=document.createElement("div");return t.style.width="4px",t.style.height="4px",t.style.position="absolute",t.style.top=`${e.top-2}px`,t.style.left=`${e.left-2}px`,t.style.backgroundColor="blue",document.body.appendChild(t),{update(r){const i=r.coordsAtPos(r.state.selection.from);t.style.top=`${i.top-2}px`,t.style.left=`${i.left-2}px`},destroy(){document.body.removeChild(t)}}}});new pn({props:{decorations(n){return j.create(n.doc,[jx(n.selection.from,IC,{side:0,key:"widget-plugin-widget"})])}},view(n){const e=n.coordsAtPos(n.state.selection.from),t=document.createElement("div");return t.style.width="4px",t.style.height="4px",t.style.position="absolute",t.style.top=`${e.top-2}px`,t.style.left=`${e.left-2}px`,t.style.backgroundColor="blue",document.body.appendChild(t),{update(r){const i=r.coordsAtPos(r.state.selection.from);t.style.top=`${i.top-2}px`,t.style.left=`${i.left-2}px`},destroy(){document.body.removeChild(t)}}}});Tk({...sw,"Mod-i":nd(J.marks.em),"Mod-b":nd(J.marks.strong)}),lk();
